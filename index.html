<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="UTF-8">
        <meta name="description" content="魚をクリックして数を増やし、万 → 億 → 兆 → … と 単位がインフレしていくクリッカーゲームです。PC・スマホ・タブレットに対応しています。">
        <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no">
        <link rel="stylesheet" href="style.css">
        <link href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css" rel="stylesheet">
        <link rel="icon" href="./favicon.ico" type="image/x-icon">
        <title>おさかなクリッカー</title>
    </head>

    <body>
        <!--ロード画面-->
        <div id="loading">
            <p id="loadp">ロード中</p>
            <div class="cp_loading12">
                <div class="cp_item"></div>
                <div class="cp_item"></div>
                <div class="cp_item"></div>
            </div>
            <span id="sikaku"></span>
        </div>

        <div class="header">
                <p class="my-parts" >#<span>お</span>さかなクリッカー</p>
                <button id="hatena">ヘルプ<i class="ri-question-fill"></i></button>
                <div class="headerbutton">
                    <button id="buttonAA" class="btnstyle">記録<i class="ri-bar-chart-fill"></i></button>
                    <button id="sbtn" class="btnstyle">設定<i class="ri-settings-3-fill"></i></button>
                    <button id="tenseibtn" class="btnstyle">転生<i class="ri-repeat-line"></i></button>
                </div>
                <div class="slidemoji">
                    <ul>
                        <li>▶︎おさかなクリッカーへようこそ!</li>
                        <li>お知らせ<i class="ri-phone-fill"></i>:<span class="textao">12/22アップデート!</span></li>
                        <li>2025/10/02 おさかなクリッカー公開!</li>
                        <li></li>
                        <li>設定で名前や音の大きさ、文字が変えられます</li>
                        <li></li>
                        <li></li>
                        <li>ヒント<i class="ri-lightbulb-line"></i>:最初はねこショップで食べ物<i class="ri-restaurant-fill"></i>を買いましょう</li>
                        <li></li>
                        <li></li>
                        <li>ヒント<i class="ri-lightbulb-line"></i>:ミッションをクリアして小判を獲得しましょう</li>
                        <li></li>
                        <li>左上のヘルプ<i class="ri-question-fill"></i>で遊び方が確認できます</li>
                    </ul>    
                </div>
                <div id="counts">
                    <p class="counterr" id="countsakana"><i class="ri-money-cny-circle-fill"></i>魚 <span id="counter">0</span></span></p>
                    <p class="coun" id="couns"><span><i class="ri-time-fill"></i><span id="coun1s">毎秒+0</span></span></p>
                    <p class="counterr" id="countlv"><span><i class="ri-star-fill"></i>小判 <span id="inputLv">0</span></span>
                    <button id="koukann"><i class="ri-arrow-left-right-line"></i></button></p>
                </div>
        </div>

        <div class="tab" id="hatenatab">
            <button class="xbutton" onclick="xbutton(event)"><i class="ri-close-fill"></i></button>
            <div class="scroll" id="s1">
                <h4>このゲームについて</h4>
                <details>
                    <summary>クレジット</summary>
                    <p>素材提供</p>
                    <ul>
                        <li>
                            <strong><a href="https://remixicon.com/" target="_blank" rel="noopener noreferrer">Remix Icon</a></strong> 様<br>
                        </li>
                        <li>
                            <strong><a href="https://www.irasutoya.com/" target="_blank" rel="noopener noreferrer">いらすとや</a></strong> 様<br>
                        </li>
                        <li>
                            <strong><a href="https://nekoillust.com/" target="_blank" rel="noopener noreferrer">無料の猫イラスト素材専門サイト｜猫画工房公式サイト</a></strong> 様<br>
                        </li>
                        <li>
                            <strong><a href="https://on-jin.com/" target="_blank" rel="noopener noreferrer">On-Jin ～音人～</a></strong> 様<br>
                        </li>
                        <li>
                            <strong><a href="https://soundeffect-lab.info/" target="_blank" rel="noopener noreferrer">効果音ラボ</a></strong> 様<br>
                        </li>
                    </ul>
                </details>
                <h4>遊び方</h4>
                <details>
                    <summary>遊び方</summary>
                    <ul>
                        <li>
                            <img src="./images/おさかな.png">
                            をクリックして<span class="tango">魚</span><i class="ri-money-cny-circle-fill"></i>を集めることができます。
                        </li>
                        <li>
                            集めた<span class="tango">魚</span>は、アイテムショップはねこショップで使用します。
                        </li>
                        <li>
                            <span class="tango">ねこショップ</span>で食べ物を買うと、1回のクリック<i class="ri-cursor-line"></i>で得られる<span class="tango">魚</span>の量（獲得量）が増加します。
                        </li>
                    </ul>
                </details>
                <details>
                    <summary>単位について</summary>
                    <ul>
                        <li>
                            単位は万→億→兆→京→垓→秭→穣→溝→澗→正→載→極→恒河沙→阿僧祇→那由他→不可思議→無量大数と増えていきます。無量大数が最大です。
                        </li>
                    </ul>
                </details>
                <details>
                    <summary>小判について</summary>
                    <ul>
                        <li>
                            <span class="tango">小判</span>は、<span class="tango">ウラショップ</span>の食べ物のクリック<i class="ri-cursor-line"></i>強化に使用します。
                        </li>
                        <li>
                            <span class="tango">小判</span>を獲得するには、<span class="tango">ミッション</span>をクリアしたり、食べ物を購入する必要があります。
                        </li>
                        <li>
                            <span class="tango">缶詰</span>は<span class="tango">10コ</span>購入するごとに、<span class="tango">小判</span>が1獲得できます。
                        </li>
                        <li>
                            <span class="tango">キャットフード</span>と<span class="tango">高級缶詰</span>は、<span class="tango">5コ</span>購入するごとに<span class="tango">小判</span>が1獲得できます。
                        </li>
                    </ul>
                </details>
                <details>
                    <summary>ミッションについて</summary>
                    <ul>
                        <li>
                            <span class="tango">ミッション</span>は、条件を達成することで<span class="tango">小判</span>を獲得することができるシステムです。
                        </li>
                        <li>
                            条件には、「魚を一定数集める」「ものを一定数購入する」などがあります。
                        </li>
                        <li>
                            <span class="tango">ミッション</span>を達成すると、もらえる<span class="tango">小判</span>の数が上昇します。
                        </li>
                        <li>
                            一部の<span class="tango">ミッション</span>は、徐々に難易度が上がっていくものもあります。
                        </li>
                    </ul>
                </details>
            </div>
        </div>

        <div class="tap">
            <div>
                <div id="target" onclick="hit(event)">
                    <img src='./images/おさかな.png' id="sakana">
                    <img  class="tcicon" id="tapicon" src="./images/computer_cursor_finger_white.png">
                    <img  class="tcicon" id="clickicon" src="./images/nikukyu_shiro.png">
                    <P id="upsakana">+1</P>
                    <p class="coun"><span><i class="ri-cursor-line"></i><span id="coun">+0</span></span></p>
                </div>
            </div>
        </div>

        <button class="yokobtn" id="tst">ミッション<i class="ri-todo-fill"></i></button>
        <button class="yokobtn" id="jisseki">実績<i class="ri-checkbox-fill"></i></button>

        <!-- ミッション-->
        <div class="mmm2"id="mii2">
            <button class="xbutton" id="xx2" onclick="xbutton(event)"><i class="ri-close-fill"></i></button>
            <div class="scroll" id="s2">
                <h3 id="title">ミッション</h3>
                <div>
                    <div>
                        <p class="mt2"><span id="mq12">ミッション１</span><span id="ato12">クリアまであと...</span></p>
                        <p class="mt2"><span id="mq22">ミッション２</span><span id="ato22">クリアまであと...</span></p>
                        <p class="mt2"><span id="mq32">ミッション３</span><span id="ato32">クリアまであと...</span></p>
                        <p class="mt2"><span id="mq42">魚を1000コ以上集める 小判+10</span><span id="ato42">クリアまであと...</span></p>
                        <p class="mt2"><span id="mq52">魚を1万コ以上集める 小判+30</span><span id="ato52">クリアまであと...</span></p>
                        <p class="mt2"><span id="mq62">魚を10万コ以上集める 小判+50</span><span id="ato62">クリアまであと...</span></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 実績-->
        <div class="mmm2" id="jissekitab">
            <button class="xbutton" id="xx2" onclick="xbutton(event)"><i class="ri-close-fill"></i></button>
            <div class="scroll" id="s4">
                <h3 id="title">実績</h3>
                <div class="date">
                    <span class="clear" id="clear01"><i class="ri-check-fill"></i></span>
                    <span class="jissekiicon" id="j01"><img class="jimg" src="./images/おさかな.png"></span>
                    <div class="tate">
                        <p class="txt" id="namae">さかなもち🥉</p>
                        <p class="bun">魚を10万コ集める</p>
                    </div>
                </div>
                <div class="date">
                    <span class="clear" id="clear02"><i class="ri-check-fill"></i></span>
                    <span class="jissekiicon" id="j02"><img class="jimg" src="./images/おさかな.png"></span>
                    <div class="tate">
                        <p class="txt" id="namae">おさかなもち🥈</p>
                        <p class="bun">魚を1億コ集める</p>
                    </div>
                </div>
                <div class="date">
                    <span class="clear" id="clear03"><i class="ri-check-fill"></i></span>
                    <span class="jissekiicon" id="j03"><img class="jimg" src="./images/おさかな.png"></span>
                    <div class="tate">
                        <p class="txt" id="namae">大さかなもち🥇</p>
                        <p class="bun">魚を1兆コ集める</p>
                    </div>
                </div>
                <div class="date">
                    <span class="clear" id="clear04"><i class="ri-check-fill"></i></span>
                    <span class="jissekiicon" id="j04"><img class="jimg" src="./images/おさかな.png"></span>
                    <div class="tate">
                        <p class="txt" id="namae">！🏆</p>
                        <p class="bun">魚を1無量大数コ集める</p>
                    </div>
                </div>
                <div class="date">
                    <span class="clear" id="clear05"><i class="ri-check-fill"></i></span>
                    <span class="jissekiicon" id="j05"><img class="jimg" src="./images/cat_fish_run.png"></span>
                    <div class="tate">
                        <p class="txt" id="namae">自動化</p>
                        <p class="bun">自動クリック数を毎秒100にする</p>
                    </div>
                </div>
                <div class="date">
                    <span class="clear" id="clear06"><i class="ri-check-fill"></i></span>
                    <span class="jissekiicon" id="j06"><img class="jimg" src="./images/ねこ1.png"></span>
                    <div class="tate">
                        <p class="txt" id="namae">普通のお客さん🥉</p>
                        <p class="bun">ショップで商品を50コ買う</p>
                    </div>
                </div>
                <div class="date">
                    <span class="clear" id="clear07"><i class="ri-check-fill"></i></span>
                    <span class="jissekiicon" id="j07"><img class="jimg" src="./images/ねこ2.png"></span>
                    <div class="tate">
                        <p class="txt" id="namae">よく見るお客さん🥈</p>
                        <p class="bun">ショップで商品を250コ買う</p>
                    </div>
                </div>
                <div class="date">
                    <span class="clear" id="clear08"><i class="ri-check-fill"></i></span>
                    <span class="jissekiicon" id="j08"><img class="jimg" src="./images/ねこ4.png"></span>
                    <div class="tate">
                        <p class="txt" id="namae">常連客🥇</p>
                        <p class="bun">ショップで商品を500コ買う</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 設定 -->
        <div  id="scon" class="tab">
            <button class="xbutton" onclick="xbutton(event)"><i class="ri-close-fill"></i></button>
            <div class="scroll" id="s3">
                <div class="tab-2">
                    <label>
                        <input type="radio" name="tab-2" checked>
                        名前<i class="ri-user-fill"></i>
                    </label>
                    <div>
                        <div class="settei">
                            <p class="marker" id="dbtn"><i class="ri-file-text-fill"></i><span>名前の設定</span></p>
                            <hr>
                            <input type="text" id="inputName" maxlength="25" placeholder="✒︎...名前を入力">
                            <div class="onryou">
                                <button onclick="saveName()" class="setteibtn" id="save">保存</button>
                                <button onclick="clearName()" class="setteibtn" id="sakujo">削除</button>
                            </div>
                            <p class="hint"><i class="ri-lightbulb-line"></i>:初期値は名無しです。</p>
                            <p class="hint"><i class="ri-lightbulb-line"></i>:名前は記録に表示されます。</p>
                            <hr>
                        </div>
                    </div>
                
                    <label>
                        <input type="radio" name="tab-2">
                        音<i class="ri-headphone-fill"></i>
                    </label>
                    <div>
                        <div class="settei">
                            <p class="marker" id="dbtn"><i class="ri-music-fill"></i><span>音の設定</span></p>
                            <hr>
                            <div class="onryou">
                                <i class="ri-volume-mute-line"></i>
                                <input type="range" id="volume" value="0.5" min="0.0" max="1.0" step="0.1">
                                <i class="ri-volume-up-line"></i>
                            </div>
                            <button class="setteibtn" id="ototst">音量テスト</button>
                            <button class="setteibtn" id="btn_reset">音量リセット</button>
                            <hr>
                        </div>
                    </div>
                
                    <label>
                        <input type="radio" name="tab-2">
                        フォント<i class="ri-font-size"></i>
                    </label>
                    <div>
                        <div class="settei">
                            <p class="marker" id="dbtn"><img src="./images/font-sans.png"><span>フォントの設定</span></p>
                            <hr>
                            <p class="up">フォントを変更</p>
                            <div id="fontkaeru">
                                <button class="fontbtn" onclick="changeFont('Chalk')">チョークS（デフォルト）</button>
                                <button class="fontbtn" id="f2" onclick="changeFont('Comic sans MS')">Comic sans</button>
                                <button class="fontbtn" id="f3" onclick="changeFont('elmer')">えるまー</button>
                                <button class="fontbtn" id="f4" onclick="changeFont('kuramubon')">くらむぼん</button>
                                <button class="fontbtn" id="f5" onclick="changeFont('mochiy')">モッチーポップ</button>
                                <button class="fontbtn" id="f6" onclick="changeFont('bananaslip_plus')">バナナスリップ</button>
                                <button class="fontbtn" id="f7" onclick="changeFont('yusei')">油性マジック</button>
                                <button class="fontbtn" id="f8" onclick="changeFont('crayon')">美咲明朝</button>
                            </div>
                            <p class="hint"><i class="ri-lightbulb-line"></i>:スクロールできます。</p>
                            <hr>
                            <p class="up">フォントの大きさ</p>
                            <button class="setteibtn" id="fA" onclick="changeFontSize(1)">+1</button>
                            <button class="setteibtn" id="fC" onclick="changeFontSize(-1)">-1</button>
                            <button onclick="resetFontSize()" class="setteibtn" id="riset">リセット</button>
                            <p class="txt">サンプル文字</p>
                            <hr>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <div id="kiroku" class="tab">
            <button class="xbutton" onclick="xbutton(event)"><i class="ri-close-fill"></i></button>
            <div id="dkiroku">
                <div id="d1" class="d">
                    <span class="marker" id="output">ここに結果が表示されます。</span><span class="marker">記録</span>
                    <p><span id="catcount">0</span><img class="catimage" id="catimg1" src="./images/526f8894d2a6851c7a6de6f137af6e68.png"></p>
                    <img id="data" src="./images/1f23085c8632289aed6b0c83d47f5cfc.png">
                    <img  class="tcicon" id="nekotapicon" src="./images/computer_cursor_finger_white.png">
                    <p id="cathyouji">クリック数<span id="catcc">000</span>突破!魚<span id="catgetsakana">000</span>コをゲット!</p>
                    <button class="btnstyle" id="catreset"><i class="ri-focus-3-line"></i>位置をリセット</button>
                    <button class="btnstyle" id="datasakujo"><i class="ri-delete-bin-2-fill"></i>データを削除</button>
                </div>
                <div id="d2" class="d">
                    <p class="up">魚を集めた数: <span class="marker" id="kirokusakana"></span></p>
                    <p class="up">小判: <span class="marker" id="kirokuLv"></span></p>
                    <p class="up">クリック数: <span class="marker" id="kirokuclick"></span></p>
                    <p class="up">転生回数: <span class="marker" id="kirokutensei"></span></p>
                    <p class="up">物を買った数: <span class="marker" id="kirokumono"></span></p>
                    <p class="up">魚を集めた数(合計): <span class="marker" id="kirokusakanas"></span></p>
                    <p class="up">魚を使った数(合計): <span class="marker" id="kirokusakanasiyou"></span></p>
                </div>
            </div>
        </div>

        <div class="tab" id="sakujogamen">
            <div id="eee">
                <img src="./images/ねこ3.png">
                <p class="bbb">本当に削除しますか？</p>
            </div>
            <button  class="sakujo" onclick="xbutton(event)">いいえ</button>
            <button  class="sakujo" id="sakujokakutei" onclick="resetcount()">データを削除</button>
        </div>

        <div id="tenseitab" class="tab">
            <button class="xbutton" id="x5" onclick="xbutton(event)"><i class="ri-close-fill"></i></button>
            <div class="scroll" id="s5">
                <p id="tnsipoint">転生ポイント　<span id="point">00000</span></p>
                <div class="tab-3">
                    <label>
                        <input type="radio" name="tab-3" checked>
                        転生<i class="ri-repeat-line"></i>
                    </label>
                    <div>
                        <p>転生できるまで<span id="imacount">000</span>/<span id="tenseicount">000</span></p>
                        <p>転生しますか？</p>
                        <p>失うもの</p>
                        <ul id="lost">
                            <li>魚</li>
                            <li>小判</li>
                            <li>ショップで買った商品</li>
                        </ul>
                        <p>※強化した商品の<i class="ri-cursor-line"></i>は初期化されません。</p>
                        <button class="btnstyle" id="tenseiok">転生する</button>
                    </div>
                    <label>
                        <input type="radio" name="tab-3">
                        スキル<i class="ri-sword-fill"></i>
                    </label>
                    <div>
                        <p>スキルを獲得すると魚が集めやすくなります。</p>
                        <div id="skill">
                            <div class="skilldate">
                                <div>
                                    <span class="kakutoku" id="kakutoku1">獲得済み<img id="nekonote" src="images/526f8894d2a6851c7a6de6f137af6e68.png"></span>
                                    <p class="txt" id="namae">スキル1</p>
                                    <p class="bun">魚をクリックしたとき、たまに多く魚を集められる<br>黄色いエフェクト</p>
                                    <p class="wavy"><span id="snedan1">000</span>ポイント</p>
                                    <button class="skillbtn" id="skillbtn1">獲得する</button>
                                </div>
                            </div>
                            <div class="skilldate">
                                <div>
                                    <span class="kakutoku" id="kakutoku2">獲得済み<img id="nekonote" src="images/526f8894d2a6851c7a6de6f137af6e68.png"></span>
                                    <p class="txt" id="namae">スキル2</p>
                                    <p class="bun">一定時間獲得量が10倍になる<br>青いエフェクト</p>
                                    <p class="wavy"><span id="snedan2">000</span>ポイント</p>
                                    <button class="skillbtn" id="skillbtn2">獲得する</button>
                                </div>
                            </div>
                            <div class="skilldate">
                                <div>
                                    <span class="kakutoku" id="kakutoku3">獲得済み<img id="nekonote" src="images/526f8894d2a6851c7a6de6f137af6e68.png"></span>
                                    <p class="txt" id="namae">スキル3</p>
                                    <p class="bun">小判を魚に変換できるようになる</p>
                                    <p class="wavy"><span id="snedan3">000</span>ポイント</p>
                                    <button class="skillbtn" id="skillbtn3">獲得する</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="tab" id="tenseikakunin">
            <div id="eee">
                <img src="./images/ねこ3.png">
                <p class="bbb">本当に転生しますか？</p>
            </div>
            <button  class="sakujo" onclick="xbutton(event)">いいえ</button>
            <button  class="sakujo" id="tenseikakutei" onclick="tensei()">はい</button>
        </div>

        <div id="koukantab" class="tab">
            <button class="xbutton" onclick="xbutton(event)"><i class="ri-close-fill"></i></button>
            <p>いくつ交換しますか？</p>
            <p>1小判 = 100魚</p>
            <p><span><i class="ri-star-fill"></i>小判 <span id="koukankoban">0</span></span> → 
            <span><i class="ri-money-cny-circle-fill"></i>魚 <span id="koukansakana">0</span></span></p>
            <p id="koukancount">000</p>
            <button class="koukanbtn" id="koukanmten">-10</button><button class="koukanbtn" id="koukanminus">-1</button>
            <button class="koukanbtn" id="koukanplus">+1</button><button class="koukanbtn" id="koukanten">>></button>
            <br><button class="koukanbtn" id="koukankakutei">交換する</button>
        </div>

        <!--効果音-->
        <audio class="koukaon" src="./音/決定ボタンを押す12.mp3"></audio><!--1-->
        <audio class="koukaon" src="./音/決定ボタンを押す31.mp3"></audio><!--3-->
        <audio class="koukaon" src="./音/決定ボタンを押す45.mp3"></audio><!--5-->
        <audio class="koukaon" src="./音/決定ボタンを押す50.mp3"></audio><!--6-->


        <!--con4-->
        <!-- <div class="con4">
            <p id="Ishop" class="shopname"><i class="ri-user-add-fill"></i><span>ね</span>こ紹介所</p>
            <div id="itemshop">
                <div>
                    <img src="./images/usagi1.png"id="usagi"><button id="btn2" class="bbb"><p>いらっしゃいませ</p></button>
                    <p><span class="tooltip-text" id="i2">自動で<span class="tango">魚</span><i class="ri-money-cny-circle-fill"></i>がクリック<i class="ri-cursor-line"></i>されます。</span>
                        <span class="setumei" id="stmi2">説明</span></p>
                </div>
                <div class="Itembox">  
                    <div class="Itemcontents"> 
                        <div class="Itemm" id="im4">
                            <div class="Itm" title="アイテム4" >
                                <p class="txt">ねこの手<i class="ri-cursor-line"></i><i class="ri-timer-fill"></i></p>
                                <img  class="Itemphoto" src="./images/cat_fish_run.png">
                                <p id="photo2">魚+5</p>
                                <p><i class="ri-cursor-line"></i><span>+5</span></p>
                                <p id="Inedan5" class="nee">650魚</p>
                                <button id="Item5" class="Itembtn">購入する</button>
                            </div>
                        </div>
                        <div class="Itemm" id="im0">
                            <div class="Itm" title="アイテム4" >
                                <p class="txt">ねこの手<i class="ri-cursor-line"></i><i class="ri-timer-fill"></i></p>
                                <img  class="Itemphoto" src="./images/cat_fish_run.png">
                                <p id="photo2">魚+5</p>
                                <p><i class="ri-cursor-line"></i><span>+5</span></p>
                                <p id="Inedan5" class="nee">650魚</p>
                                <button id="Item5" class="Itembtn">購入する</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div> 
        </div> -->

        <!--con1-->
        <div class="con1">
            <p id="Ishop" class="shopname"><i class="ri-store-line"></i><span>ア</span>イテムショップ</p>
            <div id="itemshop">
                <div>
                    <img src="./images/usagi1.png"id="usagi"><button id="btn2" class="bbb"><p>いらっしゃいませ</p></button>
                    <p><span class="tooltip-text" id="i1">魚が150貰えます。</span><span class="setumei">説明</span></p>
                </div>
                <div class="Itembox">  
                    <div class="Itemcontents"> 
                        <div class="Itemm" id="im1">
                            <div class="Itm" title="アイテム1" >
                                <p class="txt">150魚<i class="ri-money-cny-circle-fill"></i></p>
                                <img class="Itemphoto" src="./images/おさかな.png">
                                <p id="photo1">+150</p>
                                <p class="nee"><span id="Itm1buy">あと5コ</span></p>
                                <p class="nee"><span id="Inedan">0</span>魚</p>
                                <button id="Item" class="Itembtn">購入する</button>
                            </div>
                        </div>
                        <div class="Itemm" id="im2">
                            <div class="Itm" title="アイテム2" >
                                <p class="txt">セールの張り紙<i class="ri-money-cny-circle-fill"></i><i class="ri-restaurant-fill"></i></p>
                                <img  class="Itemphoto" src="./images/pop_sale.png">
                                <p class="nee"><span id="Inedan2">800</span>魚</p>
                                <button id="Item2" class="Itembtn">購入する</button>
                            </div>
                        </div>
                        <div class="Itemm" id="im3">
                            <div class="Itm" title="アイテム3" >
                                <p class="txt">ねこみくじ<i class="ri-restaurant-fill"></i></p>
                                <img  class="Itemphoto" src="./images/syougatsu2_omijikuji2.png">
                                <p class="nee"><span id="Inedan4">100</span>魚</p>
                                <button id="Item4" class="Itembtn">購入する</button>
                            </div>
                        </div>
                        <div class="Itemm" id="im4">
                            <div class="Itm" title="アイテム4" >
                                <p class="txt">ねこの手<i class="ri-cursor-line"></i><i class="ri-timer-fill"></i></p>
                                <img  class="Itemphoto" src="./images/cat_fish_run.png">
                                <p id="photo2">魚+5</p>
                                <p class="up"><i class="ri-cursor-line"></i><span>+5</span></p>
                                <p class="nee"><span id="Inedan5">650</span>魚</p>
                                <button id="Item5" class="Itembtn">購入する</button>
                            </div>
                        </div>
                    </div> 
                </div> 
            </div>
        </div>
            
        <div class="contents con2">
            <p id="catshop" class="shopname"><i class="ri-store-line"></i><span>ね</span>こショップ</p>
            <div id="oyatuclass">
                <div>
                    <img src='./images/ねこ1.png'id="cat"><button id="btn" class="bbb"><p>こんにちは</p></button> 
                    <p id="I2tt">セール中!!<img src="./images/260e7b51ae567910688098570070af62.png" id="nekonote"></p>
                    <div id="timerdisplay"></div>
                </div>
                <div class="oyatubox">
                    <div class="oyatukau">
                        <i class="ri-shopping-basket-fill"></i>
                        <button id="plus10" class="pm">+10</button>
                        <button id="plus" class="pm">+1</button><!-- プラス -->
                        <button id="kau" class="pm">1</button>
                        <button id="minus" class="pm">-1</button><!-- マイナス -->
                        <button id="minus10" class="pm">-10</button>
                    </div>
                    <div id="oyatuclass2">
                        <div id="oyatuu" class="oyatudiv"title="食べ物1" >
                            <p class="txt">缶詰<i class="ri-restaurant-fill"></i></p>
                            <button class="oyatu" id="oyatu" onclick="syouhinclick()">
                                <img src="./images/pet_food_cat_can.png">
                                <span class="sale">セール中!</span>
                            </button>
                            <p><span id="get" class="up">所持数　×0</span></p>
                            <p><i class="ri-cursor-line"></i><span id="+cnt2" class="up">+0</span></p>
                            <p class="line"><span id="nedan">20</span>魚</p>
                            <button id="button1" class="text">購入する</button>
                        </div>
                        <div id="oyatutu" class="oyatudiv"title="食べ物2" >
                            <p class="txt">キャットフード<i class="ri-restaurant-fill"></i></p>
                            <button class="oyatu" id="hood" onclick="syouhinclick()">
                                <img src="./images/pet_food_cat.png">
                                <span class="sale">セール中!</span>
                            </button>
                            <p><span id="get2" class="up">所持数　×0</span></p>
                            <p><i class="ri-cursor-line"></i><span id="+cnt3" class="up">+0</span></p>
                            <p class="line"><span id="nedan2">80</span>魚</p>
                            <button id="button2" class="text">購入する</button>
                        </div>
                        <div id="oyatu3" class="oyatudiv"title="食べ物3" >
                            <p class="txt">高級缶詰<i class="ri-restaurant-fill"></i></p>
                            <button class="oyatu"onclick="syouhinclick()">
                                <img src="./images/kandume_koukyuu.png">
                                <span class="sale">セール中!</span>
                            </button>
                            <p><span id="get3" class="up">所持数　×0</span></p>
                            <p><i class="ri-cursor-line"></i><span id="+cnt4" class="up">+0</span></p>
                            <p class="line"><span id="nedan3">150</span>魚</p>
                            <button id="button3" class="text">購入する</button>
                        </div>
                        <div id="oyatu4" class="oyatudiv">
                            <p class="txt">オヤツ<i class="ri-restaurant-fill"></i></p>
                            <button class="oyatu"onclick="syouhinclick()">
                                <img src="./images/pet_oyatsu_cat.png">
                                <span class="sale">セール中!</span>
                            </button>
                            <p><span id="get4" class="up">所持数　×0</span></p>
                            <p><i class="ri-cursor-line"></i><span id="+cnt5" class="up">+50</span></p>
                            <p class="line"><span id="nedan4">800</span>魚</p>
                            <button id="button4" class="text">購入する</button>
                        </div>
                        <div id="oyatu5" class="oyatudiv">
                            <p class="txt">ケーキ<i class="ri-gift-fill"></i></p>
                            <button class="oyatu">
                                <img src="./images/pet_cat_birthday_cake.png">
                            </button>
                            <p><span id="get5" class="up">所持数　×0</span></p>
                            <p><i class="ri-cursor-line"></i><span id="+cnt6" class="up">x2</span></p>
                            <p class="line"><span id="nedan5">1000</span>魚</p>
                            <button id="button5" class="text">購入する</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="contents con3">
            <p id="urashop" class="shopname"><i class="ri-tools-line"></i><span>ウ</span>ラショップ<span id="komoji">※小判専用!</span></p>
            <div id="ushop">
                    <div>
                    <img src="./images/うら1.png"id="usagi2"><button id="btn3" class="bbb"><p>ようこそ</p></button>
                    </div>
                    <div class="urabox">
                    <div id="uuushop">
                        <div id="uramono" class="UUU">
                            <p class="txt">缶詰の強化<i class="ri-auction-fill"></i></p>
                            <p class="up"><i class="ri-cursor-line"></i><span id="moto">+0</span> → <span id="kyouka">+?</span></p>
                            <p><span id="unedan1" class="line">5枚</span></p>
                            <button class="text" id="kyoukabutton">強化する</button>
                        </div>
                        <div id="ura2" class="UUU">
                            <p class="txt">キャットフードの強化<i class="ri-auction-fill"></i></p>
                            <p class="up"><i class="ri-cursor-line"></i><span id="moto2">+0</span> → <span id="kyouka2">+?</span></p>
                            <p><span id="unedan2" class="line">10枚</span></p>
                            <button class="text" id="kyoukabutton2">強化する</button>
                        </div>
                        <div id="ura3" class="UUU">
                            <p class="txt">高級缶詰の強化<i class="ri-auction-fill"></i></p>
                            <p class="up"><i class="ri-cursor-line"></i><span id="moto3">+0</span> → <span id="kyouka3">+?</span></p>
                            <p><span id="unedan3" class="line">15枚</span></p>
                            <button class="text" id="kyoukabutton3">強化する</button>
                        </div>
                        <div id="ura4" class="UUU">
                            <p class="txt">オヤツの強化<i class="ri-auction-fill"></i></p>
                            <p class="up"><i class="ri-cursor-line"></i><span id="moto4">+0</span> → <span id="kyouka4">+?</span></p>
                            <p><span id="unedan4" class="line">45枚</span></p>
                            <button class="text" id="kyoukabutton4">強化する</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <a href="#" class="scrollbtn"  id="scrollToggleBtn">
            <img id="slicon" src="./images/うら1.png">
            <i class="ri-arrow-up-circle-fill" id="scrollIcon"></i>
        </a>
        
        <div class="tab" id="kekka">
            <h3>ねこみくじの結果<i class="ri-sticky-note-fill"></i></h3>
            <button class="xbutton" id="kikerubutton" onclick="xbutton(event)"><i class="ri-close-fill"></i></button>
            <span id="gazou"></span>
            <span id="kuji"></span>
            <p id="bangou">0番</p>
        </div>
            
        <div id="ooo">
            <p class="ok" id="o1"><i class="ri-todo-fill"></i>ミッションクリア!</p>
            <p class="ok" id="o2"><i class="ri-star-fill"></i>小判を獲得!</p>
            <p class="ok" id="o3"><i class="ri-shopping-cart-fill"></i>購入完了!</p>
            <p class="ok" id="o4"><i class="ri-error-warning-fill"></i>魚が足りません</p>
            <p class="ok" id="o5"><i class="ri-error-warning-fill"></i>小判が足りません</p>
            <p class="ok" id="o6"><i class="ri-save-fill"></i>保存されました</p>
            <p class="ok" id="o7"><i class="ri-delete-bin-2-fill"></i>削除されました</p>
            <p class="ok" id="o8"><i class="ri-auction-fill"></i>強化完了!</p>
            <p class="ok" id="o9"><i class="ri-lock-unlock-fill"></i>実績解除!</p>
            <p class="ok" id="o10"><i class="ri-error-warning-fill"></i>ポイントが足りません</p>
        </div>
    </body>
</html>
<script>
    // let count = 0;//魚の数✔︎
    //通貨
    let count = BigInt(localStorage.getItem("count") || "0");
    let Lvcount = BigInt(localStorage.getItem("Lvcount") || "0");//レベル（小判）✔︎
    let point = BigInt(localStorage.getItem("point") || "0");
    //クリック
    let coun = BigInt(localStorage.getItem("coun") || "1");
    let coun1s = BigInt(localStorage.getItem("coun1s") || "0");//Item5自動クリック✔︎
    //記録
    let counttt = BigInt(localStorage.getItem("kirokuclick") || "0");//総クリック数　記録✔︎
    let countb = BigInt(localStorage.getItem("kirokunibosi") || "0");//魚を集めた数合計　記録✔︎
    let countnedan = BigInt(localStorage.getItem("kirokucnedan") || "0");//魚を使った数　記録✔︎
    let Icount = BigInt(localStorage.getItem("kirokuIcount") || "0");//商品を買った数　記録✔︎
    let kirokutensei = BigInt(localStorage.getItem("kirokutensei") || "0");//転生した数　記録✔︎
    //ショップ
    let kaukazu = 1n;//ねこショップのものを買う数を決める✖︎
    let get = JSON.parse(localStorage.getItem("get") || "[0,0,0,0,0]");//ねこショップのものを買った数✔︎
    let nedan = JSON.parse(localStorage.getItem("nedan") || "[20,80,150,800,1500]");//ねこショップの値段✔︎
    let counnt = JSON.parse(localStorage.getItem("counnt") || "[2,5,10,50]");//ねこショップのものを買ってクリックが増える数✔︎
    let Inedan = JSON.parse(localStorage.getItem("Inedan") || "[0,800,100,650]");//アイテムショップの値段✔︎
    let unedan = JSON.parse(localStorage.getItem("unedan") || "[5,10,15,45]");//ウラショップの値段✔︎
    let snedan = [50n,450n,200n];
    //ミッション
    let msakana = BigInt(localStorage.getItem("msakana") || "170");
    let mItem = BigInt(localStorage.getItem("mItem") || "10");
    let mmck = BigInt(localStorage.getItem("mmck") || "100");
    let questlvup = JSON.parse(localStorage.getItem("questlvup") || "[1,1,1]");//ミッションでレベルアップする数✔︎
    let mqest1 =["魚を","ショップで商品を","魚を"];
    let questclear1 = false;
    let questclear2 = false;
    let questclear3 = false;
    let flagItm5 = false;
    let clickCount = 0;//catセリフ✖︎
    let clickCount2 = 0;//cat表情✖︎
    let clickCountB = 0;//usagiセリフ✖︎
    let clickCountc = 0;//uranyankoセリフ✖︎
    let itm5timer = null;
    //実績↓
    let jissekiflag01 = false;//魚を10万コ集める
    let jissekiflag02 = false;//魚を1億コ集める
    let jissekiflag03 = false;//魚を1兆コ集める
    let jissekiflag04 = false;//魚を1無量大数コ集める
    let jissekiflag05 = false;//自動クリックを100にする
    let jissekiflag06 = false;//ショップで商品を50コ買う
    let jissekiflag07 = false;//ショップで商品を250コ買う
    let jissekiflag08 = false;//ショップで商品を500コ買う
    //転生/スキル
    let tenseicount = BigInt(localStorage.getItem("tenseicount") || "100000000");
    let kakutokuflag1 = false;
    let kakutokuflag2 = false;
    let kakutokuflag3 = false;
    let skill2Active = false;
    let skill2Timer = null;
    let skill2EffectInterval = null;


    function migrateData() {
        const migrations = {
            nedan: [20, 80, 150, 800, 1500],
            Inedan: [0, 800, 100, 650],
            unedan: [5, 10, 15, 45]
        };

        for (const key in migrations) {
            const def = migrations[key];
            let current = JSON.parse(localStorage.getItem(key) || JSON.stringify(def));

            let changed = false;
            for (let i = 0; i < def.length; i++) {
            if (current[i] === undefined || current[i] < def[i]) {
                current[i] = def[i];
                changed = true;
            }
            }
            if (changed) {
            localStorage.setItem(key, JSON.stringify(current));
            console.log(`${key} を最新に更新しました:`, current);
            }
        }
    }

    //safari
    if (/^((?!chrome|android).)*safari/i.test(navigator.userAgent)) {
        document.body.classList.add('safari');
    }


    //ロード画面
    window.onload = function () {
        migrateData();
        loadcount();
        loadpoint();
        loadtenseicount();
        const spinner = document.getElementById("loading");
        spinner.classList.add("loaded");
        //BigInt変数
        count = BigInt(localStorage.getItem("count") || "0");
        Lvcount = BigInt(localStorage.getItem("Lvcount") || "0");
        coun = BigInt(localStorage.getItem("coun") || "1");
        coun1s = BigInt(localStorage.getItem("coun1s") || "0");
        Icount = BigInt(localStorage.getItem("kirokuIcount") || "0");
        kirokutensei = BigInt(localStorage.getItem("kirokutensei") || "0");
        msakana = BigInt(localStorage.getItem("msakana") || "170");
        mmck = BigInt(localStorage.getItem("mmck") || "100");
        mItem = BigInt(localStorage.getItem("mItem") || "10");
        counttt = BigInt(localStorage.getItem("kirokuclick") || "0");
        // countb = BigInt(localStorage.getItem("kirokunibosi") || "0");
        loadnibosi();
        // countnedan = BigInt(localStorage.getItem("kirokucnedan") || "0");
        loadcnedan();
        point = BigInt(localStorage.getItem("point") || "0");
        tenseicount = BigInt(localStorage.getItem("tenseicount") || "100000000");
        get = JSON.parse(localStorage.getItem("get") || "[0,0,0,0,0]");//ねこショップのものを買った数✔︎
        nedan = JSON.parse(localStorage.getItem("nedan") || "[20,80,150,800,1500]");//ねこショップの値段✔︎
        Inedan = JSON.parse(localStorage.getItem("Inedan") || "[0,800,100,650]");//アイテムショップの値段✔︎
        unedan = JSON.parse(localStorage.getItem("unedan") || "[5,10,15,45]");//ウラショップの値段✔︎
        counnt = JSON.parse(localStorage.getItem("counnt") || "[2,5,10,50]");//ねこショップのものを買ってクリックが増える数✔︎
        questlvup = JSON.parse(localStorage.getItem("questlvup") || "[1,1,1]");
        questclear1 = localStorage.getItem("questclear1") === "true";
        questclear2 = localStorage.getItem("questclear2") === "true";
        questclear3 = localStorage.getItem("questclear3") === "true";
        flagItm5 = localStorage.getItem("flagItm5") === "true";
        document.getElementById('catcc').innerText = `${catcount}`;
        document.getElementById('catgetsakana').innerText = `${catget}`;
        //変換
        get = get.map(v => BigInt(v));
        nedan = nedan.map(v => BigInt(v));
        Inedan = Inedan.map(v => BigInt(v));
        unedan = unedan.map(v => BigInt(v));
        counnt = counnt.map(v => BigInt(v));
        questlvup = questlvup.map(v => BigInt(v));
        oyatustyles();
        shopItemStyles();
        urashopStyles();
        btn5();
        loadcoun();
        Itm5flag();
        questflag();
        resumeItem2Timer();
        loadjflag();
        jissekiclearflag();
        kakutokuyomikomi();
        slill3();
    }

    //データ削除ボタン
    function resetcount() {
      ok7();
      sakujogamen.style.display = 'none';
      localStorage.removeItem('count');
      setAndDisplaycount(0n);
      localStorage.removeItem('point');
      setpoint(0n);
      localStorage.removeItem('tenseicount');
      settenseicount(100000000n);
      document.getElementById('kirokusakana').innerText = `${formatNumberJP(count)}`;
      localStorage.removeItem('Lvcount');
      setAndDisplayLv(0n);
      document.getElementById('kirokuLv').innerText = `${formatNumberJP(Lvcount)}`;
      localStorage.removeItem('coun');
      setAndDisplaycoun(1n);
      localStorage.removeItem('coun1s');
      setcs(0n);
      localStorage.removeItem("flagItm5");
      localStorage.removeItem("tapflag");
      //猫ショップのもの
      localStorage.removeItem('get');
      resetNedan();
      oyatustyles();
      shopItemStyles();
      urashopStyles();
      btn5();
      localStorage.removeItem('userName');
      document.getElementById('output').textContent = '名無しさんの';
      localStorage.removeItem('nedan');
      localStorage.removeItem('Inedan');
      localStorage.removeItem('unedan');
      localStorage.removeItem('counnt');
      localStorage.removeItem('questlvup');
      //記録
      localStorage.removeItem('kirokuclick');
      setclick(0n);
      localStorage.removeItem('kirokunibosi');
      setnibosi(0n);
      localStorage.removeItem('kirokucnedan');
      setcnedan(0n);
      localStorage.removeItem('kirokuIcount');
      setIcount(0n);
      localStorage.removeItem('kirokutensei');
      setktensei(0n);
      resetquestflag();
      localStorage.removeItem("msakana");
      localStorage.removeItem("mItem");
      localStorage.removeItem("mmck");
      localStorage.setItem("itemBuycount", 0);
      localStorage.setItem("itemBuyStartTime", Date.now());
      Item1BuyStatus();
      localStorage.setItem("item2StartTime", Date.now());
      localStorage.removeItem("item2Duration");
      localStorage.removeItem("motonedan");
      localStorage.removeItem("motocoun");
      catcount = 0n;
      catget = 100n;
      document.getElementById('catcount').innerText = '0';
      localStorage.removeItem("catcount");
      document.getElementById('catgetsakana').innerText = '100';
      localStorage.removeItem("catget");
      I2tt.style.opacity = 0;
      document.querySelectorAll('.sale').forEach(el => {
        el.style.opacity = 0;
      });
      timerdisplay.style.display = 'none';
      BUN_EVT2.style.textDecoration = 'none';
      BUN_EVT2.disabled = false;
      BUN_EVT.style.textDecoration = 'none';
      BUN_EVT.disabled = false;
      Item2flag = false;
      deletejflag();
      kakutokusakujo();
      slill3();
      location.reload();
    }
    //フォントを読み込む
    window.addEventListener('DOMContentLoaded', () => {
    const savefont = sessionStorage.getItem('selectfont');
        if (savefont) {
            changeFont(savefont);
        }
    });
    // ページ読み込み時に適用
    window.addEventListener('DOMContentLoaded', () => {
        const savedSize = Number(sessionStorage.getItem('selectsize') || 0);
        if (savedSize !== 0) {
            changeFontSize(0); // 差分で現在サイズを適用
        }
    });

    // ページ読み込み時に表示
    window.addEventListener('DOMContentLoaded', displayName)
    // ページ読み込み時にカウントを表示
    window.addEventListener('DOMContentLoaded', loadcount);
    //デバッグ用：ブラウザコンソールで使える関数
    window.setcount = setAndDisplaycount;
    window.setcoun = setAndDisplaycoun;
    window.setlv = setAndDisplayLv;
    window.set1s = setcs;
    window.setpt = setpoint;
    // ページ読み込み時にcounを表示
    window.addEventListener('DOMContentLoaded', loadcoun);
    window.addEventListener('DOMContentLoaded', loadcs);
    // ページ読み込み時にレベルを表示
    window.addEventListener('DOMContentLoaded', loadLv);
    //記録
    window.addEventListener('DOMContentLoaded', loadclick);
    window.addEventListener('DOMContentLoaded', loadnibosi);
    window.addEventListener('DOMContentLoaded', loadcnedan);
    window.addEventListener('DOMContentLoaded', loadIcount);
    window.addEventListener('DOMContentLoaded', loadkirokutensei);

    //名前を保存
    // 表示用関数
    function displayName() {
      const savedName = localStorage.getItem('userName');
      if (savedName) {
        document.getElementById('output').textContent = `${savedName}さんの`;
      } else {
        document.getElementById('output').textContent = '名無しさんの';
      }
    }
    // 名前保存ボタンの関数
    function saveName() {
      ok6();
      const name = document.getElementById('inputName').value;
      localStorage.setItem('userName', name);
      displayName();
    }
    // 名前削除ボタンの関数
    function clearName() {
      ok7();
      localStorage.removeItem('userName');
      document.getElementById('output').textContent = '名無しさんの';
    }

    // count を保存しつつ表示を更新する共通関数
    function setAndDisplaycount(newcount) {
      count = newcount;
      localStorage.setItem('count', count.toString());
      document.getElementById('counter').textContent = formatNumberJP(count);
    }

    function loadcount() {
      const saved = localStorage.getItem('count');
      const initial = saved ? BigInt(saved) : 0n;
      setAndDisplaycount(initial);
    }

    //coun
    function setAndDisplaycoun(newcoun) {
        coun = newcoun;
        localStorage.setItem('coun', coun.toString());
        document.getElementById('coun').textContent = "+"+formatNumberJP(coun);
    }
    function loadcoun() {
        const savedcoun = localStorage.getItem('coun');
        const initialcoun = savedcoun ? BigInt(savedcoun) : 1n;
        setAndDisplaycoun(initialcoun);
    }

    //レベル
    function setAndDisplayLv(newLv) {
        Lvcount = newLv;
        localStorage.setItem('Lvcount', Lvcount.toString());
        document.getElementById('inputLv').textContent = Lvcount;
    }
    function loadLv() {
        const savedLv = localStorage.getItem('Lvcount');
        const initialLv = savedLv ? BigInt(savedLv) : 0n;
        setAndDisplayLv(initialLv);
    }

    //coun1s
    function setcs(newcs) {
        coun1s = newcs;
        localStorage.setItem("coun1s", coun1s.toString());
        document.getElementById('coun1s').textContent = '毎秒+' + coun1s;
    }
    function loadcs() {
        const savedcs = localStorage.getItem('coun1s');
        const initialcs = savedcs ? BigInt(savedcs) : 0n;
        setcs(initialcs);
    }

    //ねこショップ
    //削除するときの関数(nedan)
    function resetNedan() {
        let nedan = [20, 80, 150, 800, 1500];
        document.getElementById('nedan').textContent = formatNumberJP(nedan[0]); // 表示更新
        document.getElementById('nedan2').innerText = formatNumberJP(nedan[1]); // 表示更新
        document.getElementById('nedan3').innerText = formatNumberJP(nedan[2]); // 表示更新
        document.getElementById('nedan4').innerText = formatNumberJP(nedan[3]); // 表示更新
        document.getElementById('nedan5').innerText = formatNumberJP(nedan[4]); // 表示更新
    }

    //記録
    //総クリック数counttt
    function setclick(newclick) {
        counttt = newclick;
        // localStorage.setItem('kirokuclick', counttt);
        localStorage.setItem('kirokuclick', counttt.toString());
        document.getElementById('kirokuclick').innerText = `${formatNumberJP(counttt)}`;
    }
    function loadclick() {
        const savedclick = localStorage.getItem('kirokuclick');
        const initialclick = savedclick ? BigInt(savedclick) : 0n;
        setclick(initialclick);
    }
    // クリック数を1増やす関数
    function clickplus() {
        setclick(counttt + 1n);
    }
    //魚を集めた数（合計）countb
    function setnibosi(getnibosi) {
        countb = getnibosi;
        localStorage.setItem('kirokunibosi', countb.toString());
        document.getElementById('kirokusakanas').innerText = `${formatNumberJP(countb)}`;
    }
    function loadnibosi() {
        const savednibosi = localStorage.getItem('kirokunibosi');
        const initialnibosi = savednibosi ? BigInt(savednibosi) : 0n;
        setnibosi(initialnibosi);
    }
    //魚を使った数countnedan
    function setcnedan(getcnedan) {
        countnedan = getcnedan;
        localStorage.setItem('kirokucnedan', countnedan.toString());
        document.getElementById('kirokusakanasiyou').innerText = `${formatNumberJP(countnedan)}`;
    }
    function loadcnedan() {
        const savedcnedan = localStorage.getItem('kirokucnedan');
        const initialcnedan = savedcnedan ? BigInt(savedcnedan) : 0n;
        setcnedan(initialcnedan);
    }
    //商品を買った数Icount
    function setIcount(getIcount) {
        Icount = getIcount;
        localStorage.setItem('kirokuIcount', Icount.toString());
        document.getElementById('kirokumono').innerText = `${formatNumberJP(Icount)}`;
    }
    function loadIcount() {
        const savedIcount = localStorage.getItem('kirokuIcount');
        const initialIcount = savedIcount ? BigInt(savedIcount) : 0n;
        setIcount(initialIcount);
    }
    //転生した数
    function setktensei(kirokutensei) {
        localStorage.setItem('kirokutensei', kirokutensei.toString());
        document.getElementById('kirokutensei').innerText = `${formatNumberJP(kirokutensei)}`;
    }
    function loadkirokutensei() {
        const savedkirokutensei = localStorage.getItem('kirokutensei');
        const initialkirokutensei = savedkirokutensei ? BigInt(savedkirokutensei) : 0n;
        setktensei(initialkirokutensei);
    }

    function setpoint(point) {
      localStorage.setItem('point', point.toString());
      document.getElementById('point').textContent = formatNumberJP(point);
    }

    function loadpoint() {
      const savepoint = localStorage.getItem('point');
      const hyoujip = savepoint ? BigInt(savepoint) : 0n;
      setpoint(hyoujip);
    }

    function settenseicount(tenseicount) {
      localStorage.setItem('tenseicount', tenseicount.toString());
      document.getElementById('tenseicount').textContent = formatNumberJP(tenseicount);
    }

    function loadtenseicount() {
      const savetenseicount = localStorage.getItem('tenseicount');
      const ticount = savetenseicount ? BigInt(savetenseicount) : 100000000n;
      settenseicount(ticount);
    }

    //スクロールボタン
    document.addEventListener('DOMContentLoaded', function () {
        const scrollBtn = document.getElementById('scrollToggleBtn');
        const scrollIcon = document.getElementById('scrollIcon');
        const slicon = document.getElementById('slicon');

        let goDown = true;

        scrollBtn.addEventListener('click', function (e) {
        e.preventDefault();
        if (goDown) {
            window.scrollTo({
                top: document.documentElement.scrollHeight,
                behavior: 'smooth'
            });
        } else {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }
        });

        window.addEventListener('scroll', function () {
        if (window.scrollY < window.innerHeight / 2) {
            goDown = true;
            scrollIcon.classList.remove('rotate-up');
            scrollIcon.classList.add('rotate-down');
            document.getElementById('slicon').src='./images/うら1.png';
        } else {
            goDown = false;
            scrollIcon.classList.remove('rotate-down');
            scrollIcon.classList.add('rotate-up');
            document.getElementById('slicon').src='./images/usagi1.png';
        }
        });

        // 初期状態を反映
        window.dispatchEvent(new Event('scroll'));
    });

    o1.style.display = 'none';
    o2.style.display = 'none';
    o3.style.display = 'none';
    o4.style.display = 'none';
    o5.style.display = 'none';
    o6.style.display = 'none';
    o7.style.display = 'none';
    o8.style.display = 'none';
    o9.style.display = 'none';
    o10.style.display = 'none';

    function ok1() {//ミッションクリア
        // 新しいpを作る
        const msg = document.createElement('p');
        msg.innerHTML = '<i class="ri-todo-fill"></i>ミッションクリア!';
        msg.style.zIndex = 1000;
        msg.classList.add('ok','o1-style');
        document.body.appendChild(msg);
        setTimeout(() => {
            msg.remove();
        }, 900);
    }
    function ok2() {//レベルアップ
        // 新しいpを作る
        const msg = document.createElement('p');
        msg.innerHTML = '<i class="ri-star-fill"></i>小判獲得!';
        msg.style.zIndex = 1000;
        msg.classList.add('ok','o2-style');
        document.body.appendChild(msg);
        setTimeout(() => {
            msg.remove();
        }, 900);
    }
    function ok3() {//購入完了
        // 新しいpを作る
        const msg = document.createElement('p');
        msg.innerHTML = '<i class="ri-shopping-cart-fill"></i>購入完了!';
        msg.style.zIndex = 1000;
        msg.classList.add('ok','o3-style');
        document.body.appendChild(msg);
        setTimeout(() => {
            msg.remove();
        }, 900);
    }
    function ok4() {//購入失敗したとき（魚）
        // 新しいpを作る
        const msg = document.createElement('p');
        msg.innerHTML = '<i class="ri-error-warning-fill"></i>魚が足りません';
        msg.style.zIndex = 1000;
        msg.classList.add('ok');
        document.body.appendChild(msg);
        setTimeout(() => {
            msg.remove();
        }, 900);
    }
    function ok5() {//購入失敗したとき（レベル）
        // 新しいpを作る
        const msg = document.createElement('p');
        msg.innerHTML = '<i class="ri-error-warning-fill"></i>小判が足りません';
        msg.style.zIndex = 1000;
        msg.classList.add('ok');
        document.body.appendChild(msg);
        setTimeout(() => {
            msg.remove();
        }, 900);
    }
    function ok6() {//保存されたとき
        // 新しいpを作る
        const msg = document.createElement('p');
        msg.innerHTML = '<i class="ri-save-fill"></i>保存されました';
        msg.style.zIndex = 1000;
        msg.classList.add('ok');
        document.body.appendChild(msg);
        setTimeout(() => {
            msg.remove();
        }, 900);
    }
    function ok7() {//削除されたとき
        // 新しいpを作る
        const msg = document.createElement('p');
        msg.innerHTML = '<i class="ri-delete-bin-2-fill"></i>削除されました';
        msg.style.zIndex = 1000;
        msg.classList.add('ok');
        document.body.appendChild(msg);
        setTimeout(() => {
            msg.remove();
        }, 900);
    }
    function ok8() {//強化完了したとき
        // 新しいpを作る
        const msg = document.createElement('p');
        msg.innerHTML = '<i class="ri-auction-fill"></i>強化完了!';
        msg.style.zIndex = 1000;
        msg.classList.add('ok','o3-style');
        document.body.appendChild(msg);
        setTimeout(() => {
            msg.remove();
        }, 900);
    }
    function ok9() {//強化完了したとき
        // 新しいpを作る
        const msg = document.createElement('p');
        msg.innerHTML = '<i class="ri-lock-unlock-fill"></i>実績解除!';
        msg.style.zIndex = 1000;
        msg.classList.add('ok','o9-style');
        document.body.appendChild(msg);
        setTimeout(() => {
            msg.remove();
        }, 900);
    }
    function ok10() {//購入失敗したとき（ポイント）
        // 新しいpを作る
        const msg = document.createElement('p');
        msg.innerHTML = '<i class="ri-error-warning-fill"></i>ポイントが足りません';
        msg.style.zIndex = 1000;
        msg.classList.add('ok');
        document.body.appendChild(msg);
        setTimeout(() => {
            msg.remove();
        }, 900);
    }


    //クリック
    const clickicon = document.getElementById("clickicon");
    const tapicon = document.getElementById("tapicon");
    upsakana.style.display = 'none';
    tapicon.style.display = 'block';
    clickicon.style.display = 'none';
    const hit = (event) =>
    {
        // const audio = new Audio('./音/決定ボタンを押す45.mp3');
        const audio = new Audio('./音/水滴1.mp3');
        audio.volume = slider_volume.value;
        audio.play();          
        // uposakana(event.clientX, event.clientY);
        const x = event.clientX;
        const y = event.clientY;

        uposakana(x, y);
        tapicon.style.display = 'none';
        //カウント（魚）を増やす
        // count = BigInt(localStorage.getItem("count") || "0");
        count += coun;
        localStorage.setItem("count", count.toString());
        setnibosi(countb+=coun);
        clickplus();
        clearcheck();
        jissekiclearflag();
        hutougou();
        document.getElementById('counter').textContent = formatNumberJP(count);
        koukansakana.textContent = formatNumberJP(count);
        // localStorage.setItem('count', count);
        oyatustyles();
        shopItemStyles();
        urashopStyles();
        document.getElementById('imacount').innerText = `${formatNumberJP(count)}`;
        // msakana = Number(localStorage.getItem("msakana") || 170);
        //スキル
        if(kakutokuflag1 == true){
            var random = Math.floor(Math.random()*20);
            if(random == 1){
                showSkillCircles(x, y);// エフェクト
                const irandom = BigInt(Math.floor(Math.random() * 10) + 11);
                count += coun * irandom;
                // for(let i=0;i<irandom;i++){
                //     count += coun;
                // }
                const audio = new Audio('./音/決定ボタンを押す46.mp3');
                audio.volume = slider_volume.value;
                audio.play();
                console.log("スキル1実行"+"クリック*"+irandom+"倍");
            }
        }
        if (kakutokuflag2 === true && !skill2Active) {
            const random = Math.floor(Math.random() * 50);
            if (random === 1) {
                const audio = new Audio('./音/決定ボタンを押す46.mp3');
                audio.volume = slider_volume.value;
                audio.play();
                console.log("スキル2実行");
                skill2Active = true;
                const originalCoun = coun;
                coun = coun * 10n;
                console.log(formatNumberJP(coun));

                skill2EffectInterval = setInterval(() => {
                    spawnSkill2Circles(event.clientX, event.clientY);//エフェクト
                }, 300);
                //元に戻す
                skill2Timer = setTimeout(() => {
                    coun = originalCoun;
                    skill2Active = false;
                    clearInterval(skill2EffectInterval);
                    skill2EffectInterval = null;
                    console.log("スキル2終了");
                }, 10000);
            }
        }

        //ミッション
        if(count >= msakana){
            msakana *= 2n;
            // console.log(msakana);
            Lvcount += questlvup[0];
            questlvup[0] += 1n;
            // localStorage.setItem("msakana", msakana);
            localStorage.setItem("msakana", msakana.toString());
            mq12.textContent = mqest1[0]+formatNumberJP(msakana)+"コ集める 小判+"+questlvup[0];
            localStorage.setItem("questlvup",JSON.stringify(questlvup.map(v => v.toString())));
            ok1();
            lvup();
        }
        if(counttt == mmck){
            mmck += 200n;
            Lvcount += questlvup[2];
            questlvup[2] += 1n;
            localStorage.setItem("mmck", mmck.toString());
            mq32.textContent = mqest1[2]+formatNumberJP(mmck)+"回クリックする 小判+"+questlvup[2];
            localStorage.setItem("questlvup",JSON.stringify(questlvup.map(v => v.toString())));
            ok1();
            lvup();
        }

        //記録
        document.getElementById('kirokuLv').innerText = `${formatNumberJP(Lvcount)}`;
        document.getElementById('kirokuclick').innerText = `${formatNumberJP(counttt)}`;
        document.getElementById('kirokusakana').innerText = `${formatNumberJP(count)}`;
        document.getElementById('kirokusakanas').innerText = `${formatNumberJP(countb)}`;
        document.getElementById('kirokusakanasiyou').innerText = `${formatNumberJP(countnedan)}`;
        document.getElementById('kirokumono').innerText = `${formatNumberJP(Icount)}`;
    }

    function uposakana(x,y) {//upsakana
        // 新しいpを作る
        const osakana = document.createElement('p');
        osakana.id = 'upsakana';
        osakana.textContent = `+${formatNumberJP(coun)}`;
        osakana.style.zIndex = 1000;
        osakana.classList.add('upsakana');
        // クリック位置に配置
        osakana.style.position = 'absolute';
        osakana.style.left = `${x}px`;
        osakana.style.top = `${y}px`;

        document.body.appendChild(osakana);
        setTimeout(() => {
            osakana.remove();
        }, 300);
    }
    //スキルエフェクト
    function showSkillCircles(x, y) {
        const count = Math.floor(Math.random() * 6) + 5; // 5〜10個

        for (let i = 0; i < count; i++) {
            const circle = document.createElement('div');
            circle.className = 'skill-circle';

            // 少しランダムに散らす
            const offsetX = (Math.random() - 0.5) * 120;
            const offsetY = (Math.random() - 0.5) * 120;

            circle.style.left = `${x + offsetX}px`;
            circle.style.top = `${y + offsetY}px`;

            document.body.appendChild(circle);

            // 消す
            setTimeout(() => {
                circle.remove();
            }, 600);
        }
    }
    function spawnSkill2Circles(x, y) {
        const num = Math.floor(Math.random() * 4) + 3; // 3〜6個

        for (let i = 0; i < num; i++) {
            const c = document.createElement('div');
            c.className = 'skill2-circle';

            const size = Math.random() * 20 + 10;
            c.style.width = `${size}px`;
            c.style.height = `${size}px`;

            const offsetX = (Math.random() - 0.5) * 140;
            const offsetY = (Math.random() - 0.5) * 140;

            c.style.left = `${x + offsetX}px`;
            c.style.top = `${y + offsetY}px`;

            document.body.appendChild(c);

            setTimeout(() => {
                c.remove();
            }, 800);
        }
    }



    //単位
    function formatNumberJP(n) {
        n = BigInt(n);

        // n は BigInt 前提
        const units = [
            "", "万", "億", "兆", "京", "垓", "秭", "穣", "溝", "澗",
            "正", "載", "極", "恒河沙", "阿僧祇", "那由他", "不可思議",
            "無量大数"
        ];

        const BASE = 10000n;

        if (n < BASE) return n.toString();// 1万未満はそのまま表示

        let unitIndex = 0;
        let value = n;

        while (value >= BASE && unitIndex < units.length - 1) {
            value /= BASE;
            unitIndex++;
        }

        let divisor = BASE ** BigInt(unitIndex);

        // 単位内の値
        let intPart = n / divisor;                 // 整数部
        let decimalRaw = (n * 100n) / divisor;     // 小数2桁を作るため ×100
        let decimalPart = decimalRaw % 100n;       // 小数点以下2桁

        let decimalStr = decimalPart.toString().padStart(2, "0");

        return `${intPart}.${decimalStr}${units[unitIndex]}`;
    }


    //自動クリック
    function Itm5flag(){
        if (flagItm5 === true && itm5timer === null) {
            clickicon.style.display = 'block';
            itm5timer = setInterval(() => {
                count += coun1s;
                setnibosi(countb+=coun1s);
                document.getElementById('counter').textContent = formatNumberJP(count);
                koukansakana.textContent = formatNumberJP(count);
                localStorage.setItem("count", count.toString());
                document.getElementById('imacount').innerText = `${formatNumberJP(count)}`;
                oyatustyles();
                shopItemStyles();
                clearcheck();
                jissekiclearflag();
                //ミッション
                if(count>=msakana){
                    msakana *= 2n;
                    // console.log(msakana);
                    Lvcount+=questlvup[0];
                    questlvup[0] += 1n;
                    localStorage.setItem("msakana", msakana.toString());
                    mq12.textContent = mqest1[0]+formatNumberJP(msakana)+"コ集める 小判+"+questlvup[0];
                    localStorage.setItem("questlvup",JSON.stringify(questlvup.map(v => v.toString())));
                    ok1();
                    lvup();
                }
                hutougou();
            }, 1000);
        }
    }

    //ミッション
    function clearcheck() {
        document.getElementById('ato12').innerText = `　${formatNumberJP(count)}/${formatNumberJP(msakana)}`;
        document.getElementById('ato22').innerText = `　${formatNumberJP(Icount)}/${formatNumberJP(mItem)}`;
        document.getElementById('ato32').innerText = `　${formatNumberJP(counttt)}/${formatNumberJP(mmck)}`;
        document.getElementById('ato42').innerText = `　${formatNumberJP(count)}/${formatNumberJP(1000n)}`;
        document.getElementById('ato52').innerText = `　${formatNumberJP(count)}/${formatNumberJP(10000n)}`;
        document.getElementById('ato62').innerText = `　${formatNumberJP(count)}/${formatNumberJP(100000n)}`;
    }

    function hutougou(){
        if(count >= 1000 && !questclear1){
            Lvcount += 10n;
            questclear1 = true;
            localStorage.setItem("questclear1", "true");
            mq42.style.textDecoration = 'line-through'; // ← 追加！
            mq42.style.opacity = '0.6'; // 少し薄く
            ato42.style.display = 'none';
            ok1();
            lvup();
        }
        if(count >= 10000 && !questclear2){
            Lvcount += 30n;
            questclear2 = true;
            localStorage.setItem("questclear2", "true");
            mq52.style.textDecoration = 'line-through'; // ← 追加！
            mq52.style.opacity = '0.6'; // 少し薄く
            ato52.style.display = 'none';
            ok1();
            lvup();
        }
        if(count >= 100000 && !questclear3){
            Lvcount += 50n;
            questclear3 = true;
            localStorage.setItem("questclear3", "true");
            mq62.style.textDecoration = 'line-through'; // ← 追加！
            mq62.style.opacity = '0.6'; // 少し薄く
            ato62.style.display = 'none';
            ok1();
            lvup();
        }
    }

    function questflag(){
        if(questclear1==true){
            mq42.style.textDecoration = 'line-through'; // ← 追加！
            mq42.style.opacity = '0.6'; // 少し薄く
            ato42.style.display = 'none';
        }
        if(questclear2==true){
            mq52.style.textDecoration = 'line-through'; // ← 追加！
            mq52.style.opacity = '0.6'; // 少し薄く
            ato52.style.display = 'none';
        }
        if(questclear3==true){
            mq62.style.textDecoration = 'line-through'; // ← 追加！
            mq62.style.opacity = '0.6'; // 少し薄く
            ato62.style.display = 'none';
        }
    }

    function resetquestflag() {
      // フラグを false にする
      questclear1 = false;
      questclear2 = false;
      questclear3 = false;
      // ローカルストレージも更新
      localStorage.setItem("questclear1", "false");
      localStorage.setItem("questclear2", "false");
      localStorage.setItem("questclear3", "false");
      //スタイル
      mq42.textContent = '魚を1000コ以上集める 小判+10';
      mq42.style.textDecoration = 'none';
      mq42.style.opacity = '1';
      ato42.style.display = 'block';
      mq52.textContent = '魚を1万コ以上集める 小判+30';
      mq52.style.textDecoration = 'none';
      mq52.style.opacity = '1';
      ato52.style.display = 'block';
      mq62.textContent = '魚を10万コ以上集める 小判+50';
      mq62.style.textDecoration = 'none';
      mq62.style.opacity = '1';
      ato62.style.display = 'block';
    }


    //実績
    function jissekiclearflag() {
        if(count >= 100000n && !jissekiflag01){
            ok9();
            console.log("実績を達成")
            jissekiflag01 = true;//魚を10万コ集める
            localStorage.setItem("jissekiflag01", jissekiflag01);
            clear01.style.opacity = '1';
        }
        if(count >= 100000000n && !jissekiflag02){
            ok9();
            console.log("実績を達成")
            jissekiflag02 = true;//魚を1億コ集める
            localStorage.setItem("jissekiflag02", jissekiflag02);
            clear02.style.opacity = '1';
        }
        if(count >= 1000000000000n && !jissekiflag03){
            ok9();
            console.log("実績を達成")
            jissekiflag03 = true;//魚を1兆コ集める
            localStorage.setItem("jissekiflag03", jissekiflag03);
            clear03.style.opacity = '1';
        }
        if(count >= 100000000000000000000000000000000000000000000000000000000000000000000n && !jissekiflag04){
            ok9();
            console.log("実績を達成")
            jissekiflag04 = true;//魚を1無量大数コ集める
            localStorage.setItem("jissekiflag04", jissekiflag04);
            clear04.style.opacity = '1';
        }
        if(coun1s >= 100n && !jissekiflag05){
            ok9();
            console.log("実績を達成")
            jissekiflag05 = true;//自動クリックを100にする
            localStorage.setItem("jissekiflag05", jissekiflag05);
            clear05.style.opacity = '1';
        }
        if(Icount >= 50n && !jissekiflag06){
            ok9();
            console.log("実績を達成")
            jissekiflag06 = true;//ショップで商品を50コ買う
            localStorage.setItem("jissekiflag06", jissekiflag06);
            clear06.style.opacity = '1';
        }
        if(Icount >= 250n && !jissekiflag07){
            ok9();
            console.log("実績を達成")
            jissekiflag07 = true;//ショップで商品を250コ買う
            localStorage.setItem("jissekiflag07", jissekiflag07);
            clear06.style.opacity = '1';
        }
        if(Icount >= 500n && !jissekiflag08){
            ok9();
            console.log("実績を達成")
            jissekiflag08 = true;//ショップで商品を500コ買う
            localStorage.setItem("jissekiflag08", jissekiflag08);
            clear06.style.opacity = '1';
        }
        jissekiclearopacity();
    }
    //読み込み/削除
    function loadjflag() {
        jissekiflag01 = localStorage.getItem("jissekiflag01") === "true";
        jissekiflag02 = localStorage.getItem("jissekiflag02") === "true";
        jissekiflag03 = localStorage.getItem("jissekiflag03") === "true";
        jissekiflag04 = localStorage.getItem("jissekiflag04") === "true";
        jissekiflag05 = localStorage.getItem("jissekiflag05") === "true";
        jissekiflag06 = localStorage.getItem("jissekiflag06") === "true";
        jissekiflag07 = localStorage.getItem("jissekiflag07") === "true";
        jissekiflag08 = localStorage.getItem("jissekiflag08") === "true";
        jissekiclearopacity();
    }
    function deletejflag() {
        localStorage.removeItem("jissekiflag01");
        localStorage.removeItem("jissekiflag02");
        localStorage.removeItem("jissekiflag03");
        localStorage.removeItem("jissekiflag04");
        localStorage.removeItem("jissekiflag05");
        localStorage.removeItem("jissekiflag06");
        localStorage.removeItem("jissekiflag07");
        localStorage.removeItem("jissekiflag08");

        // ローカルの変数もリセット
        jissekiflag01 = false;
        jissekiflag02 = false;
        jissekiflag03 = false;
        jissekiflag04 = false;
        jissekiflag05 = false;
        jissekiflag06 = false;
        jissekiflag07 = false;
        jissekiflag08 = false;
    }

    function jissekiclearopacity(){
        if(jissekiflag01 == true){
            clear01.style.opacity = '1';
        }
        if(jissekiflag02 == true){
            clear02.style.opacity = '1';
        }
        if(jissekiflag03 == true){
            clear03.style.opacity = '1';
        }
        if(jissekiflag04 == true){
            clear04.style.opacity = '1';
        }
        if(jissekiflag05 == true){
            clear05.style.opacity = '1';
        }
        if(jissekiflag06 == true){
            clear06.style.opacity = '1';
        }
        if(jissekiflag07 == true){
            clear07.style.opacity = '1';
        }
        if(jissekiflag08 == true){
            clear08.style.opacity = '1';
        }
    }

    function kakutokuyomikomi() {
        kakutokuflag1 = localStorage.getItem("kakutokuflag1") === "true";
        kakutokuflag2 = localStorage.getItem("kakutokuflag2") === "true";
        kakutokuflag3 = localStorage.getItem("kakutokuflag3") === "true";
        kakutokuopacity();
    }
    function kakutokusakujo() {
        localStorage.removeItem("kakutokuflag1");
        localStorage.removeItem("kakutokuflag2");
        localStorage.removeItem("kakutokuflag3");

        // ローカルの変数もリセット
        kakutokuflag1 = false;
        kakutokuflag2 = false;
        kakutokuflag3 = false;
    }
    const SKILLBUTTON = document.getElementById('skillbtn1');
    const SKILLBUTTON2 = document.getElementById('skillbtn2');
    const SKILLBUTTON3 = document.getElementById('skillbtn3');
    const kakutoku1 = document.getElementById('kakutoku1');
    const kakutoku2 = document.getElementById('kakutoku2');
    const kakutoku3 = document.getElementById('kakutoku3');

    function kakutokuopacity() {
        if(kakutokuflag1 == true){
            kakutoku1.style.opacity = 1;
            SKILLBUTTON.disabled = true;
            SKILLBUTTON.style.textDecoration = 'line-through';
            SKILLBUTTON.style.textDecorationColor = 'red';
            SKILLBUTTON.style.textDecorationThickness = '3px';
        }
        if(kakutokuflag2 == true){
            kakutoku2.style.opacity = 1;
            SKILLBUTTON2.disabled = true;
            SKILLBUTTON2.style.textDecoration = 'line-through';
            SKILLBUTTON2.style.textDecorationColor = 'red';
            SKILLBUTTON2.style.textDecorationThickness = '3px';
        }
        if(kakutokuflag3 == true){
            kakutoku3.style.opacity = 1;
            SKILLBUTTON3.disabled = true;
            SKILLBUTTON3.style.textDecoration = 'line-through';
            SKILLBUTTON3.style.textDecorationColor = 'red';
            SKILLBUTTON3.style.textDecorationThickness = '3px';
        }
    }

    function kyoukahyouji(){
        counnt = counnt.map(v => BigInt(v));
        document.getElementById('kyouka').innerText = `+${counnt[0]+5n}`;
        document.getElementById('kyouka2').innerText = `+${counnt[1]+5n}`;
        document.getElementById('kyouka3').innerText = `+${counnt[2]+5n}`;
        document.getElementById('kyouka4').innerText = `+${counnt[3]+5n}`;
    }


    document.getElementById('counter').textContent = formatNumberJP(count);
    document.getElementById('coun').innerText = `+${formatNumberJP(coun)}`;
    document.getElementById('coun1s').innerText = `毎秒+${coun1s}`;
    document.getElementById('inputLv').innerText = `${Lvcount}`;

    //ねこショップのゲット数
    document.getElementById('get').innerText = `所持数　×${get[0]}`;
    document.getElementById('get2').innerText = `所持数　×${get[1]}`;
    document.getElementById('get3').innerText = `所持数　×${get[2]}`;
    document.getElementById('get4').innerText = `所持数　×${get[3]}`;
    document.getElementById('get5').innerText = `所持数　×${get[4]}`;
    //値段
    document.getElementById('nedan').textContent = formatNumberJP(nedan[0]);
    document.getElementById('nedan2').innerText = formatNumberJP(nedan[1]);
    document.getElementById('nedan3').innerText = formatNumberJP(nedan[2]);
    document.getElementById('nedan4').innerText = formatNumberJP(nedan[3]);
    document.getElementById('nedan5').innerText = formatNumberJP(nedan[4]);
    document.getElementById('+cnt2').innerText = `+${counnt[0]}`;
    document.getElementById('+cnt3').innerText = `+${counnt[1]}`;
    document.getElementById('+cnt4').innerText = `+${counnt[2]}`;
    document.getElementById('+cnt5').innerText = `+${counnt[3]}`;
    //アイテムの値段
    document.getElementById('Inedan').textContent = formatNumberJP(Inedan[0]);
    document.getElementById('Inedan2').textContent = formatNumberJP(Inedan[1]);
    // document.getElementById('Inedan3').innerText = `${Inedan[2]}魚`;
    document.getElementById('Inedan4').textContent = formatNumberJP(Inedan[2]);
    document.getElementById('Inedan5').textContent = formatNumberJP(Inedan[3]);
    document.getElementById('inputLv').innerText = `${Lvcount}`;
    //ウラショップ
    document.getElementById('moto').innerText = `+${counnt[0]}`;
    document.getElementById('moto2').innerText = `+${counnt[1]}`;
    document.getElementById('moto3').innerText = `+${counnt[2]}`;
    document.getElementById('moto4').innerText = `+${counnt[3]}`;
    kyoukahyouji();
    //スキル
    document.getElementById('imacount').innerText = `${formatNumberJP(count)}`;
    document.getElementById('tenseicount').innerText = `${formatNumberJP(tenseicount)}`;
    document.getElementById('snedan1').textContent = formatNumberJP(snedan[0]);
    document.getElementById('snedan2').textContent = formatNumberJP(snedan[1]);
    document.getElementById('snedan3').textContent = formatNumberJP(snedan[2]);

    //強化の値段
    document.getElementById('unedan1').innerText = `${unedan[0]}枚`;
    document.getElementById('unedan2').innerText = `${unedan[1]}枚`;
    document.getElementById('unedan3').innerText = `${unedan[2]}枚`;
    document.getElementById('unedan4').innerText = `${unedan[3]}枚`;

    //ミッション
    document.getElementById('ato12').innerText = `　${formatNumberJP(count)}/${formatNumberJP(msakana)}`;
    document.getElementById('ato22').innerText = `　${formatNumberJP(Icount)}/${formatNumberJP(mItem)}`;
    document.getElementById('ato32').innerText = `　${formatNumberJP(counttt)}/${formatNumberJP(mmck)}`;
    document.getElementById('ato42').innerText = `　${formatNumberJP(count)}/${formatNumberJP(1000n)}`;
    document.getElementById('ato52').innerText = `　${formatNumberJP(count)}/${formatNumberJP(10000n)}`;
    document.getElementById('ato62').innerText = `　${formatNumberJP(count)}/${formatNumberJP(100000n)}`;

    //実績
    const clear01 = document.getElementById("clear01");
    const clear02 = document.getElementById("clear02");
    const clear03 = document.getElementById("clear03");
    const clear04 = document.getElementById("clear04");
    const clear05 = document.getElementById("clear05");
    const clear06 = document.getElementById("clear06");
    const clear07 = document.getElementById("clear07");
    const clear08 = document.getElementById("clear08");


    function lvup(){     
        const audio = new Audio('./音/決定ボタンを押す12.mp3');
        audio.volume = slider_volume.value;
        audio.play();
        // alert("レベルアップ! Lv."+Lvcount+"になったよ");
        ok2();
        urashopStyles();
        console.log("小判を獲得");
        localStorage.setItem('Lvcount', Lvcount.toString());
        document.getElementById('inputLv').textContent = Lvcount;
        koukankoban.textContent = formatNumberJP(Lvcount);
    }  
    
    //ものを買うミッション
    function mmI(){
        document.getElementById('ato22').innerText = `　${formatNumberJP(Icount)}/${formatNumberJP(mItem)}`;
        if(Icount >= mItem){
            mItem *= 2n;
            Lvcount += questlvup[1];
            mq22.textContent = mqest1[1]+formatNumberJP(mItem)+"コ買う 小判+"+questlvup[1];
            document.getElementById('ato22').innerText = `　${formatNumberJP(Icount)}/${formatNumberJP(mItem)}`;
            questlvup[1] += 1n;
            localStorage.setItem("mItem", mItem.toString());
            // localStorage.setItem("questlvup", JSON.stringify(questlvup));
            localStorage.setItem("questlvup",JSON.stringify(questlvup.map(v => v.toString())));
            ok1();
            lvup();
        }
    }

    function oyatustyles() {
        const targets = [
            {
                name: '缶詰',
                elementId: 'oyatuu',
                nedanId: 'nedan',
                basePrice: () => nedan[0],
                index: 0
            },
            {
                name: 'キャットフード',
                elementId: 'oyatutu',
                nedanId: 'nedan2',
                basePrice: () => nedan[1],
                index: 1
            },
            {
                name: '高級缶詰',
                elementId: 'oyatu3',
                nedanId: 'nedan3',
                basePrice: () => nedan[2],
                index: 2
            },
            {
                name: 'オヤツ',
                elementId: 'oyatu4',
                nedanId: 'nedan4',
                basePrice: () => nedan[3],
                index: 3
            },
            {
                name: 'ケーキ',
                elementId: 'oyatu5',
                nedanId: 'nedan5',
                basePrice: () => nedan[4],
                index: 4
            }
        ];
        targets.forEach(target => {
            let total = 0n;
            let price = target.basePrice();//20,80,150,800,1500
            for (let i = 0n; i < kaukazu; i++) {
                total += price;
                price *= 2n;
            }

            // アイテム要素の取得
            const el = document.getElementById(target.elementId);
            if (!el) return;

            // 金額を画面に表示（例：nedan, nedan2, nedan3）
            const priceDisplay = document.getElementById(target.nedanId);
            if (priceDisplay) {
            priceDisplay.textContent = formatNumberJP(total);
            }
            if (count < total) {
            el.style.opacity = '0.6';  // 半透明に
            } else {
            el.style.opacity = '1';    // 元に戻す
            }
        });
    }

    document.getElementById('kau').innerText = `${kaukazu}`;
    const KAUPBUTTON = document.getElementById('plus');
    KAUPBUTTON.addEventListener('click', () => {
        kaukazu++;
        document.getElementById('kau').innerText = `${kaukazu}`;
        updateTotalPriceDisplay();
        updateTotalPriceDisplay2();
        updateTotalPriceDisplay3();
        updateTotalPriceDisplay4();
        updateTotalPriceDisplay5();
        oyatustyles();
    });
    //プラス10
    const KAUP10BUTTON = document.getElementById('plus10');
    KAUP10BUTTON.addEventListener('click', () => {
        kaukazu += 10n;
        document.getElementById('kau').innerText = `${kaukazu}`;
        updateTotalPriceDisplay();
        updateTotalPriceDisplay2();
        updateTotalPriceDisplay3();
        updateTotalPriceDisplay4();
        updateTotalPriceDisplay5();
        oyatustyles();
    });

    const KAUMBUTTON = document.getElementById('minus');
    KAUMBUTTON.addEventListener('click', () => {
        if(kaukazu >= 2){
            kaukazu -= 1n;
            document.getElementById('kau').innerText = `${kaukazu}`;
            updateTotalPriceDisplay();
            updateTotalPriceDisplay2();
            updateTotalPriceDisplay3();
            updateTotalPriceDisplay4();
            updateTotalPriceDisplay5();
            oyatustyles();
        }
    });
    //マイナス10
    const KAUM10BUTTON = document.getElementById('minus10');
    KAUM10BUTTON.addEventListener('click', () => {
        if(kaukazu >= 11){
            kaukazu -= 10n;
            document.getElementById('kau').innerText = `${kaukazu}`;
            updateTotalPriceDisplay();
            updateTotalPriceDisplay2();
            updateTotalPriceDisplay3();
            updateTotalPriceDisplay4();
            updateTotalPriceDisplay5();
            oyatustyles();
        }
    });

    //kaukazu分の合計価格を計算して表示
    function updateTotalPriceDisplay() {    
        let total = 0n;
        let price = nedan[0];
        for (let i = 0n; i < kaukazu; i++) {
            total += price;
            price = price * 125n / 100n; // 1.25倍を整数計算
        }
        document.getElementById('nedan').textContent = formatNumberJP(total);
    }


    // 缶詰の購入ボタンの動作
    const BUTTON_CLICK_EVENT = document.getElementById('button1');
    BUTTON_CLICK_EVENT.addEventListener('click', () => {
        let currentPrice = nedan[0]; //現在の価格
        let totalCost = 0n;           //合計金額の初期化

        //価格上昇を加味した合計金額を計算
        for (let i = 0n; i < kaukazu; i++) {
            totalCost += currentPrice;
            currentPrice =  currentPrice * 125n / 100n;
        }

        if (count >= totalCost && kaukazu > 0) { //魚が足りる＆個数が1以上
            count -= totalCost; //追加
            coun += counnt[0] * kaukazu; //追加
            // countnedan += totalCost; //追加
            setcnedan(countnedan += totalCost);
            get[0] += kaukazu; //追加

            for (let i = 0n; i < kaukazu; i++) { //価格上昇の反映
                // nedan[0] *= 125n / 100n;
                nedan[0] = nedan[0] * 125n / 100n;
                console.log("缶詰値上げ");
            }
            setIcount(Icount += kaukazu);
            // nedan = nedan.map(value => Math.floor(value));//nedanを小数点切り捨て
            // Icount += kaukazu; //追加

            //レベルアップ処理
            const previousGet = get[0] - kaukazu;
            for (let i = previousGet + 1n; i <= get[0]; i++) {
                if (i % 10n === 0) {
                    Lvcount++;
                    lvup();
                }
            }

            const audio = new Audio('./音/金額表示.mp3');
            audio.volume = slider_volume.value;
            audio.play();

            mmI();
            ok3();
            document.getElementById('get').innerText = `所持数　×${get[0]}`;
            localStorage.setItem("coun", coun.toString());
            document.getElementById('coun').innerText = `+${formatNumberJP(coun)}`;
            document.getElementById('counter').textContent = formatNumberJP(count);
            koukansakana.textContent = formatNumberJP(count);
            document.getElementById('imacount').innerText = `${formatNumberJP(count)}`;
            localStorage.setItem("count", count.toString());
            // localStorage.setItem("get", JSON.stringify(get));
            localStorage.setItem("get",JSON.stringify(get.map(v => v.toString())));
            document.getElementById('nedan').textContent = formatNumberJP(nedan[0]);
            // localStorage.setItem("nedan", JSON.stringify(nedan));
            localStorage.setItem("nedan",JSON.stringify(nedan.map(v => v.toString())));
            oyatustyles();
            shopItemStyles();
            urashopStyles();
            btn5();
            clearcheck();
            jissekiclearflag();
        } 
        else { //魚が足りない or kaukazuが0なら
            const audio = new Audio('./音/キャンセル4.mp3')
            audio.volume = slider_volume.value;
            audio.play();
            ok4();
            // alert("魚が足りません");
        }
    });
    
    //kaukazu分の合計価格を計算して表示　キャットフード
    function updateTotalPriceDisplay2() {    
        let total = 0n;
        let price = nedan[1];
        for (let i = 0n; i < kaukazu; i++) {
            total += price;
            price = price * 15n / 10n;
        }
        document.getElementById('nedan2').innerText = `${total}`;
    }
    
    //キャットフードの購入ボタンの動作
    const BUTTON_EVT= document.getElementById('button2');
    BUTTON_EVT.addEventListener('click', () => {
        let currentPrice = nedan[1];      //現在の価格
        let totalCost = 0n;                //合計コスト

        //価格上昇を含めた合計金額を計算
        for (let i = 0n; i < kaukazu; i++) {
            totalCost += currentPrice;
            currentPrice = currentPrice * 15n / 10n; // キャットフード 価格上昇
        }

        //魚が足りるかチェック
        if (count >= totalCost && kaukazu > 0) {
            count -= totalCost;
            coun += counnt[1] * kaukazu;
            setcnedan(countnedan += totalCost);
            get[1] += kaukazu;

            // 価格上昇の反映
            for (let i = 0n; i < kaukazu; i++) {
                nedan[1] = nedan[1] * 15n / 10n
                console.log("キャットフード値上げ");
            }
            setIcount(Icount += kaukazu);
            // nedan = nedan.map(value => Math.floor(value));//nedanを小数点切り捨て

            // const audio = new Audio('./音/レジスター・開ける02.mp3');
            const audio = new Audio('./音/金額表示.mp3');
            audio.volume = slider_volume.value;
            audio.play();
            
            // レベルアップ処理（5個ごと）
            const previous = get[1] - kaukazu;
            for (let i = previous + 1n; i <= get[1]; i++) {
                if (i % 5n === 0) {
                    Lvcount++;
                    lvup();
                }
            }
            mmI();
            ok3();
            document.getElementById('get2').innerText = `所持数　×${get[1]}`;
            localStorage.setItem("coun", coun.toString());
            document.getElementById('coun').innerText = `+${formatNumberJP(coun)}`;
            document.getElementById('counter').textContent = formatNumberJP(count);
            koukansakana.textContent = formatNumberJP(count);
            document.getElementById('imacount').innerText = `${formatNumberJP(count)}`;
            localStorage.setItem("count", count.toString());
            localStorage.setItem("get",JSON.stringify(get.map(v => v.toString())));
            document.getElementById('nedan2').innerText = `${nedan[1]}`;
            localStorage.setItem("nedan",JSON.stringify(nedan.map(v => v.toString())));
            oyatustyles();
            shopItemStyles();
            urashopStyles();
            btn5();
            clearcheck();
            jissekiclearflag();
        }
        else 
        {
            const audio = new Audio('./音/キャンセル4.mp3')
            audio.volume = slider_volume.value;
            audio.play();
            ok4();
        }
    });

  //kaukazu分の合計価格を計算して表示　高級缶詰
  function updateTotalPriceDisplay3() {    
        let total = 0n;
        let price = nedan[2];
        for (let i = 0n; i < kaukazu; i++) {
            total += price;
            price *= 2n;
        }
        document.getElementById('nedan3').innerText = `${total}`; // ←表示用要素IDに合わせて調整
    }

    //高級缶詰の購入ボタンの動作
    const BUTTON_koukandume= document.getElementById('button3');
    BUTTON_koukandume.addEventListener('click', () => {
        let currentPrice = nedan[2];      //現在の価格
        let totalCost = 0n;                //合計コスト

        //価格上昇を含めた合計金額を計算
        for (let i = 0n; i < kaukazu; i++) {
            totalCost += currentPrice;
            currentPrice *= 2n; // 高級缶詰 価格上昇
        }

        //魚が足りるかチェック
        if (count >= totalCost && kaukazu > 0) {
            count -= totalCost;
            coun += counnt[2] * kaukazu;
            setcnedan(countnedan += totalCost);
            get[2] += kaukazu;

            // 価格と表示用価格記録
            for (let i = 0n; i < kaukazu; i++) {
                nedan[2] *= 2n;
            }
            setIcount(Icount += kaukazu);

            const audio = new Audio('./音/金額表示.mp3');
            audio.volume = slider_volume.value;
            audio.play();
            
            // レベルアップ処理（5個ごと）
            const previous = get[2] - kaukazu;
            for (let i = previous + 1n; i <= get[2]; i++) {
                if (i % 5n === 0) {
                    Lvcount++;
                    lvup();
                }
            }
            mmI();
            ok3();
            document.getElementById('get3').innerText = `所持数　×${get[2]}`;
            localStorage.setItem("coun", coun.toString());
            document.getElementById('coun').innerText = `+${formatNumberJP(coun)}`;
            document.getElementById('counter').textContent = formatNumberJP(count);
            koukansakana.textContent = formatNumberJP(count);
            document.getElementById('imacount').innerText = `${formatNumberJP(count)}`;
            localStorage.setItem("count", count.toString());
            localStorage.setItem("get",JSON.stringify(get.map(v => v.toString())));
            document.getElementById('nedan3').innerText = `${nedan[2]}`;
            localStorage.setItem("nedan",JSON.stringify(nedan.map(v => v.toString())));
            oyatustyles();
            shopItemStyles();
            urashopStyles();
            btn5();
            clearcheck();
            jissekiclearflag();
        }
        else 
        {
            const audio = new Audio('./音/キャンセル4.mp3')
            audio.volume = slider_volume.value;
            audio.play();
            ok4();
        }
    });

    //kaukazu分の合計価格を計算して表示　オヤツ
    function updateTotalPriceDisplay4() {    
        let total = 0n;
        let price = nedan[3];
        for (let i = 0n; i < kaukazu; i++) {
            total += price;
            price *= 2n;
        }
        document.getElementById('nedan4').innerText = `${total}`; // ←表示用要素IDに合わせて調整
    }

    //オヤツの購入ボタンの動作
    const BUTTON_oyatu= document.getElementById('button4');
    BUTTON_oyatu.addEventListener('click', () => {
        let currentPrice = nedan[3];      //現在の価格
        let totalCost = 0n;                //合計コスト

        //価格上昇を含めた合計金額を計算
        for (let i = 0n; i < kaukazu; i++) {
            totalCost += currentPrice;
            currentPrice *= 2n; // 高級缶詰 価格上昇
        }

        //魚が足りるかチェック
        if (count >= totalCost && kaukazu > 0) {
            count -= totalCost;
            coun += counnt[3] * kaukazu;
            setcnedan(countnedan += totalCost);
            get[3] += kaukazu;

            // 価格と表示用価格記録
            for (let i = 0n; i < kaukazu; i++) {
                nedan[3] *= 2n;
            }
            setIcount(Icount += kaukazu);

            const audio = new Audio('./音/金額表示.mp3');
            audio.volume = slider_volume.value;
            audio.play();
            
            // レベルアップ処理（5個ごと）
            const previous = get[3] - kaukazu;
            for (let i = previous + 1n; i <= get[3]; i++) {
                if (i % 5n === 0) {
                    Lvcount++;
                    lvup();
                }
            }
            mmI();
            ok3();
            document.getElementById('get4').innerText = `所持数　×${get[3]}`;
            localStorage.setItem("coun", coun.toString());
            document.getElementById('coun').innerText = `+${formatNumberJP(coun)}`;
            document.getElementById('counter').textContent = formatNumberJP(count);
            koukansakana.textContent = formatNumberJP(count);
            document.getElementById('imacount').innerText = `${formatNumberJP(count)}`;
            localStorage.setItem("count", count.toString());
            localStorage.setItem("get",JSON.stringify(get.map(v => v.toString())));
            document.getElementById('nedan4').innerText = `${nedan[3]}`;
            localStorage.setItem("nedan",JSON.stringify(nedan.map(v => v.toString())));
            oyatustyles();
            shopItemStyles();
            urashopStyles();
            btn5();
            clearcheck();
            jissekiclearflag();
        }
        else 
        {
            const audio = new Audio('./音/キャンセル4.mp3')
            audio.volume = slider_volume.value;
            audio.play();
            ok4();
        }
    });

     //kaukazu分の合計価格を計算して表示　ケーキ
    function updateTotalPriceDisplay5() {    
        let total = 0n;
        let price = nedan[4];
        for (let i = 0n; i < kaukazu; i++) {
            total += price;
            price *= 2n;
        }
        document.getElementById('nedan5').innerText = `${total}`; // ←表示用要素IDに合わせて調整
    }

    //ケーキの購入ボタンの動作
    const BUTTON_cake = document.getElementById('button5');
    BUTTON_cake.addEventListener('click', () => {
        let currentPrice = nedan[4];      //現在の価格
        let totalCost = 0n;                //合計コスト

        //価格上昇を含めた合計金額を計算
        for (let i = 0n; i < kaukazu; i++) {
            totalCost += currentPrice;
            currentPrice *= 2n; // 高級缶詰 価格上昇
        }

        //魚が足りるかチェック
        if (count >= totalCost && kaukazu > 0) {
            count -= totalCost;
            coun *= 2n * kaukazu;
            setcnedan(countnedan += totalCost);
            get[4] += kaukazu;

            // 価格と表示用価格記録
            for (let i = 0n; i < kaukazu; i++) {
                nedan[4] *= 2n;
            }
            setIcount(Icount += kaukazu);
            // nedan = nedan.map(value => Math.floor(value));//nedanを小数点切り捨て

            const audio = new Audio('./音/金額表示.mp3');
            audio.volume = slider_volume.value;
            audio.play();
            
            // レベルアップ処理（5個ごと）
            const previous = get[4] - kaukazu;
            for (let i = previous + 1n; i <= get[4]; i++) {
                if (i % 5n === 0) {
                    Lvcount++;
                    lvup();
                }
            }
            mmI();
            ok3();
            document.getElementById('get5').innerText = `所持数　×${get[4]}`;
            localStorage.setItem("coun", coun.toString());
            document.getElementById('coun').innerText = `+${formatNumberJP(coun)}`;
            document.getElementById('counter').textContent = formatNumberJP(count);
            koukansakana.textContent = formatNumberJP(count);
            document.getElementById('imacount').innerText = `${formatNumberJP(count)}`;
            localStorage.setItem("count", count.toString());
            localStorage.setItem("get",JSON.stringify(get.map(v => v.toString())));
            document.getElementById('nedan5').innerText = `${nedan[4]}`;
            localStorage.setItem("nedan",JSON.stringify(nedan.map(v => v.toString())));
            oyatustyles();
            shopItemStyles();
            urashopStyles();
            btn5();
            clearcheck();
            jissekiclearflag();
        }
        else 
        {
            const audio = new Audio('./音/キャンセル4.mp3')
            audio.volume = slider_volume.value;
            audio.play();
            ok4();
        }
    });
    const button5 = document.getElementById('button5');
    button5.disabled = true;
    button5.style.textDecoration = 'line-through';
    button5.style.textDecorationColor = 'red';
    button5.style.textDecorationThickness = '3px';
    function btn5() {
        button5.style.textDecoration = 'none';
        if(coun == 1){
            button5.disabled = true;
            button5.style.textDecoration = 'line-through';
            button5.style.textDecorationColor = 'red';
            button5.style.textDecorationThickness = '3px';
        }
        else{
            button5.disabled = false;
            button5.style.textDecoration = 'none';
            button5.style.textDecorationColor = 'initial'; // または元の色
            button5.style.textDecorationThickness = 'initial'; 
        }
    }


    function shopItemStyles() {
        const targets = [
            { elementId: 'Item', itemDivClass: 'Itemm', priceIndex: 0 },
            { elementId: 'Item2', itemDivClass: 'Itemm', priceIndex: 1 },
            { elementId: 'Item4', itemDivClass: 'Itemm', priceIndex: 2 },
            { elementId: 'Item5', itemDivClass: 'Itemm', priceIndex: 3 }
        ];

        targets.forEach(target => {
            const button = document.getElementById(target.elementId);
            if (!button) return;

            // ボタンから一番近い「Itemm」クラスの親要素を取得
            const itemDiv = button.closest('.Itemm');
            if (!itemDiv) return;

            const price = Inedan[target.priceIndex];
            itemDiv.style.opacity = (count < price) ? '0.6' : '1';
        });
    }

    const i1 = document.getElementById('i1');
    // const i2 = document.getElementById('i2');
    i1.style.opacity = 1;
    i1.textContent = "ここにアイテムの説明が出ます";
    // i2.textContent = "ここにねこの説明が出ます";

    const im1= document.getElementById('im1');
    im1.addEventListener('click', () => {
        i1.innerHTML = '<span class="tango">魚</span><i class="ri-money-cny-circle-fill"></i>が150貰えます。クールタイム5分';
    });
    const im2= document.getElementById('im2');
    im2.addEventListener('click', () => {
        i1.innerHTML = '2分間<span class="tango">食べ物</span><i class="ri-restaurant-fill"></i>が安くなります。';
    });
    const im3= document.getElementById('im3');
    im3.addEventListener('click', () => {
        i1.innerHTML = 'ランダムで<span class="tango">食べ物</span><i class="ri-restaurant-fill"></i>が貰えます。当たり:1番(缶詰),2番(キャットフード),9番(高級缶詰)';
    });
    const im4= document.getElementById('im4');
    im4.addEventListener('click', () => {
        i1.innerHTML = '自動で<span class="tango">魚</span><i class="ri-money-cny-circle-fill"></i>がクリック<i class="ri-cursor-line"></i>されます。';
    });

    // グローバル変数
    let itemCooldownInterval;
    const BUN_EVT = document.getElementById("Item");

    // ステータス更新関数
    function Item1BuyStatus() {
        const maxBuy = 5;
        const buySpan = document.getElementById("Itm1buy");
        const itemBuycount = Number(localStorage.getItem("itemBuycount") || 0);
        const startTime = Number(localStorage.getItem("itemBuyStartTime"));
        const duration = 600; // テスト用:10 本番:600

        if (itemBuycount < maxBuy) {
            // まだ5回未満なら残数表示だけして戻る
            buySpan.textContent = `あと${maxBuy - itemBuycount}コ`;
            BUN_EVT.disabled = false;
            BUN_EVT.style.textDecoration = 'none';
            return;
        }

        if (!startTime) {
            // クールダウン開始時間が無ければ何もしない
            return;
        }

        const now = Date.now();
        const elapsed = Math.floor((now - startTime) / 1000);
        let remaining = duration - elapsed;

        if (remaining <= 0) {
            localStorage.removeItem("itemBuycount");
            localStorage.removeItem("itemBuyStartTime");
            buySpan.textContent = `あと${maxBuy}コ`;
            BUN_EVT.disabled = false;
            BUN_EVT.style.textDecoration = 'none';
            return;
        }

        if (itemBuycount >= maxBuy) {
            if (itemCooldownInterval) clearInterval(itemCooldownInterval);
            BUN_EVT.disabled = true;
            BUN_EVT.style.textDecoration = 'line-through';
            BUN_EVT.style.textDecorationColor = 'red';
            BUN_EVT.style.textDecorationThickness = '3px';

            buySpan.innerText = `あと${remaining}秒で再購入できます`;

            itemCooldownInterval = setInterval(() => {
                remaining--;
                buySpan.textContent = `あと${remaining}秒で再購入できます`;

                if (remaining <= 0) {
                    clearInterval(itemCooldownInterval);
                    localStorage.removeItem("itemBuyStartTime");
                    localStorage.removeItem("itemBuycount");
                    BUN_EVT.disabled = false;
                    BUN_EVT.style.textDecoration = 'none';
                    buySpan.textContent = `あと${maxBuy}コ`;
                }
            }, 1000);
        } else {
            buySpan.textContent = `あと${maxBuy - itemBuycount}コ`;
        }
    }

    // ボタンクリック時の処理
    BUN_EVT.addEventListener('click', () => {
        let itemBuycount = Number(localStorage.getItem("itemBuycount") || 0);
        let itemBuyStartTime = Number(localStorage.getItem("itemBuyStartTime") || 0);
        const now = Date.now();

        // クールダウン終了確認
        if (itemBuyStartTime && now - itemBuyStartTime >= 300000) {
            itemBuycount = 0;
            itemBuyStartTime = 0;
            localStorage.removeItem("itemBuycount");
            localStorage.removeItem("itemBuyStartTime");
        }

        if (itemBuycount >= 5) {
            const audio = new Audio('./音/キャンセル4.mp3');
            audio.volume = slider_volume.value;
            audio.play();
            ok4();
            return;
        }

        if (count >= Inedan[0]) {
            const audio = new Audio('./音/レジスター・開ける03.mp3');
            audio.volume = slider_volume.value;
            audio.play();

            count -= Inedan[0];
            setcnedan(countnedan += Inedan[0]);
            setIcount(Icount += 1n);
            count += 150n;
            setnibosi(countb+=150n);

            if(count>=msakana){
                msakana *= 2n;
                // console.log(msakana);
                Lvcount += questlvup[0];
                questlvup[0] += 1n;
                localStorage.setItem("msakana", msakana.toString());
                mq12.textContent = mqest1[0]+formatNumberJP(msakana)+"コ集める 小判+"+questlvup[0];
                localStorage.setItem("questlvup",JSON.stringify(questlvup.map(v => v.toString())));
                ok1();
                lvup();
            }
            hutougou();
            
            document.getElementById('counter').textContent = formatNumberJP(count);
            koukansakana.textContent = formatNumberJP(count);
            document.getElementById('imacount').innerText = `${formatNumberJP(count)}`;
            localStorage.setItem("count", count.toString());
            document.getElementById('Inedan').textContent = formatNumberJP(Inedan[0]);;

            itemBuycount++;
            localStorage.setItem("itemBuycount", itemBuycount);

            if (itemBuycount === 5) {
                localStorage.setItem("itemBuyStartTime", Date.now());
            }

            Item1BuyStatus();
            mmI();
            ok3();
            oyatustyles();
            shopItemStyles();
            jissekiclearflag();
            clearcheck();
        } else {
            const audio = new Audio('./音/キャンセル4.mp3');
            audio.volume = slider_volume.value;
            audio.play();
            ok4();
        }
    });

    // ページ読み込み時に状態復元
    window.addEventListener("load", Item1BuyStatus);


    let item2CooldownInterval = null;
    let Item2flag = false;

    const timerdisplay = document.getElementById('timerdisplay');
    const BUN_EVT2 = document.getElementById('Item2');
    const I2tt = document.getElementById('I2tt');  // 透明度操作用

    timerdisplay.style.display = 'none';
    I2tt.style.opacity = 0;

    document.querySelectorAll('.sale').forEach(el => {
        el.style.opacity = 0;
    });

    function resumeItem2Timer() {
        const startTime = Number(localStorage.getItem("item2StartTime"));
        const duration = Number(localStorage.getItem("item2Duration"));
        const now = Date.now();

        if (!startTime || !duration) return;

        const elapsed = Math.floor((now - startTime) / 1000);
        let remaining = duration - elapsed;

        if (remaining <= 0) {
            // タイマー終了状態ならリセット
            localStorage.removeItem("item2StartTime");
            localStorage.removeItem("item2Duration");
            resetItem2();
            return;
        }

        startItem2Cooldown(remaining);
    }

    function startItem2Cooldown(duration) {
        if (item2CooldownInterval) clearInterval(item2CooldownInterval);

        Item2flag = true;
        I2tt.style.opacity = 1;
        document.querySelectorAll('.sale').forEach(el => {
            el.style.opacity = 1;
        });
        BUN_EVT2.disabled = true;
        BUN_EVT2.style.textDecoration = 'line-through';
        BUN_EVT2.style.textDecorationColor = 'red';
        BUN_EVT2.style.textDecorationThickness = '3px';

        timerdisplay.style.display = 'block';

        let remaining = duration;

        timerdisplay.innerText = `セール終了まで：${remaining}秒`;

        item2CooldownInterval = setInterval(() => {
            remaining--;
            timerdisplay.innerText = `セール終了まで：${remaining}秒`;

            if (remaining <= 0) {
                clearInterval(item2CooldownInterval);
                resetItem2();
            }
        }, 1000);
    }

    function resetItem2() {
        timerdisplay.style.display = 'none';
        I2tt.style.opacity = 0;
        document.querySelectorAll('.sale').forEach(el => {
            el.style.opacity = 0;
        });
        BUN_EVT2.disabled = false;
        BUN_EVT2.style.textDecoration = 'none';
        Item2flag = false;

        // 値段を元に戻す処理（必要ならここで）
        let savedMotonedan = JSON.parse(localStorage.getItem("motonedan") || "[]");
        savedMotonedan = savedMotonedan.map(v => BigInt(v));
        if (savedMotonedan.length === 4) {
            nedan[0] = savedMotonedan[0];
            nedan[1] = savedMotonedan[1];
            nedan[2] = savedMotonedan[2];
            nedan[3] = savedMotonedan[3];
            oyatustyles();
            shopItemStyles();
            localStorage.setItem("nedan",JSON.stringify(nedan.map(v => v.toString())));
            document.getElementById('nedan').textContent = formatNumberJP(nedan[0]);
            document.getElementById('nedan2').innerText = formatNumberJP(nedan[1]);
            document.getElementById('nedan3').innerText = formatNumberJP(nedan[2]);
            document.getElementById('nedan4').innerText = formatNumberJP(nedan[3]);
            localStorage.removeItem("motonedan");
        }

        localStorage.removeItem("item2StartTime");
        localStorage.removeItem("item2Duration");
    }

    BUN_EVT2.addEventListener('click', () => {

        if (count < Inedan[1]) {
            const audio = new Audio('./音/キャンセル4.mp3');
            audio.volume = slider_volume.value;
            audio.play();
            ok4();
            return;
        }

        // 購入処理
        count -= Inedan[1];
        setcnedan(countnedan += Inedan[1]);
        Inedan[1] = Inedan[1] * 15n/10n;
        // Inedan = Inedan.map(value => Math.floor(value));//Inedanを小数点切り捨て
        setIcount(Icount += 1n);

        // 値段を半分にする処理
        let motonedan = [nedan[0], nedan[1], nedan[2], nedan[3]];
        motonedan = motonedan.map(v => BigInt(v));
        localStorage.setItem("motonedan",JSON.stringify(motonedan.map(v => v.toString())));
        nedan[0] = nedan[0] / 2n;
        nedan[1] = nedan[1] / 2n;
        nedan[2] = nedan[2] / 2n;
        nedan[3] = nedan[3] / 2n;

        document.getElementById('counter').textContent = formatNumberJP(count);
        koukansakana.textContent = formatNumberJP(count);
        document.getElementById('imacount').innerText = `${formatNumberJP(count)}`;
        localStorage.setItem("count", count.toString());
        // localStorage.setItem("Inedan", JSON.stringify(Inedan));
        localStorage.setItem("Inedan",JSON.stringify(Inedan.map(v => v.toString())));
        localStorage.setItem("nedan",JSON.stringify(nedan.map(v => v.toString())));

        document.getElementById('nedan').textContent = formatNumberJP(nedan[0]);
        document.getElementById('nedan2').textContent = formatNumberJP(nedan[1]);
        document.getElementById('nedan3').textContent = formatNumberJP(nedan[2]);
        document.getElementById('nedan4').textContent = formatNumberJP(nedan[3]);
        document.getElementById('Inedan2').textContent = formatNumberJP(Inedan[1]);

        const audio = new Audio('./音/レジスター・開ける03.mp3');
        audio.volume = slider_volume.value;
        audio.play();
        ok3();

        const cooldownDuration = 120; // 2分（秒）
        const startTime = Date.now();

        localStorage.setItem("item2StartTime", startTime);
        localStorage.setItem("item2Duration", cooldownDuration);

        startItem2Cooldown(cooldownDuration);
        jissekiclearflag();
    });

    // ページ読み込み時にクールダウン復元
    window.addEventListener('load', () => {
        resumeItem2Timer();
    });



    kekka.style.display = 'none';
    const BUN_EVT4= document.getElementById('Item4');
    BUN_EVT4.addEventListener('click', () => {
        // var result = confirm("おみくじ（ランダムでねこショップの商品が貰えます。ﾊｽﾞﾚあり）\nｱﾀﾘ:1番、2番,9番");
        var random = Math.floor(Math.random()*10)+1
        // if(result) 
        // {
            const kekka = document.getElementById('kekka');
            if(count >= Inedan[2])
            {
                // console.log('Item4購入完了');
                const audio = new Audio('./音/レジスター・開ける03.mp3');
                audio.volume = slider_volume.value;
                audio.play();
                count -= Inedan[2];
                setcnedan(countnedan += Inedan[2]);
                Inedan[2] = Inedan[2] * 15n / 10n;
                // Inedan = Inedan.map(value => Math.floor(value));//Inedanを小数点切り捨て
                document.getElementById('Inedan4').textContent = formatNumberJP(Inedan[2]);
                setIcount(Icount += 1n);
                oyatustyles();
                shopItemStyles();
                btn5();
                jissekiclearflag();
                const gazou = document.getElementById('gazou');
                const kuji = document.getElementById('kuji');
                if(random==1){
                    kekka.style.display = 'block';
                    gazou.innerHTML='<img src="./images/pet_food_cat_can.png">';
                    kuji.innerHTML='<img src="./images/omikuji_kichi.png">';
                    bangou.textContent = random + "番 当たり！缶詰+1";
                    get[0] += 1n;
                    coun+=counnt[0];
                    // alert("当たり！缶詰+1");
                    // console.log("缶詰"+get[0]);
                    document.getElementById('get').innerText = `所持数　×${get[0]}`;
                    document.getElementById('coun').innerText = `+${formatNumberJP(coun)}`;
                }
                else if(random==2){
                    kekka.style.display = 'block';
                    gazou.innerHTML='<img src="./images/pet_food_cat.png">';
                    kuji.innerHTML='<img src="./images/omikuji_chuukichi.png">';
                    bangou.textContent = random + "番 当たり！キャットフード+1";
                    get[1] += 1n;
                    coun+=counnt[1];
                    // alert("当たり！キャットフード+1");
                    // console.log("キャットフード"+get[1]);
                    document.getElementById('get2').innerText = `所持数　×${get[1]}`;        
                    document.getElementById('coun').innerText = `+${formatNumberJP(coun)}`;
                }
                else if(random==9){
                    kekka.style.display = 'block';
                    gazou.innerHTML='<img src="./images/kandume_koukyuu.png">';
                    kuji.innerHTML='<img src="./images/omikuji_daikichi.png">';
                    bangou.textContent = random + "番 当たり！高級缶詰+1";
                    get[2] += 1n;
                    coun+=counnt[2];
                    // alert("当たり！高級缶詰+1");
                    // console.log("高級缶詰"+get[2]);
                    document.getElementById('get3').innerText = `所持数　×${get[2]}`;
                    document.getElementById('coun').innerText = `+${formatNumberJP(coun)}`;
                }
                else
                {
                    gazou.innerHTML='<img src="./images/kuji_hazure.png">';
                    kuji.innerHTML='';
                    kekka.style.display = 'block';
                    bangou.textContent = random + "番 残念！ハズレ";
                    // alert(random+"番");
                    // alert("残念！はずれ");
                }   
                mmI(); 
                ok3();  
                document.getElementById('Inedan4').textContent = formatNumberJP(Inedan[2]);
                localStorage.setItem("Inedan",JSON.stringify(Inedan.map(v => v.toString())));
                localStorage.setItem("get",JSON.stringify(get.map(v => v.toString())));
                localStorage.setItem("coun", coun.toString());
                document.getElementById('coun').innerText = `+${formatNumberJP(coun)}`;
                document.getElementById('counter').textContent = formatNumberJP(count);
                koukansakana.textContent = formatNumberJP(count);
                document.getElementById('imacount').innerText = `${formatNumberJP(count)}`;
                localStorage.setItem("count", count.toString());
                document.getElementById('get').innerText = `所持数　×${get[0]}`;
                document.getElementById('get2').innerText = `所持数　×${get[1]}`;
                document.getElementById('get3').innerText = `所持数　×${get[2]}`;
            }
            else
            {
                const audio = new Audio('./音/キャンセル4.mp3')
                audio.volume = slider_volume.value;
                audio.play();
                ok4();
            }
        }
    // }
    );

    const BUN_EVT5= document.getElementById('Item5');
    BUN_EVT5.addEventListener('click', () => {
        // var result = confirm("このアイテムは毎秒魚が1増えるようになるアイテムです。\n購入しますか？");
        // if(result) 
        // {
            if(count>=Inedan[3])
            {
                // console.log('Item5購入完了');
                const audio = new Audio('./音/レジスター・開ける03.mp3');
                audio.volume = slider_volume.value;
                audio.play();
                count -= Inedan[3];
                setcnedan(countnedan += Inedan[3]);
                Inedan[3] *= 2n;
                flagItm5 = true;
                localStorage.setItem("flagItm5", "true");
                setIcount(Icount += 1n);
                // coun1s+=1;
                setcs(coun1s += 5n);
                Itm5flag();
                oyatustyles();
                shopItemStyles();
                jissekiclearflag();
                document.getElementById('counter').textContent = formatNumberJP(count);
                koukansakana.textContent = formatNumberJP(count);
                localStorage.setItem("count", count.toString());
                localStorage.setItem("Inedan",JSON.stringify(Inedan.map(v => v.toString())));
                document.getElementById('imacount').innerText = `${formatNumberJP(count)}`;
                document.getElementById('Inedan5').textContent = formatNumberJP(Inedan[3]);
                document.getElementById('coun1s').innerText = `毎秒+${coun1s}`;
                mmI();
                ok3();
            }
            else{
                const audio = new Audio('./音/キャンセル4.mp3')
                audio.volume = slider_volume.value;
                audio.play();
                ok4();
            }
        }
    // }
    );

    function urashopStyles() {
        const targets = [
            { id: 'uramono', unedanIndex: 0 },
            { id: 'ura2',    unedanIndex: 1 },
            { id: 'ura3',    unedanIndex: 2 },
            { id: 'ura4',    unedanIndex: 3 }
        ];

        targets.forEach(target => {
        const block = document.getElementById(target.id);
        if (!block) return;

        if (Lvcount < unedan[target.unedanIndex]) {
            block.style.opacity = '0.6';
        } else {
            block.style.opacity = '1';
        }
        });
    }

    //ウラショップ
    const UBTN= document.getElementById('kyoukabutton');
    UBTN.addEventListener('click', () => {
            if(Lvcount >= unedan[0])
            {
                console.log('缶詰強化完了');
                Lvcount-=unedan[0];
                unedan[0] += 5n;
                counnt[0] += 5n;
                ok8();
                // alert("強化完了!");
                // const audio = new Audio('./音/決定ボタンを押す31.mp3');
                const audio = new Audio('./音/決定ボタンを押す42.mp3');
                audio.volume = slider_volume.value;
                audio.play();
                urashopStyles();
                jissekiclearflag();
                localStorage.setItem('Lvcount', Lvcount.toString());
                // localStorage.setItem("unedan", JSON.stringify(unedan));
                localStorage.setItem("unedan",JSON.stringify(unedan.map(v => v.toString())));
                // localStorage.setItem("counnt", JSON.stringify(counnt));
                localStorage.setItem("counnt",JSON.stringify(counnt.map(v => v.toString())));
                document.getElementById('inputLv').textContent = Lvcount;
                koukankoban.textContent = formatNumberJP(Lvcount);
                document.getElementById('unedan1').innerText = `${unedan[0]}枚`;
                document.getElementById('+cnt2').innerText = `+${counnt[0]}`;
                document.getElementById('moto').innerText = `+${counnt[0]}`;
                document.getElementById('kyouka').innerText = `+${counnt[0]+5n}`;
            }
            else{
                const audio = new Audio('./音/キャンセル4.mp3')
                audio.volume = slider_volume.value;
                audio.play();
                ok5();
                // alert("レベルが足りません");
            }
    });
    const UBTN2= document.getElementById('kyoukabutton2');
    UBTN2.addEventListener('click', () => {
            if(Lvcount >= unedan[1])
            {
                console.log('キャットフード強化完了');
                Lvcount-=unedan[1];
                unedan[1] += 5n;
                counnt[1] += 5n;
                ok8();
                // alert("強化完了!");
                const audio = new Audio('./音/決定ボタンを押す42.mp3');
                audio.volume = slider_volume.value;
                audio.play();
                urashopStyles();
                jissekiclearflag();
                localStorage.setItem('Lvcount', Lvcount.toString());
                localStorage.setItem("unedan",JSON.stringify(unedan.map(v => v.toString())));
                localStorage.setItem("counnt",JSON.stringify(counnt.map(v => v.toString())));
                document.getElementById('inputLv').textContent = Lvcount;
                koukankoban.textContent = formatNumberJP(Lvcount);
                document.getElementById('unedan2').innerText = `${unedan[1]}枚`;
                document.getElementById('+cnt3').innerText = `+${counnt[1]}`;
                document.getElementById('moto2').innerText = `+${counnt[1]}`;
                document.getElementById('kyouka2').innerText = `+${counnt[1]+5n}`;
            }
            else{
                const audio = new Audio('./音/キャンセル4.mp3')
                audio.volume = slider_volume.value;
                audio.play();
                ok5();
            }
    });
    const UBTN3= document.getElementById('kyoukabutton3');
    UBTN3.addEventListener('click', () => {
            if(Lvcount >= unedan[2])
            {
                console.log('高級缶詰強化完了');
                Lvcount -= unedan[2];
                unedan[2] += 5n;
                counnt[2] += 5n;
                ok8();
                // alert("強化完了!");
                const audio = new Audio('./音/決定ボタンを押す42.mp3');
                audio.volume = slider_volume.value;
                audio.play();
                urashopStyles();
                jissekiclearflag();
                localStorage.setItem('Lvcount', Lvcount.toString());
                localStorage.setItem("unedan",JSON.stringify(unedan.map(v => v.toString())));
                localStorage.setItem("counnt",JSON.stringify(counnt.map(v => v.toString())));
                document.getElementById('inputLv').textContent = Lvcount;
                koukankoban.textContent = formatNumberJP(Lvcount);
                document.getElementById('unedan3').innerText = `${unedan[2]}枚`;
                document.getElementById('+cnt4').innerText = `+${counnt[2]}`;
                document.getElementById('moto3').innerText = `+${counnt[2]}`;
                document.getElementById('kyouka3').innerText = `+${counnt[2]+5n}`;
            }
            else{
                const audio = new Audio('./音/キャンセル4.mp3')
                audio.volume = slider_volume.value;
                audio.play();
                ok5();
            }
    });
    const UBTN4= document.getElementById('kyoukabutton4');
    UBTN4.addEventListener('click', () => {
            if(Lvcount >= unedan[3])
            {
                console.log('オヤツ強化完了');
                Lvcount -= unedan[3];
                unedan[3] += 5n;
                counnt[3] += 5n;
                ok8();
                // alert("強化完了!");
                const audio = new Audio('./音/決定ボタンを押す42.mp3');
                audio.volume = slider_volume.value;
                audio.play();
                urashopStyles();
                jissekiclearflag();
                localStorage.setItem('Lvcount', Lvcount.toString());
                localStorage.setItem("unedan",JSON.stringify(unedan.map(v => v.toString())));
                localStorage.setItem("counnt",JSON.stringify(counnt.map(v => v.toString())));
                document.getElementById('inputLv').textContent = Lvcount;
                koukankoban.textContent = formatNumberJP(Lvcount);
                document.getElementById('unedan4').innerText = `${unedan[3]}枚`; 
                document.getElementById('+cnt5').innerText = `+${counnt[3]}`;
                document.getElementById('moto4').innerText = `+${counnt[3]}`;
                document.getElementById('kyouka4').innerText = `+${counnt[3]+5n}`;
            }
            else{
                const audio = new Audio('./音/キャンセル4.mp3')
                audio.volume = slider_volume.value;
                audio.play();
                ok5();
            }
    });

    //スキル
    kakutoku1.style.opacity = 0;
    kakutoku2.style.opacity = 0;
    kakutoku3.style.opacity = 0;
    SKILLBUTTON.disabled = false;
    SKILLBUTTON.style.textDecoration = 'none';
    SKILLBUTTON.style.textDecorationColor = 'initial';
    SKILLBUTTON.style.textDecorationThickness = 'initial'; 
    SKILLBUTTON2.disabled = false;
    SKILLBUTTON2.style.textDecoration = 'none';
    SKILLBUTTON2.style.textDecorationColor = 'initial';
    SKILLBUTTON2.style.textDecorationThickness = 'initial'; 
    SKILLBUTTON3.disabled = false;
    SKILLBUTTON3.style.textDecoration = 'none';
    SKILLBUTTON3.style.textDecorationColor = 'initial';
    SKILLBUTTON3.style.textDecorationThickness = 'initial'; 

    SKILLBUTTON.addEventListener('click', () => {
        if (point >= snedan[0]) {
            point -= snedan[0];
            localStorage.setItem("point", point.toString());
            document.getElementById('point').textContent = formatNumberJP(point);
            const audio = new Audio('./音/クリック (1).mp3');
            audio.volume = slider_volume.value;
            audio.play();
            ok3();
            kakutoku1.style.opacity = 1;
            SKILLBUTTON.disabled = true;
            SKILLBUTTON.style.textDecoration = 'line-through';
            SKILLBUTTON.style.textDecorationColor = 'red';
            SKILLBUTTON.style.textDecorationThickness = '3px';
            kakutokuflag1 = true;
            localStorage.setItem("kakutokuflag1", kakutokuflag1);
        } 
        else {
            const audio = new Audio('./音/キャンセル4.mp3')
            audio.volume = slider_volume.value;
            audio.play();
            ok10();
        }
    });
    SKILLBUTTON2.addEventListener('click', () => {
        if (point >= snedan[1]) {
            point -= snedan[1];
            localStorage.setItem("point", point.toString());
            document.getElementById('point').textContent = formatNumberJP(point);
            const audio = new Audio('./音/クリック (1).mp3');
            audio.volume = slider_volume.value;
            audio.play();
            ok3();
            kakutoku2.style.opacity = 1;
            SKILLBUTTON2.disabled = true;
            SKILLBUTTON2.style.textDecoration = 'line-through';
            SKILLBUTTON2.style.textDecorationColor = 'red';
            SKILLBUTTON2.style.textDecorationThickness = '3px';
            kakutokuflag2 = true;
            localStorage.setItem("kakutokuflag2", kakutokuflag2);
        } 
        else {
            const audio = new Audio('./音/キャンセル4.mp3')
            audio.volume = slider_volume.value;
            audio.play();
            ok10();
        }
    });
    const koukann = document.getElementById('koukann');
    koukann.style.display = 'none';
    function slill3() {
        if(kakutokuflag3 == true){
            koukann.style.display = 'block';
        }
        else{
            koukann.style.display = 'none';
        }
    }
    koukantab.style.display = 'none';
    const koukankoban = document.getElementById('koukankoban');
    const koukansakana = document.getElementById('koukansakana');
    koukankoban.textContent = formatNumberJP(Lvcount);
    koukansakana.textContent = formatNumberJP(count);
    koukann.addEventListener('click', () => {
        const audio = new Audio('./音/決定ボタンを押す31.mp3');
        audio.volume = slider_volume.value;
        audio.play();
        koukantab.style.display = 'block';
    });
    let koukankazu = 0n;
    const KOUKAN_RATE = 100n; //小判1 = 魚100
    const koukanplus = document.getElementById('koukanplus');
    const koukancount = document.getElementById('koukancount');
    koukancount.textContent = koukankazu.toString();
    koukanplus.addEventListener('click', () => {
        if(koukankazu < Lvcount){
            koukankazu += 1n;
        }
        koukancount.textContent = koukankazu.toString();
        koukansakana.textContent = formatNumberJP(count + koukankazu * KOUKAN_RATE);
        koukankoban.textContent = formatNumberJP(Lvcount - koukankazu);
    });
    const koukanten = document.getElementById('koukanten');
    koukanten.addEventListener('click', () => {
        koukankazu = Lvcount;
        koukancount.textContent = koukankazu.toString();
        koukansakana.textContent = formatNumberJP(count + koukankazu * KOUKAN_RATE);
        koukankoban.textContent = formatNumberJP(Lvcount - koukankazu);
    });
    const koukanminus = document.getElementById('koukanminus');
    koukanminus.addEventListener('click', () => {
        if(koukankazu >= 1n){
            koukankazu -= 1n;
            koukancount.textContent = koukankazu.toString();
            koukansakana.textContent = formatNumberJP(count + koukankazu * KOUKAN_RATE);
            koukankoban.textContent = formatNumberJP(Lvcount - koukankazu);
        }
    });
    const koukanmten = document.getElementById('koukanmten');
    koukanmten.addEventListener('click', () => {
        if(koukankazu >= 10n){
            koukankazu -= 10n;
            koukancount.textContent = koukankazu.toString();
            koukansakana.textContent = formatNumberJP(count + koukankazu * KOUKAN_RATE);
            koukankoban.textContent = formatNumberJP(Lvcount - koukankazu);
        }
    });

    koukankakutei.addEventListener('click', () => {
        if (koukankazu <= 0n) return;
        if (koukankazu > Lvcount) return;
        //交換処理
        Lvcount -= koukankazu;
        count += koukankazu * KOUKAN_RATE;
        oyatustyles();
        urashopStyles();
        document.getElementById('counter').textContent = formatNumberJP(count);
        koukansakana.textContent = formatNumberJP(count);
        document.getElementById('inputLv').textContent = formatNumberJP(Lvcount);
        koukankoban.textContent = formatNumberJP(Lvcount);
        localStorage.setItem("count", count.toString());
        localStorage.setItem("Lvcount", Lvcount.toString());
        //リセット
        koukankazu = 0n;
        koukancount.textContent = koukankazu.toString();
    });

    SKILLBUTTON3.addEventListener('click', () => {
        if (point >= snedan[2]) {
            point -= snedan[2];
            localStorage.setItem("point", point.toString());
            document.getElementById('point').textContent = formatNumberJP(point);
            const audio = new Audio('./音/クリック (1).mp3');
            audio.volume = slider_volume.value;
            audio.play();
            ok3();
            slill3();
            koukann.style.display = 'block';
            kakutoku3.style.opacity = 1;
            SKILLBUTTON3.disabled = true;
            SKILLBUTTON3.style.textDecoration = 'line-through';
            SKILLBUTTON3.style.textDecorationColor = 'red';
            SKILLBUTTON3.style.textDecorationThickness = '3px';
            kakutokuflag3 = true;
            localStorage.setItem("kakutokuflag3", kakutokuflag3);
        } 
        else {
            const audio = new Audio('./音/キャンセル4.mp3')
            audio.volume = slider_volume.value;
            audio.play();
            ok10();
        }
    });


    hatenatab.style.display = 'none';//設定欄を隠す
    //設定
    const hatenabtn = document.getElementById('hatena');
    hatenabtn.addEventListener('click', () => {
        const audio = new Audio('./音/決定ボタンを押す31.mp3');
        audio.volume = slider_volume.value;
        audio.play();
        // 要素を表示する
        hatenatab.style.display = 'block';
    }); 

    //ミッション
    mii2.style.display = 'none';

    const BUTTONm2= document.getElementById('tst');
    BUTTONm2.addEventListener('click', () => {
        const audio = new Audio('./音/決定ボタンを押す31.mp3');
        audio.volume = slider_volume.value;
        audio.play();
        const ato42 = document.getElementById("ato42");
        const ato52 = document.getElementById("ato52");
        const ato62 = document.getElementById("ato62");
        // 要素を表示する
        mii2.style.display = 'block';
        mq12.textContent = mqest1[0]+formatNumberJP(msakana)+"コ集める 小判+"+questlvup[0];
        mq22.textContent = mqest1[1]+formatNumberJP(mItem)+"コ買う 小判+"+questlvup[1];
        mq32.textContent = mqest1[2]+formatNumberJP(mmck)+"回クリックする 小判+"+questlvup[2];
        document.getElementById('ato12').innerText = `　${formatNumberJP(count)}/${formatNumberJP(msakana)}`;
        document.getElementById('ato22').innerText = `　${formatNumberJP(Icount)}/${formatNumberJP(mItem)}`;
        document.getElementById('ato32').innerText = `　${formatNumberJP(counttt)}/${formatNumberJP(mmck)}`;
        document.getElementById('ato42').innerText = `　${formatNumberJP(count)}/${formatNumberJP(1000n)}`;
        document.getElementById('ato52').innerText = `　${formatNumberJP(count)}/${formatNumberJP(10000n)}`;
        document.getElementById('ato62').innerText = `　${formatNumberJP(count)}/${formatNumberJP(100000n)}`;
    });


    //実績
    jissekitab.style.display = 'none';
    const jisssekibtn = document.getElementById('jisseki');
    jisssekibtn.addEventListener('click', () => {
        const audio = new Audio('./音/決定ボタンを押す31.mp3');
        audio.volume = slider_volume.value;
        audio.play();
        // 要素を表示する
        jissekitab.style.display = 'block';
    });



    scon.style.display = 'none';//設定欄を隠す
    //設定
    const BUTTONs= document.getElementById('sbtn');
    BUTTONs.addEventListener('click', () => {
        const audio = new Audio('./音/決定ボタンを押す31.mp3');
        audio.volume = slider_volume.value;
        audio.play();
        // 要素を表示する
        scon.style.display = 'block';
    }); 
    const otoBUTTON= document.getElementById('ototst');
    otoBUTTON.addEventListener('click', () => {
        const audio = new Audio('./音/決定ボタンを押す45.mp3');
        audio.volume = slider_volume.value;
        audio.play();
    }); 

    // const soundList = [
    //     "音/決定ボタンを押す45.mp3",
    //     "音/決定ボタンを押す31.mp3",
    //     "音/決定ボタンを押す50.mp3",
    //     "音/決定ボタンを押す12.mp3",
    //     "音/kounyu1.mp3",
    //     "音/kounyu2.mp3"
    // ];

    // すべてのオーディオ要素を取得
    const slider_volume = document.getElementById("volume");
    const audio = document.querySelectorAll(".koukaon");
    

    const initialVolume = parseFloat(slider_volume.value); // 0.0〜1.0 の範囲
    audio.forEach(audio => {
    audio.volume = initialVolume;
    });

    audio.volume = 0.5; // 音量を0.0〜1.0で設定
    slider_volume.addEventListener("input", () => {
        const volume = parseFloat(slider_volume.value);
        audio.forEach(a => {
                a.volume = volume;
         });
    });
    // リセットボタンのイベント
    btn_reset.addEventListener("click", () => {
        const defaultVolume = 0.5;
        slider_volume.value = defaultVolume;
        audio.forEach(a => a.volume = defaultVolume);
    });

    function changeFont(font) {//フォントを変える
        sessionStorage.setItem('selectfont',font);
        document.body.style.fontFamily = font;

        // 各種要素にも適用
        const selects = [
            '.Itembtn',
            '.text',
            '#dbutton',
            '.pm',
            '#kau',
            '#dbtn',
            '#loadp'
        ];

        selects.forEach(selector => {
            const elements = document.querySelectorAll(selector);
            elements.forEach(el => {
                el.style.fontFamily = font;
            });
        });
    }

    const originalSize = 16; // すべての要素のベースフォントサイズ

    function changeFontSize(change) {
        change = Number(change); // 念のため型変換

        // 保存されているサイズ増減値を取得（なければ0）
        let savedSize = Number(sessionStorage.getItem('selectsize') || 0);

        // 新しい増減値を計算
        let newSizeOffset = savedSize + change;

        // 安全範囲（例：-8〜+32まで）で制限
        if (newSizeOffset < -8) newSizeOffset = -8;
        if (newSizeOffset > 32) newSizeOffset = 32;

        // 適用対象のセレクタ
        const selectors = ['.txt', '.nee', '.line', '.up', '.mt2','.bun','.wavy'];
        selectors.forEach(selector => {
            const elements = document.querySelectorAll(selector);
            elements.forEach(el => {
                const newSize = originalSize + newSizeOffset;
                el.style.fontSize = newSize + 'px';
            });
        });

        // セッションに保存
        sessionStorage.setItem('selectsize', newSizeOffset);
    }

    function resetFontSize() {
        const selectors = ['.txt', '.nee', '.line', '.up', '.mt2','.bun','.wavy'];
        selectors.forEach(selector => {
            const elements = document.querySelectorAll(selector);
            elements.forEach(el => {
                el.style.fontSize = originalSize + 'px';
            });
        });

        // 差分も0にリセット
        sessionStorage.setItem('selectsize', "0");
    }

    //記録
    document.getElementById('kirokuLv').innerText = `${formatNumberJP(Lvcount)}`;
    document.getElementById('kirokuclick').innerText = `${formatNumberJP(counttt)}`;
    document.getElementById('kirokusakana').innerText = `${formatNumberJP(count)}`;
    document.getElementById('kirokusakanas').innerText = `${formatNumberJP(countb)}`;
    document.getElementById('kirokusakanasiyou').innerText = `${formatNumberJP(countnedan)}`;
    document.getElementById('kirokumono').innerText = `${formatNumberJP(Icount)}`;

    kiroku.style.display = 'none';
    //記録ボタンの動作
    const BUTTONAA= document.getElementById('buttonAA');
    BUTTONAA.addEventListener('click', () => {
        const audio = new Audio('./音/決定ボタンを押す31.mp3');
        audio.volume = slider_volume.value;
        audio.play();
        kiroku.style.display = 'block';
        document.getElementById('kirokuLv').innerText = `${formatNumberJP(Lvcount)}`;
        document.getElementById('kirokuclick').innerText = `${formatNumberJP(counttt)}`;
        document.getElementById('kirokusakana').innerText = `${formatNumberJP(count)}`;
        document.getElementById('kirokusakanas').innerText = `${formatNumberJP(countb)}`;
        document.getElementById('kirokusakanasiyou').innerText = `${formatNumberJP(countnedan)}`;
        document.getElementById('kirokumono').innerText = `${formatNumberJP(Icount)}`;
    });

    const img = document.getElementById('data');
    const nekotapicon = document.getElementById('nekotapicon');
    nekotapicon.style.display = 'block';
    const d1 = document.getElementById('d1');
    const catreset = document.getElementById('catreset');
    const catcc = document.getElementById('catcc');
    const cathyouji = document.getElementById('cathyouji');
    const catgetsakana = document.getElementById('catgetsakana');
    let catcount = Number(localStorage.getItem('catcount')) || 0;
    let catget = BigInt(localStorage.getItem("catget") || "100");
    document.getElementById('catgetsakana').innerText = `${catget}`;

    catreset.addEventListener('click', () => {
        img.style.top = '50%';
        img.style.left = '50%';
        nekotapicon.style.top = '50%';
        nekotapicon.style.left = '50%';
    });

    cathyouji.style.display = 'none';
    document.getElementById('catcount').innerText = `${catcount}`;
    img.addEventListener('click', () => {
        nekotapicon.style.display = 'none';
        catcount += 1;
        const d1Width = d1.clientWidth;
        const d1Height = d1.clientHeight;
        
        const maxX = d1Width - img.width;
        const maxY = d1Height - img.height;
        const mxX = d1Width - nekotapicon.width;
        const mxY = d1Height - nekotapicon.height;
        
        const randomX = Math.floor(Math.random() * maxX);
        const randomY = Math.floor(Math.random() * maxY);
        
        img.style.left = `${randomX}px`;
        img.style.top = `${randomY}px`;
        nekotapicon.style.left = `${randomX}px`;
        nekotapicon.style.top = `${randomY}px`;
        if(catcount % 15 === 0){
            cathyouji.style.display = 'block';
            document.getElementById('catcc').innerText = `${catcount}`;
            document.getElementById('catgetsakana').innerText = `${catget}`;
            setnibosi(countb += catget);
            count += catget;
            localStorage.setItem('catget', catget);
            catget += 100n;
            localStorage.setItem('catget', catget);
            document.getElementById('counter').textContent = formatNumberJP(count);
            koukansakana.textContent = formatNumberJP(count);
            document.getElementById('imacount').innerText = `${formatNumberJP(count)}`;
            localStorage.setItem("count", count.toString());
            hutougou();
            jissekiclearflag();
        }
        localStorage.setItem('catcount', catcount);
        document.getElementById('catcount').innerText = `${catcount}`;
    });

    sakujogamen.style.display = 'none';
    //削除画面の動作
    const BUTTONsakujo= document.getElementById('datasakujo');
    BUTTONsakujo.addEventListener('click', () => {
        const audio = new Audio('./音/決定ボタンを押す31.mp3');
        audio.volume = slider_volume.value;
        audio.play();
        sakujogamen.style.display = 'block';
    });

    tenseitab.style.display = 'none';
    const tenseibtn = document.getElementById('tenseibtn');
    const tenseiok = document.getElementById('tenseiok');
    tenseibtn.addEventListener('click', () => {
        const audio = new Audio('./音/決定ボタンを押す31.mp3');
        audio.volume = slider_volume.value;
        audio.play();
        tenseitab.style.display = 'block';
        if(count >= tenseicount){
            tenseiok.style.opacity = '1';
        }
    });

    tenseikakunin.style.display = 'none';
    tenseiok.style.opacity = '0.6';
    tenseiok.addEventListener('click', () => {
        const audio = new Audio('./音/決定ボタンを押す31.mp3');
        audio.volume = slider_volume.value;
        audio.play();
        if(count >= tenseicount){
            tenseiok.style.opacity = '1';
            tenseikakunin.style.display = 'block';
        }
    });

    document.getElementById('point').textContent = formatNumberJP(point);
    function tensei(){
        setktensei(kirokutensei += 1n);
        tenseicount *= 2n;
        localStorage.setItem('tenseicount', tenseicount.toString());
        document.getElementById('tenseicount').innerText = `${formatNumberJP(tenseicount)}`;
        point += 50n;
        localStorage.setItem("point", point.toString());
        count = 0n;
        Lvcount = 0n;
        localStorage.setItem('Lvcount', Lvcount.toString());
        localStorage.setItem("count", count.toString());
        document.getElementById('point').textContent = formatNumberJP(point);
        localStorage.removeItem('nedan');
        localStorage.removeItem('Inedan');
        localStorage.removeItem('unedan');
        document.getElementById('kirokusakana').innerText = `${formatNumberJP(count)}`;
        document.getElementById('kirokuLv').innerText = `${formatNumberJP(Lvcount)}`;
        localStorage.removeItem('coun');
        setAndDisplaycoun(1n);
        localStorage.removeItem('coun1s');
        localStorage.removeItem("flagItm5");
        localStorage.removeItem("tapflag");
        localStorage.removeItem('get');
        localStorage.removeItem('questlvup');
        localStorage.removeItem("msakana");
        localStorage.removeItem("mItem");
        localStorage.removeItem("mmck");
        localStorage.removeItem('kirokuclick');
        setclick(0n);
        localStorage.removeItem('kirokucnedan');
        setcnedan(0n);
        localStorage.removeItem('kirokuIcount');
        setIcount(0n);
        localStorage.setItem("itemBuycount", 0);
        localStorage.setItem("itemBuyStartTime", Date.now());
        localStorage.setItem("item2StartTime", Date.now());
        localStorage.removeItem("item2Duration");
        localStorage.removeItem("motonedan");
        localStorage.removeItem("motocoun");
        timerdisplay.style.display = 'none';
        BUN_EVT2.style.textDecoration = 'none';
        BUN_EVT2.disabled = false;
        BUN_EVT.style.textDecoration = 'none';
        BUN_EVT.disabled = false;
        Item2flag = false;
        resetquestflag();
        location.reload();
    }

    //xボタンの動作
    function xbutton(event) {
        // audio[3].play();  // 効果音再生（任意）
        const audio = new Audio('./音/決定ボタンを押す50.mp3');
        audio.volume = slider_volume.value;
        audio.play();
        const button = event.currentTarget;
        const parent = button.parentElement;
        if (parent) {
            parent.classList.remove('show');         // opacity を 0 に
            parent.classList.add('fade-out');        // フェードアウトアニメーション

            parent.addEventListener('animationend', () => {
                parent.style.display = 'none';       // 非表示にする
                parent.classList.remove('fade-out'); // クラスを戻しておく
            }, { once: true });
        }
    }

    
    //ねこの表情とセリフ
    {
        const btn = document.getElementById('btn');
        btn.addEventListener('click', () => {
            const audio = new Audio('./音/決定ボタンを押す50.mp3');
            audio.volume = slider_volume.value;
            clickCount += 1
            if(clickCount==1){
                btn.textContent = '...ねこショップへようこそ';
                document.getElementById('cat').src='./images/ねこ2.png';
                clickCount+=1;
                audio.play();
            }
            else if(clickCount==3){
                btn.textContent = 'ここでは食べ物やプレゼントなどを売っています。';
                document.getElementById('cat').src='./images/ねこ4.png';
                clickCount++
                audio.play();
            }
            else if(clickCount==5){
                btn.textContent = '…ぜひ買ってくださいね';
                document.getElementById('cat').src='./images/ねこ3.png';
                clickCount++
                audio.play();
            }
            else if(clickCount){
                btn.textContent = 'こんにちは';
                document.getElementById('cat').src='./images/ねこ1.png';
                clickCount=0;
                audio.play();
            }
            
        })
    }
    //うさぎの表情とセリフ
    {
        const btnB = document.getElementById('btn2');
        btnB.addEventListener('click', () => {
            const audio = new Audio('./音/決定ボタンを押す50.mp3');
            audio.volume = slider_volume.value;
            clickCountB += 1
            if(clickCountB==1){
                btnB.textContent = 'アイテムショップへようこそ';
                document.getElementById('usagi').src='./images/usagi2.png'
                clickCountB+=1;
                audio.play();
            }
            else if(clickCountB==3){
                btnB.textContent = 'アイテムをクリックすると説明が見れます。';
                document.getElementById('usagi').src='./images/usagi3.png';
                clickCountB+=1;
                audio.play();
            }
            else if(clickCountB==5){
                btnB.textContent = 'ぜひ手に入れてくださいね！';
                document.getElementById('usagi').src='./images/usagi3.png';
                clickCountB++
                audio.play();
            }
            else if(clickCountB){
                btnB.textContent = 'いらっしゃいませ';
                document.getElementById('usagi').src='./images/usagi1.png';
                clickCountB=0;
                audio.play();
            }
            
        })
    }
    {
        const btnB = document.getElementById('btn3');
        btnB.addEventListener('click', () => {
            const audio = new Audio('./音/決定ボタンを押す50.mp3');
            audio.volume = slider_volume.value;
            clickCountc += 1
            if(clickCountc==1){
                btnB.textContent = '...';
                document.getElementById('usagi2').src='./images/うら3.png'
                clickCountc+=1;
                audio.play();
            }
            else if(clickCountc==3){
                btnB.textContent = 'ここではあなたの小判を使ってねこショップの食べ物の強化ができます';
                document.getElementById('usagi2').src='./images/うら2.png';
                clickCountc+=1;
                audio.play();
            }
            else if(clickCountc==5){
                btnB.textContent = 'やってみてくださいね';
                document.getElementById('usagi2').src='./images/うら2.png';
                clickCountc++
                audio.play();
            }
            else if(clickCountc){
                btnB.textContent = 'ようこそ';
                document.getElementById('usagi2').src='./images/うら1.png';
                clickCountc=0;
                audio.play();
            }
            
        })
    }
    //商品をクリックするとねこの表情が変わるようにする。
    function syouhinclick(){
        const audio = new Audio('./音/決定ボタンを押す50.mp3');
        audio.volume = slider_volume.value;
        btn.textContent = '🎶　　';
        document.getElementById('cat').src='./images/ねこ4.png';
        clickCount2+=1;
        audio.play();
        if(clickCount2==2){
            btn.textContent = 'こんにちは';
            document.getElementById('cat').src='./images/ねこ1.png';
            clickCount2=0;
            audio.play();
        }
    }

</script>