<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="UTF-8">
        <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0"> -->
        <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no">
        <link rel="stylesheet" href="style.css">
        <link href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css" rel="stylesheet">
        <link rel="icon" href="./favicon.ico" type="image/x-icon">
        <title>おさかなクリッカー</title>
    </head>

    <body>
        <!--ロード画面-->
        <div id="loading">
            <p id="loadp">ロード中</p>
            <div class="cp_loading12">
                <div class="cp_item"></div>
                <div class="cp_item"></div>
                <div class="cp_item"></div>
            </div>
            <span id="sikaku"></span>
        </div>

        <div class="header">
                <p class="my-parts" >#<span>お</span>さかなクリッカー</p>
                <button id="hatena"><i class="ri-question-fill"></i></button>
                <div class="headerbutton">
                    <button id="buttonAA" class="btnstyle">記録<i class="ri-bar-chart-fill"></i></button>
                    <button id="sbtn" class="btnstyle">設定<i class="ri-settings-3-fill"></i></button>
                </div>
                <div class="slidemoji">
                    <ul>
                        <li>▶︎おさかなクリッカーへようこそ!</li>
                        <li>お知らせ<i class="ri-phone-fill"></i>:<span class="textao">10/17アップデート!</span></li>
                        <li>2025/10/02 おさかなクリッカー公開!</li>
                        <li></li>
                        <li>設定で名前や音の大きさ、文字が変えられます</li>
                        <li></li>
                        <li></li>
                        <li>ヒント<i class="ri-lightbulb-line"></i>:最初はねこショップで食べ物<i class="ri-restaurant-fill"></i>を買いましょう</li>
                        <li></li>
                        <li></li>
                        <li>ヒント<i class="ri-lightbulb-line"></i>:ミッションをクリアしてレベルを上げましょう</li>
                        <li></li>
                        <li>左上の<i class="ri-question-fill"></i>で遊び方が確認できます</li>
                    </ul>    
                </div>
                <div id="counts">
                    <p class="counterr" id="countsakana"><span><i class="ri-money-cny-circle-fill"></i>魚 <span class="countup" id="counter">0</span></span></p>
                    <p class="coun" id="couns"><span><i class="ri-time-fill"></i><span id="coun1s">毎秒+0</span></span></p>
                    <p class="counterr" id="countlv"><span><i class="ri-star-fill"></i>レベル <span class="countup" id="inputLv">0</span></span></p>
                </div>
        </div>

        <div class="tab" id="hatenatab">
            <button class="xbutton" onclick="xbutton(event)"><i class="ri-close-fill"></i></button>
            <div class="scroll" id="s1">
                <h4>このゲームについて</h4>
                <details>
                    <summary>クレジット</summary>
                    <p>使用素材</p>
                    <ul>
                        <li>
                            アイコン素材：<strong>Remix Icon</strong> 様<br>
                            <a href="https://remixicon.com/" target="_blank" rel="noopener noreferrer">公式サイト</a>
                        </li>
                        <li>
                            一部画像素材：<strong>いらすとや</strong> 様<br>
                            <a href="https://www.irasutoya.com/" target="_blank" rel="noopener noreferrer">公式サイト</a>
                        </li>
                        <li>
                            一部画像素材：<strong>無料の猫イラスト素材専門サイト｜猫画工房</strong> 様<br>
                            <a href="https://nekoillust.com/" target="_blank" rel="noopener noreferrer">公式サイト</a>
                        </li>
                        <li>
                            効果音素材：<strong>OtoLogic</strong> 様<br>
                            <a href="https://otologic.jp/" target="_blank" rel="noopener noreferrer">公式サイト</a>
                        </li>
                        <li>
                            効果音素材：<strong>効果音ラボ</strong> 様<br>
                            <a href="https://soundeffect-lab.info/" target="_blank" rel="noopener noreferrer">公式サイト</a>
                        </li>
                    </ul>
                </details>
                <h4>遊び方</h4>
                <details>
                    <summary>遊び方</summary>
                    <ul>
                        <li>
                            <img src="./images/おさかな.png">
                            をクリックして<span class="tango">魚</span><i class="ri-money-cny-circle-fill"></i>を集めることができます。
                        </li>
                        <li>
                            集めた<span class="tango">魚</span>は、アイテムショップはねこショップで使用します。
                        </li>
                        <li>
                            <span class="tango">ねこショップ</span>で食べ物を買うと、1回のクリック<i class="ri-cursor-line"></i>で得られる<span class="tango">さかな</span>の量が増加します。
                        </li>
                    </ul>
                </details>
                <details>
                    <summary>レベルについて</summary>
                    <ul>
                        <li>
                            <span class="tango">レベル</span>は、<span class="tango">ウラショップ</span>の食べ物のクリック<i class="ri-cursor-line"></i>強化に使用します。
                        </li>
                        <li>
                            <span class="tango">レベル</span>を上げるには、<span class="tango">ミッション</span>をクリアしたり、食べ物を購入する必要があります。
                        </li>
                        <li>
                            <span class="tango">缶詰</span>は<span class="tango">10コ</span>購入するごとに、<span class="tango">レベル</span>が1上がります。
                        </li>
                        <li>
                            <span class="tango">キャットフード</span>と<span class="tango">高級缶詰</span>は、<span class="tango">5コ</span>購入するごとに<span class="tango">レベル</span>が1上がります。
                        </li>
                    </ul>
                </details>
                <details>
                    <summary>ミッションについて</summary>
                    <ul>
                        <li>
                            <span class="tango">ミッション</span>は、条件を達成することで<span class="tango">レベル</span>を上げることができるシステムです。
                        </li>
                        <li>
                            条件には、「魚を一定数集める」「ものを一定数購入する」などがあります。
                        </li>
                        <li>
                            <span class="tango">ミッション</span>を達成すると、<span class="tango">レベル</span>が上昇します。
                        </li>
                        <li>
                            一部の<span class="tango">ミッション</span>は、徐々に難易度が上がっていくものもあります。
                        </li>
                    </ul>
                </details>
            </div>
        </div>

        <div class="tap">
            <div>
                <div id="target" onclick="hit()">
                    <img src='./images/おさかな.png' id="sakana">
                    <img  class="tcicon" id="tapicon" src="./images/computer_cursor_finger_white.png">
                    <img  class="tcicon" id="clickicon" src="./images/nikukyu_shiro.png">
                    <P id="upsakana">+1</P>
                    <p class="coun"><span><i class="ri-cursor-line"></i><span id="coun">+0</span></span></p>
                </div>
            </div>
        </div>

        <button class="yokobtn" id="tst">ミッション<i class="ri-todo-fill"></i></button>

        <!-- ミッション-->
        <div class="mmm2"id="mii2">
            <button class="xbutton" id="xx2" onclick="xbutton(event)"><i class="ri-close-fill"></i></button>
            <div class="scroll" id="s2">
                <nobr>ミッション</nobr>
                <div class="mtext2">
                    <div id="ato">
                        <button id="atobtn"><i class="ri-bar-chart-fill"></i></button>
                        <button id="atojiru"><i class="ri-close-fill"></i></button>
                    </div>
                    <div class="mscroll">
                        <p id="mq12" class="mt2">ミッション１</p>
                        <p class="mt3" id="ato12">クリアまであと...</p>
                        <p id="mq22" class="mt2">ミッション２</p>
                        <p class="mt3" id="ato22">クリアまであと...</p>
                        <p id="mq32" class="mt2">ミッション３</p>
                        <p class="mt3" id="ato32">クリアまであと...</p>
                        <p id="mq42" class="mt2">魚を1000コ以上集める Lv+10↑</i></p>
                        <p class="mt3" id="ato42">クリアまであと...</p>
                        <p id="mq52" class="mt2">魚を10000コ以上集める Lv+30↑</i></p>
                        <p class="mt3" id="ato52">クリアまであと...</p>
                        <p id="mq62" class="mt2">魚を100000コ以上集める Lv+50↑</p>
                        <p class="mt3" id="ato62">クリアまであと...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 設定 -->
        <div  id="scon" class="tab">
            <button class="xbutton" id="x4" onclick="xbutton(event)"><i class="ri-close-fill"></i></button>
            <div class="scroll" id="s3">
                <div class="tab-2">
                    <label>
                        <input type="radio" name="tab-2" checked>
                        名前<i class="ri-user-fill"></i>
                    </label>
                    <div>
                        <div class="settei">
                            <p class="marker" id="dbtn"><i class="ri-file-text-fill"></i><span>名前の設定</span></p>
                            <hr>
                            <input type="text" id="inputName" maxlength="25" placeholder="✒︎...名前を入力">
                            <div class="onryou">
                                <button onclick="saveName()" class="setteibtn" id="save">保存</button>
                                <button onclick="clearName()" class="setteibtn" id="sakujo">削除</button>
                            </div>
                            <p class="hint"><i class="ri-lightbulb-line"></i>:初期値は名無しです。</p>
                            <p class="hint"><i class="ri-lightbulb-line"></i>:名前は記録に表示されます。</p>
                            <hr>
                        </div>
                    </div>
                
                    <label>
                        <input type="radio" name="tab-2">
                        音<i class="ri-headphone-fill"></i>
                    </label>
                    <div>
                        <div class="settei">
                            <p class="marker" id="dbtn"><i class="ri-music-fill"></i><span>音の設定</span></p>
                            <hr>
                            <div class="onryou">
                                <i class="ri-volume-mute-line"></i>
                                <input type="range" id="volume" value="0.5" min="0.0" max="1.0" step="0.1">
                                <i class="ri-volume-up-line"></i>
                            </div>
                            <button class="setteibtn" id="ototst">音量テスト</button>
                            <button class="setteibtn" id="btn_reset">音量リセット</button>
                            <hr>
                        </div>
                    </div>
                
                    <label>
                        <input type="radio" name="tab-2">
                        フォント<i class="ri-font-size"></i>
                    </label>
                    <div>
                        <div class="settei">
                            <p class="marker" id="dbtn"><img src="./images/font-sans.png"><span>フォントの設定</span></p>
                            <hr>
                            <p>フォントを変更</p>
                            <div id="fontkaeru">
                                <button class="fontbtn" onclick="changeFont('Chalk')">チョークS（デフォルト）</button>
                                <button class="fontbtn" id="f2" onclick="changeFont('Comic sans MS')">Comic sans</button>
                                <button class="fontbtn" id="f3" onclick="changeFont('elmer')">えるまー</button>
                                <button class="fontbtn" id="f4" onclick="changeFont('kuramubon')">くらむぼん</button>
                                <button class="fontbtn" id="f5" onclick="changeFont('mochiy')">モッチーポップ</button>
                                <button class="fontbtn" id="f6" onclick="changeFont('bananaslip_plus')">バナナスリップ</button>
                                <button class="fontbtn" id="f7" onclick="changeFont('yusei')">油性マジック</button>
                                <button class="fontbtn" id="f8" onclick="changeFont('crayon')">殴り書きクレヨン</button>
                            </div>
                            <p class="hint"><i class="ri-lightbulb-line"></i>:スクロールできます。</p>
                            <hr>
                            <p>フォントの大きさ</p>
                            <button class="setteibtn" id="fA" onclick="changeFontSize(1)">+1</button>
                            <button class="setteibtn" id="fC" onclick="changeFontSize(-1)">-1</button>
                            <button onclick="resetFontSize()" class="setteibtn" id="riset">リセット</button>
                            <p class="txt">サンプル文字</p>
                            <hr>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <div id="kiroku" class="tab">
            <button class="xbutton" id="x1" onclick="xbutton(event)"><i class="ri-close-fill"></i></button>
            <div id="dkiroku">
                <div id="d1" class="d">
                    <span class="marker" id="output">ここに結果が表示されます。</span><span class="marker">記録</span>
                    <p><span id="catcount">0</span><img class="catimage" id="catimg1" src="./images/526f8894d2a6851c7a6de6f137af6e68.png"></p>
                    <img id="data" src="./images/1f23085c8632289aed6b0c83d47f5cfc.png">
                    <p id="cathyouji">クリック数<span id="catcc">000</span>突破!魚<span id="catgetsakana">000</span>コをゲット!</p>
                    <button class="btnstyle" id="catreset"><i class="ri-focus-3-line"></i>位置をリセット</button>
                    <button class="btnstyle" id="datasakujo"><i class="ri-delete-bin-2-fill"></i>データを削除</button>
                </div>
                <div id="d2" class="d">
                    <p>レベル: <span class="marker" id="kirokuLv"></span></p>
                    <p>クリック数: <span class="marker" id="kirokuclick"></span></p>
                    <p>魚を集めた数: <span class="marker" id="kirokusakana"></span></p>
                    <p>魚を集めた数(合計): <span class="marker" id="kirokusakanas"></span></p>
                    <p>魚を使った数: <span class="marker" id="kirokusakanasiyou"></span></p>
                    <p>物を買った数: <span class="marker" id="kirokumono"></span></p>
                </div>
            </div>
        </div>

        <div class="tab" id="sakujogamen">
            <div id="eee">
                <img src="./images/ねこ3.png">
                <p class="bbb">本当に削除しますか？</p>
            </div>
            <button  class="sakujo" onclick="xbutton(event)">いいえ</button>
            <button  class="sakujo" onclick="resetCount()">データを削除</button>
        </div>

        <!--効果音-->
        <audio class="koukaon" src="音/決定ボタンを押す12.mp3"></audio><!--1-->
        <audio class="koukaon" src="音/決定ボタンを押す31.mp3"></audio><!--3-->
        <audio class="koukaon" src="音/決定ボタンを押す45.mp3"></audio><!--5-->
        <audio class="koukaon" src="音/決定ボタンを押す50.mp3"></audio><!--6-->


        <!--con1-->
        <div class="con1">
            <p id="Ishop" class="shopname"><i class="ri-store-line"></i><span>ア</span>イテムショップ</p>
            <div id="itemshop">
                <div>
                    <img src="./images/usagi1.png"id="usagi"><button id="btn2" class="bbb"><p>いらっしゃいませ</p></button>
                    <p><span class="tooltip-text" id="i1">魚が150貰えます。</span><span class="setumei">説明</span></p>
                </div>
                <div class="Itembox">  
                    <div class="Itemcontents"> 
                        <div class="Itemm" id="im1">
                            <div class="Itm" title="アイテム1" >
                                <p class="txt">150魚<i class="ri-money-cny-circle-fill"></i></p>
                                <img class="Itemphoto" src="./images/おさかな.png">
                                <p id="photo1">+150</p>
                                <p><span id="Itm1buy" class="nee">あと5コ</span></p>
                                <p id="Inedan" class="nee">0魚</p>
                                <button id="Item" class="Itembtn">購入する</button>
                            </div>
                        </div>
                        <div class="Itemm" id="im2">
                            <div class="Itm" title="アイテム2" >
                                <p class="txt">セールの張り紙<i class="ri-money-cny-circle-fill"></i><i class="ri-restaurant-fill"></i></p>
                                <img  class="Itemphoto" src="./images/pop_sale.png">
                                <p id="Inedan2" class="nee">800魚</p>
                                <button id="Item2" class="Itembtn">購入する</button>
                            </div>
                        </div>
                        <div class="Itemm" id="im3">
                            <div class="Itm" title="アイテム3" >
                                <p class="txt">ねこみくじ<i class="ri-restaurant-fill"></i></p>
                                <img  class="Itemphoto" src="./images/syougatsu2_omijikuji2.png">
                                <p id="Inedan4" class="nee">100魚</p>
                                <button id="Item4" class="Itembtn">購入する</button>
                            </div>
                        </div>
                        <div class="Itemm" id="im4">
                            <div class="Itm" title="アイテム4" >
                                <p class="txt">ねこの手<i class="ri-cursor-line"></i><i class="ri-timer-fill"></i></p>
                                <img  class="Itemphoto" src="./images/cat_fish_run.png">
                                <p id="photo2">魚+5</p>
                                <p><i class="ri-cursor-line"></i><span>+5</span></p>
                                <p id="Inedan5" class="nee">650魚</p>
                                <button id="Item5" class="Itembtn">購入する</button>
                            </div>
                        </div>
                    </div> 
                </div> 
            </div>
        </div>
            
        <div class="contents con2">
            <p id="catshop" class="shopname"><i class="ri-store-line"></i><span>ね</span>こショップ</p>
            <div id="oyatuclass">
                <div>
                    <img src='./images/ねこ1.png'id="cat"><button id="btn" class="bbb"><p>こんにちは</p></button> 
                    <p id="I2tt">セール中!!<img src="./images/260e7b51ae567910688098570070af62.png" id="nekonote"></p>
                    <div id="timerdisplay"></div>
                </div>
                <div class="oyatubox">
                    <div class="oyatukau">
                        <i class="ri-shopping-basket-fill"></i>
                        <button id="plus10" class="pm">+10</button>
                        <button id="plus" class="pm">+1</button><!-- プラス -->
                        <button id="kau">1</button>
                        <button id="minus" class="pm">-1</button><!-- マイナス -->
                        <button id="minus10" class="pm">-10</button>
                    </div>
                    <div id="oyatuclass2">
                        <div id="oyatuu" class="oyatudiv"title="食べ物1" >
                            <p class="txt">缶詰<i class="ri-restaurant-fill"></i></p>
                            <button class="oyatu" id="oyatu" onclick="syouhinclick()">
                                <img src="./images/pet_food_cat_can.png">
                                <span class="sale">セール中!</span>
                            </button>
                            <p><span id="get" class="up">所持数　×0</span></p>
                            <p><i class="ri-cursor-line"></i><span id="+cnt2" class="up">+0</span></p>
                            <p><span id="nedan" class="line">20魚</span></p>
                            <button id="button1" class="text">購入する</button>
                        </div>
                        <div id="oyatutu" class="oyatudiv"title="食べ物2" >
                            <p class="txt">キャットフード<i class="ri-restaurant-fill"></i></p>
                            <button class="oyatu" id="hood" onclick="syouhinclick()">
                                <img src="./images/pet_food_cat.png">
                                <span class="sale">セール中!</span>
                            </button>
                            <p><span id="get2" class="up">所持数　×0</span></p>
                            <p><i class="ri-cursor-line"></i><span id="+cnt3" class="up">+0</span></p>
                            <p><span id="nedan2" class="line">80魚</span></p>
                            <button id="button2" class="text">購入する</button>
                        </div>
                        <div id="oyatu3" class="oyatudiv"title="食べ物3" >
                            <p class="txt">高級缶詰<i class="ri-restaurant-fill"></i></p>
                            <button class="oyatu"onclick="syouhinclick()">
                                <img src="./images/kandume_koukyuu.png">
                                <span class="sale">セール中!</span>
                            </button>
                            <p><span id="get3" class="up">所持数　×0</span></p>
                            <p><i class="ri-cursor-line"></i><span id="+cnt4" class="up">+0</span></p>
                            <p><span id="nedan3" class="line">150魚</span></p>
                            <button id="button3" class="text">購入する</button>
                        </div>
                        <div id="oyatu4" class="oyatudiv">
                            <p class="txt">オヤツ<i class="ri-restaurant-fill"></i></p>
                            <button class="oyatu"onclick="syouhinclick()">
                                <img src="./images/pet_oyatsu_cat.png">
                                <span class="sale">セール中!</span>
                            </button>
                            <p><span id="get4" class="up">所持数　×0</span></p>
                            <p><i class="ri-cursor-line"></i><span id="+cnt5" class="up">+50</span></p>
                            <p><span id="nedan4" class="line">800魚</span></p>
                            <button id="button4" class="text">購入する</button>
                        </div>
                        <div id="oyatu5" class="oyatudiv">
                            <p class="txt">ケーキ<i class="ri-gift-fill"></i></p>
                            <button class="oyatu"><img src="./images/pet_cat_birthday_cake.png"></button>
                            <p><span id="get5" class="up">所持数　×0</span></p>
                            <p><i class="ri-cursor-line"></i><span id="+cnt6" class="up">x2</span></p>
                            <p><span id="nedan5" class="line">1000魚</span></p>
                            <button id="button5" class="text">購入する</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="contents con3">
            <p id="urashop" class="shopname"><i class="ri-tools-line"></i><span>ウ</span>ラショップ</p>
            <div id="ushop">
                    <div>
                    <img src="./images/うら1.png"id="usagi2"><button id="btn3" class="bbb"><p>ようこそ</p></button>
                    </div>
                    <div class="urabox">
                    <div id="uuushop">
                        <div id="uramono" class="UUU">
                            <p class="txt">缶詰の強化<i class="ri-auction-fill"></i></p>
                            <p class="up"><i class="ri-cursor-line"></i><span id="moto">+0</span> → <span id="kyouka">+?</span></p>
                            <p><span id="unedan1" class="line">5レベル</span></p>
                            <button class="text" id="kyoukabutton">強化する</button>
                        </div>
                        <div id="ura2" class="UUU">
                            <p class="txt">キャットフードの強化<i class="ri-auction-fill"></i></p>
                            <p class="up"><i class="ri-cursor-line"></i><span id="moto2">+0</span> → <span id="kyouka2">+?</span></p>
                            <p><span id="unedan2" class="line">10レベル</span></p>
                            <button class="text" id="kyoukabutton2">強化する</button>
                        </div>
                        <div id="ura3" class="UUU">
                            <p class="txt">高級缶詰の強化<i class="ri-auction-fill"></i></p>
                            <p class="up"><i class="ri-cursor-line"></i><span id="moto3">+0</span> → <span id="kyouka3">+?</span></p>
                            <p><span id="unedan3" class="line">15レベル</span></p>
                            <button class="text" id="kyoukabutton3">強化する</button>
                        </div>
                        <div id="ura4" class="UUU">
                            <p class="txt">オヤツの強化<i class="ri-auction-fill"></i></p>
                            <p class="up"><i class="ri-cursor-line"></i><span id="moto4">+0</span> → <span id="kyouka4">+?</span></p>
                            <p><span id="unedan4" class="line">45レベル</span></p>
                            <button class="text" id="kyoukabutton4">強化する</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <a href="#" class="scrollbtn"  id="scrollToggleBtn">
            <img id="slicon" src="./images/うら1.png">
            <i class="ri-arrow-up-circle-fill" id="scrollIcon"></i>
        </a>
        
        <div class="tab" id="kekka">
            <h3>ねこみくじの結果<i class="ri-sticky-note-fill"></i></h3>
            <button class="xbutton" id="kikerubutton" onclick="xbutton(event)"><i class="ri-close-fill"></i></button>
            <span id="gazou"></span>
            <span id="kuji"></span>
            <p id="bangou">0番</p>
        </div>
            
        <div id="ooo">
            <p class="ok" id="o1"><i class="ri-todo-fill"></i>ミッションクリア!</p>
            <p class="ok" id="o2"><i class="ri-star-fill"></i>レベルアップ!</p>
            <p class="ok" id="o3"><i class="ri-shopping-cart-fill"></i>購入完了!</p>
            <p class="ok" id="o4"><i class="ri-error-warning-fill"></i>魚が足りません</p>
            <p class="ok" id="o5"><i class="ri-error-warning-fill"></i>レベルが足りません</p>
            <p class="ok" id="o6"><i class="ri-save-fill"></i>保存されました</p>
            <p class="ok" id="o7"><i class="ri-delete-bin-2-fill"></i>削除されました</p>
            <p class="ok" id="o8"><i class="ri-auction-fill"></i>強化完了!</p>
        </div>
    </body>
</html>
<script>
    let count = 0;//魚の数✔︎               ✔︎:完了 ✖︎:やらなくていい ⚪︎:未完了
    let Lvcount = 0;//レベル✔︎
    let coun = 1;//魚をクリックして増える数✔︎
    let coun1s=0;//Item5自動クリック✔︎
    let counttt= 0;//総クリック数　記録✔︎
    let countb = 0;//魚を集めた数合計　記録✔︎
    let countnedan =0;//魚を使った数　記録✔︎
    let Icount =0;//商品を買った数　記録✔︎
    // let Itemcount =0;//アイテムを買った数
    let get = JSON.parse(localStorage.getItem("get") || "[0,0,0,0,0]");//ねこショップのものを買った数✔︎
    let kaukazu =1;//ねこショップのものを買う数を決める✖︎
    // let nedan = [20,80,150];//ねこショップの値段✔︎
    // let Inedan = [760,800,50,100,1200];
    let Inedan = JSON.parse(localStorage.getItem("Inedan") || "[0,800,100,650]");//アイテムショップの値段✔︎
    let unedan = JSON.parse(localStorage.getItem("unedan") || "[5,10,15,45]");//ウラショップの値段✔︎
    let counnt = JSON.parse(localStorage.getItem("counnt") || "[2,5,10,50]");//ねこショップのものを買ってクリックが増える数✔︎
    // let msakana = 170;//魚を集めるミッション⚪︎
    // let mItem = 10;//アイテムを買うミッション⚪︎
    // let mmck = 100;//クリックするミッション⚪︎
    let msakana = Number(localStorage.getItem("msakana") || 170);
    let mItem = Number(localStorage.getItem("mItem") || 10);
    let mmck = Number(localStorage.getItem("mmck") || 100);
    // let questlvup = [1,1,1];
    let questlvup = JSON.parse(localStorage.getItem("questlvup") || "[1,1,1]");//ミッションでレベルアップする数✔︎
    let mqest1 =["魚を","ものを","魚を"];
    let questclear1 = false;
    let questclear2 = false;
    let questclear3 = false;
    let flagItm5 = false;
    let clickCount =0;//catセリフ✖︎
    let clickCount2 =0;//cat表情✖︎
    let clickCountB =0;//usagiセリフ✖︎
    let clickCountc =0;//uranyankoセリフ✖︎
    let itm5timer = null;

    //ロード画面
    window.onload = function () {
        const spinner = document.getElementById("loading");
        spinner.classList.add("loaded");
        oyatustyles();
        shopItemStyles();
        urashopStyles();
        btn5();
        loadNedan();
        document.getElementById('catcc').innerText = `${catcount}`;
        document.getElementById('catgetsakana').innerText = `${catget}`;
        questclear1 = localStorage.getItem("questclear1") === "true";
        questclear2 = localStorage.getItem("questclear2") === "true";
        questclear3 = localStorage.getItem("questclear3") === "true";
        flagItm5 = localStorage.getItem("flagItm5") === "true";
        Itm5flag();
        questflag();
        resumeItem2Timer();
    };


    function ok1() {//ミッションクリア
        // 新しいpを作る
        const msg = document.createElement('p');
        msg.innerHTML = '<i class="ri-todo-fill"></i>ミッションクリア!';
        msg.style.zIndex = 1000;
        msg.classList.add('ok','o1-style');
        document.body.appendChild(msg);
        setTimeout(() => {
            msg.remove();
        }, 900);
    }
    function ok2() {//レベルアップ
        // 新しいpを作る
        const msg = document.createElement('p');
        msg.innerHTML = '<i class="ri-star-fill"></i>レベルアップ!';
        msg.style.zIndex = 1000;
        msg.classList.add('ok','o2-style');
        document.body.appendChild(msg);
        setTimeout(() => {
            msg.remove();
        }, 900);
    }
    function ok3() {//購入完了
        // 新しいpを作る
        const msg = document.createElement('p');
        msg.innerHTML = '<i class="ri-shopping-cart-fill"></i>購入完了!';
        msg.style.zIndex = 1000;
        msg.classList.add('ok','o3-style');
        document.body.appendChild(msg);
        setTimeout(() => {
            msg.remove();
        }, 900);
    }
    function ok4() {//購入失敗したとき（魚）
        // 新しいpを作る
        const msg = document.createElement('p');
        msg.innerHTML = '<i class="ri-error-warning-fill"></i>魚が足りません';
        msg.style.zIndex = 1000;
        msg.classList.add('ok');
        document.body.appendChild(msg);
        setTimeout(() => {
            msg.remove();
        }, 900);
    }
    function ok5() {//購入失敗したとき（レベル）
        // 新しいpを作る
        const msg = document.createElement('p');
        msg.innerHTML = '<i class="ri-error-warning-fill"></i>レベルが足りません';
        msg.style.zIndex = 1000;
        msg.classList.add('ok');
        document.body.appendChild(msg);
        setTimeout(() => {
            msg.remove();
        }, 900);
    }
    function ok6() {//保存されたとき
        // 新しいpを作る
        const msg = document.createElement('p');
        msg.innerHTML = '<i class="ri-save-fill"></i>保存されました';
        msg.style.zIndex = 1000;
        msg.classList.add('ok');
        document.body.appendChild(msg);
        setTimeout(() => {
            msg.remove();
        }, 900);
    }
    function ok7() {//削除されたとき
        // 新しいpを作る
        const msg = document.createElement('p');
        msg.innerHTML = '<i class="ri-delete-bin-2-fill"></i>削除されました';
        msg.style.zIndex = 1000;
        msg.classList.add('ok');
        document.body.appendChild(msg);
        setTimeout(() => {
            msg.remove();
        }, 900);
    }
    function ok8() {//強化完了したとき
        // 新しいpを作る
        const msg = document.createElement('p');
        msg.innerHTML = '<i class="ri-auction-fill"></i>強化完了!';
        msg.style.zIndex = 1000;
        msg.classList.add('ok','o3-style');
        document.body.appendChild(msg);
        setTimeout(() => {
            msg.remove();
        }, 900);
    }

    //データ削除ボタン
    function resetCount() {
      ok7();
      sakujogamen.style.display = 'none';
      localStorage.removeItem('Count');
      setAndDisplayCount(0);
      document.getElementById('kirokusakana').innerText = `${count}`;
      document.getElementById('ato42').innerText = `クリアまであと${1000-count}コ`;
      document.getElementById('ato52').innerText = `クリアまであと${10000-count}コ`;
      document.getElementById('ato62').innerText = `クリアまであと${100000-count}コ`;
      localStorage.removeItem('Lvcount');
      setAndDisplayLv(0);
      document.getElementById('kirokuLv').innerText = `${Lvcount}`;
      localStorage.removeItem('coun');
      setAndDisplaycoun(1);
      localStorage.removeItem('coun1s');
      setcs(0);
      localStorage.removeItem("flagItm5");
      localStorage.removeItem("tapflag");
      //猫ショップのもの
      localStorage.removeItem('get');
      localStorage.setItem("get", JSON.stringify([0,0,0,0,0]));
      resetNedan();
      oyatustyles();
      shopItemStyles();
      urashopStyles();
      btn5();
      localStorage.removeItem('userName');
      document.getElementById('output').textContent = '名無しさんの';
      localStorage.setItem("Inedan", JSON.stringify([0, 800, 100, 650]));
      localStorage.setItem("unedan", JSON.stringify([5,10,15,45]));
      localStorage.setItem("counnt", JSON.stringify([2,5,10,50]));
      localStorage.setItem("questlvup", JSON.stringify([1,1,1]));
      document.getElementById('Inedan').innerText = `${Inedan[0]}魚`;
      document.getElementById('Inedan2').innerText = `${Inedan[1]}魚`;
      document.getElementById('Inedan4').innerText = `${Inedan[2]}魚`;
      document.getElementById('Inedan5').innerText = `${Inedan[3]}魚`;
      document.getElementById('unedan1').innerText = `${unedan[0]}レベル`;
      document.getElementById('unedan2').innerText = `${unedan[1]}レベル`;
      document.getElementById('unedan3').innerText = `${unedan[2]}レベル`;
      document.getElementById('unedan4').innerText = `${unedan[3]}レベル`;
      document.getElementById('moto').innerText = `+${counnt[0]}`;
      document.getElementById('kyouka').innerText = `+${counnt[0]+5}`;
      document.getElementById('moto2').innerText = `+${counnt[1]}`;
      document.getElementById('kyouka2').innerText = `+${counnt[1]+5}`;
      document.getElementById('moto3').innerText = `+${counnt[2]}`;
      document.getElementById('kyouka3').innerText = `+${counnt[2]+5}`;
      document.getElementById('moto4').innerText = `+${counnt[3]}`;
      document.getElementById('kyouka4').innerText = `+${counnt[3]+5}`;
      //記録
      localStorage.removeItem('counttt');
      setclick(0);
      localStorage.removeItem('countb');
      setnibosi(0);
      localStorage.removeItem('countnedan');
      setcnedan(0);
      localStorage.removeItem('Icount');
      setIcount(0);
      resetquestflag();
      localStorage.setItem("msakana", 170);
      localStorage.setItem("mItem", 10);
      localStorage.setItem("mmck", 100);
      mq12.textContent = mqest1[0]+msakana+"コ集める Lv+"+questlvup[0]+"↑";
      mq22.textContent = mqest1[1]+mItem+"コ買う Lv+"+questlvup[1]+"↑";
      mq32.textContent = mqest1[2]+mmck+"回クリックする Lv+"+questlvup[2]+"↑";
      document.getElementById('ato12').innerText = `クリアまであと${msakana-count}コ`;
      document.getElementById('ato22').innerText = `クリアまであと${mItem-Icount}コ`;
      document.getElementById('ato32').innerText = `クリアまであと${mmck-counttt}回`;
      localStorage.setItem("itemBuyCount", 0);
      localStorage.setItem("itemBuyStartTime", Date.now());
      Item1BuyStatus();
      localStorage.setItem("item2StartTime", Date.now());
      localStorage.removeItem("item2Duration");
      localStorage.removeItem("motonedan");
      catcount = 0;
      catget = 100;
      document.getElementById('catcount').innerText = '0';
      localStorage.removeItem("catcount");
      document.getElementById('catgetsakana').innerText = '100';
      localStorage.removeItem("catget");
      I2tt.style.opacity = 0;
      document.querySelectorAll('.sale').forEach(el => {
        el.style.opacity = 0;
      });
      timerdisplay.style.display = 'none';
      BUN_EVT2.style.textDecoration = 'none';
      BUN_EVT2.disabled = false;
      BUN_EVT.style.textDecoration = 'none';
      BUN_EVT.disabled = false;
      Item2flag = false;
      console.log('最後にリロード実行');
      location.reload();
    }
    //フォントを読み込む
    window.addEventListener('DOMContentLoaded', () => {
    const savefont = sessionStorage.getItem('selectfont');
        if (savefont) {
            changeFont(savefont);
        }
    });
    // ページ読み込み時に適用
    window.addEventListener('DOMContentLoaded', () => {
        const savedSize = Number(sessionStorage.getItem('selectsize') || 0);
        if (savedSize !== 0) {
            changeFontSize(0); // 差分で現在サイズを適用
        }
    });

    // ページ読み込み時に表示
    window.addEventListener('DOMContentLoaded', displayName)
    // ページ読み込み時にカウントを表示
    window.addEventListener('DOMContentLoaded', loadCount);
    //デバッグ用：ブラウザコンソールで使える関数
    window.setcount = setAndDisplayCount;
    window.setcoun = setAndDisplaycoun;
    window.setlv = setAndDisplayLv;
    window.set1s = setcs;
    // ページ読み込み時にcounを表示
    window.addEventListener('DOMContentLoaded', loadcoun);
    window.addEventListener('DOMContentLoaded', loadcs);
    // ページ読み込み時にレベルを表示
    window.addEventListener('DOMContentLoaded', loadLv);
    //記録
    window.addEventListener('DOMContentLoaded', loadclick);
    window.addEventListener('DOMContentLoaded', loadnibosi);
    window.addEventListener('DOMContentLoaded', loadcnedan);
    window.addEventListener('DOMContentLoaded', loadIcount);

    //名前を保存
    // 表示用関数
    function displayName() {
      const savedName = localStorage.getItem('userName');
      if (savedName) {
        document.getElementById('output').textContent = `${savedName}さんの`;
      } else {
        document.getElementById('output').textContent = '名無しさんの';
      }
    }
    // 名前保存ボタンの関数
    function saveName() {
      ok6();
      const name = document.getElementById('inputName').value;
      localStorage.setItem('userName', name);
      displayName();
    }
    // 名前削除ボタンの関数
    function clearName() {
      ok7();
      localStorage.removeItem('userName');
      document.getElementById('output').textContent = '名無しさんの';
    }

    // count を保存しつつ表示を更新する共通関数
    function setAndDisplayCount(newCount) {
      count = newCount;
      localStorage.setItem('count', count);
      document.getElementById('counter').textContent = count;
    }
    function loadCount() {
      const saved = localStorage.getItem('count');
      const initial = saved ? parseInt(saved, 10) : 0;
      setAndDisplayCount(initial); // ← 保存内容を使って初期表示
    }

    //レベル
    function setAndDisplayLv(newLv) {
        Lvcount = newLv;
        localStorage.setItem('inputLv', Lvcount);
        document.getElementById('inputLv').textContent = Lvcount;
    }
    function loadLv() {
        const savedLv = localStorage.getItem('inputLv');
        const initialLv = savedLv ? parseInt(savedLv, 10) : 0;
        setAndDisplayLv(initialLv);
    }

   //coun
   function setAndDisplaycoun(newcoun) {
        coun = newcoun;
        localStorage.setItem('coun', coun);
        document.getElementById('coun').textContent = '+' + coun;
    }
    function loadcoun() {
        const savedcoun = localStorage.getItem('coun');
        const initialcoun = savedcoun ? parseInt(savedcoun, 10) : 1;
        setAndDisplaycoun(initialcoun);
    }

    //coun1s
    function setcs(newcs) {
        coun1s = newcs;
        localStorage.setItem('coun1s', coun1s);
        document.getElementById('coun1s').textContent = '毎秒+' + coun1s;
    }
    function loadcs() {
        const savedcs = localStorage.getItem('coun1s');
        const initialcs = savedcs ? parseInt(savedcs, 10) : 0;
        setcs(initialcs);
    }

    //ねこショップの値段を保存
    function saveNedan(nedanArray) {
        const cleanNedan = nedanArray.map(item => Number(Array.isArray(item) ? item[0] : item));
        localStorage.setItem('nedan', JSON.stringify(cleanNedan));
    }
    function loadNedan() {
        const saved = localStorage.getItem('nedan');
        if (saved) {
            return JSON.parse(saved).map(n => Number(Array.isArray(n) ? n[0] : n));
        } else {
            const defaultNedan = [20, 80, 150, 800, 1000]; // 初期値
            saveNedan(defaultNedan);
            return defaultNedan;
        }
    }
    let nedan = loadNedan();
    //削除するときの関数(nedan)
    function resetNedan() {
        const defaultNedan = [20, 80, 150, 800, 1000];
        localStorage.setItem('nedan', JSON.stringify(defaultNedan));
        nedan = defaultNedan; // グローバル変数も上書き
        document.getElementById('nedan').innerText = `${nedan[0]}魚`; // 表示更新
        document.getElementById('nedan2').innerText = `${nedan[1]}魚`; // 表示更新
        document.getElementById('nedan3').innerText = `${nedan[2]}魚`; // 表示更新
        document.getElementById('nedan4').innerText = `${nedan[3]}魚`; // 表示更新
        document.getElementById('nedan5').innerText = `${nedan[4]}魚`; // 表示更新
    }
    saveNedan(nedan);

    //記録
    //総クリック数counttt
    function setclick(newclick) {
        counttt = newclick;
        localStorage.setItem('kirokuclick', counttt);
        document.getElementById('kirokuclick').textContent = counttt;
    }
    function loadclick() {
        const savedclick = localStorage.getItem('kirokuclick');
        const initialclick = savedclick ? parseInt(savedclick, 10) : 0;
        setclick(initialclick);
    }
    // クリック数を1増やす関数
    function clickplus() {
        setclick(counttt + 1);
    }
    //魚を集めた数（合計）countb
    function setnibosi(getnibosi) {
        countb = getnibosi;
        localStorage.setItem('kirokunibosi', countb);
        document.getElementById('kirokusakanas').textContent = countb;
    }
    function loadnibosi() {
        const savednibosi = localStorage.getItem('kirokunibosi');
        const initialnibosi = savednibosi ? parseInt(savednibosi, 10) : 0;
        setnibosi(initialnibosi);
    }
    //魚を使った数countnedan
    function setcnedan(getcnedan) {
        countnedan = getcnedan;
        localStorage.setItem('kirokucnedan', countnedan);
        document.getElementById('kirokusakanasiyou').textContent = countnedan;
    }
    function loadcnedan() {
        const savedcnedan = localStorage.getItem('kirokucnedan');
        const initialcnedan = savedcnedan ? parseInt(savedcnedan, 10) : 0;
        setcnedan(initialcnedan);
    }
    //商品を買った数Icount
    function setIcount(getIcount) {
        Icount = getIcount;
        localStorage.setItem('kirokuIcount', Icount);
        document.getElementById('kirokumono').textContent = Icount;
    }
    function loadIcount() {
        const savedIcount = localStorage.getItem('kirokuIcount');
        const initialIcount = savedIcount ? parseInt(savedIcount, 10) : 0;
        setIcount(initialIcount);
    }

    //スクロールボタン
    document.addEventListener('DOMContentLoaded', function () {
        const scrollBtn = document.getElementById('scrollToggleBtn');
        const scrollIcon = document.getElementById('scrollIcon');
        const slicon = document.getElementById('slicon');

        let goDown = true;

        scrollBtn.addEventListener('click', function (e) {
        e.preventDefault();
        if (goDown) {
            window.scrollTo({
                top: document.documentElement.scrollHeight,
                behavior: 'smooth'
            });
        } else {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }
        });

        window.addEventListener('scroll', function () {
        if (window.scrollY < window.innerHeight / 2) {
            goDown = true;
            scrollIcon.classList.remove('rotate-up');
            scrollIcon.classList.add('rotate-down');
            document.getElementById('slicon').src='./images/うら1.png';
        } else {
            goDown = false;
            scrollIcon.classList.remove('rotate-down');
            scrollIcon.classList.add('rotate-up');
            document.getElementById('slicon').src='./images/usagi1.png';
        }
        });

        // 初期状態を反映
        window.dispatchEvent(new Event('scroll'));
    });


    const clickicon = document.getElementById("clickicon");
    const tapicon = document.getElementById("tapicon");
    upsakana.style.display = 'none';
    tapicon.style.display = 'block';
    clickicon.style.display = 'none';
    const hit = () =>
    {
        uposakana(event.clientX, event.clientY);
        tapicon.style.display = 'none';
        //カウント（魚）を増やす
        let count = Number(localStorage.getItem("count") || 0);
        let coun = Number(localStorage.getItem("coun"));
        localStorage.setItem('coun', coun);
        count+=coun;
        localStorage.setItem('count', count);
        document.getElementById('counter').textContent =count;
        setnibosi(countb+=coun);
        clickplus();
        const audio = new Audio('音/決定ボタンを押す45.mp3');
        audio.volume = slider_volume.value;
        audio.play();
        oyatustyles();
        shopItemStyles();
        urashopStyles();
        questlvup = JSON.parse(localStorage.getItem("questlvup") || "[1,1,1]");
        msakana = Number(localStorage.getItem("msakana") || 170);
        mmck = Number(localStorage.getItem("mmck") || 100);
        //ミッション
        if(count>=msakana){
            msakana*=2;
            // console.log(msakana);
            Lvcount+=questlvup[0];
            questlvup[0]+=1;
            localStorage.setItem("msakana", msakana);
            mq12.textContent = mqest1[0]+msakana+"コ集める Lv+"+questlvup[0]+"↑";
            localStorage.setItem("questlvup", JSON.stringify(questlvup));
            ok1();
            lvup();
        }
        if(counttt==mmck){
            mmck+=200;
            Lvcount+=questlvup[2];
            questlvup[2]+=1;
            localStorage.setItem("mmck", mmck);
            mq32.textContent = mqest1[2]+mmck+"回クリックする Lv+"+questlvup[2]+"↑";
            localStorage.setItem("questlvup", JSON.stringify(questlvup));
            ok1();
            lvup();
        }

        if(count >= 1000 && !questclear1){
            let count = Number(localStorage.getItem("count") || 0);
            Lvcount+=10;
            questclear1 = true;
            localStorage.setItem("questclear1", "true");
            mq42.style.textDecoration = 'line-through'; // ← 追加！
            mq42.style.opacity = '0.6'; // 少し薄く
            ato42.style.display = 'none';
            ok1();
            lvup();
        }
        if(count >= 10000 && !questclear2){
            let count = Number(localStorage.getItem("count") || 0);
            Lvcount+=30;
            questclear2 = true;
            localStorage.setItem("questclear2", "true");
            mq52.style.textDecoration = 'line-through'; // ← 追加！
            mq52.style.opacity = '0.6'; // 少し薄く
            ato52.style.display = 'none';
            ok1();
            lvup();
        }
        if(count >= 100000 && !questclear3){
            let count = Number(localStorage.getItem("count") || 0);
            Lvcount+=50;
            questclear3 = true;
            localStorage.setItem("questclear3", "true");
            mq62.style.textDecoration = 'line-through'; // ← 追加！
            mq62.style.opacity = '0.6'; // 少し薄く
            ato62.style.display = 'none';
            ok1();
            lvup();
        }

        document.getElementById('counter').innerText = `${count}`;
        //記録
        document.getElementById('kirokuLv').innerText = `${Lvcount}`;
        document.getElementById('kirokuclick').innerText = `${counttt}`;
        document.getElementById('kirokusakana').innerText = `${count}`;
        document.getElementById('kirokusakanas').innerText = `${countb}`;
        document.getElementById('kirokusakanasiyou').innerText = `${countnedan}`;
        document.getElementById('kirokumono').innerText = `${Icount}`;
        clearcheck();
    }

    function clearcheck(){
        let count = Number(localStorage.getItem("count") || 0);
        msakana = Number(localStorage.getItem("msakana") || 170);
        mItem = Number(localStorage.getItem("mItem") || 10);
        mmck = Number(localStorage.getItem("mmck") || 100);
        Icount = Number(localStorage.getItem("kirokuIcount")) || 0;
        document.getElementById('ato12').innerText = `クリアまであと${msakana-count}コ`;
        document.getElementById('ato22').innerText = `クリアまであと${mItem-Icount}コ`;
        document.getElementById('ato32').innerText = `クリアまであと${mmck-counttt}回`;
        document.getElementById('ato42').innerText = `クリアまであと${1000-count}コ`;
        document.getElementById('ato52').innerText = `クリアまであと${10000-count}コ`;
        document.getElementById('ato62').innerText = `クリアまであと${100000-count}コ`;
    }
    function questflag(){
        if(questclear1==true){
            mq42.style.textDecoration = 'line-through'; // ← 追加！
            mq42.style.opacity = '0.6'; // 少し薄く
            ato42.style.display = 'none';
        }
        if(questclear2==true){
            mq52.style.textDecoration = 'line-through'; // ← 追加！
            mq52.style.opacity = '0.6'; // 少し薄く
            ato52.style.display = 'none';
        }
        if(questclear3==true){
            mq62.style.textDecoration = 'line-through'; // ← 追加！
            mq62.style.opacity = '0.6'; // 少し薄く
            ato62.style.display = 'none';
        }
    }
    function resetquestflag(){
      // フラグを false にする
      questclear1 = false;
      questclear2 = false;
      questclear3 = false;
      // ローカルストレージも更新
      localStorage.setItem("questclear1", "false");
      localStorage.setItem("questclear2", "false");
      localStorage.setItem("questclear3", "false");
      //スタイル
      mq42.textContent = '魚を1000コ以上集める Lv+10↑';
      mq42.style.textDecoration = 'none';
      mq42.style.opacity = '1';
      ato42.style.display = 'block';
      mq52.textContent = '魚を1000コ以上集める Lv+30↑';
      mq52.style.textDecoration = 'none';
      mq52.style.opacity = '1';
      ato52.style.display = 'block';
      mq62.textContent = '魚を1000コ以上集める Lv+50↑';
      mq62.style.textDecoration = 'none';
      mq62.style.opacity = '1';
      ato62.style.display = 'block';
      document.getElementById('ato42').innerText = `クリアまであと${1000-count}コ`;
      document.getElementById('ato52').innerText = `クリアまであと${10000-count}コ`;
      document.getElementById('ato62').innerText = `クリアまであと${100000-count}コ`;
    }

    function Itm5flag(){
        if (flagItm5 === true && itm5timer === null) {
            clickicon.style.display = 'block';
            itm5timer = setInterval(() => {
                let count = Number(localStorage.getItem("count") || 0);
                let coun1s = Number(localStorage.getItem("coun1s") || 0);
                count += coun1s;
                setnibosi(countb+=coun1s);
                localStorage.setItem("count", count);
                document.getElementById('counter').innerText = `${count}`;
                oyatustyles();
                shopItemStyles();
                clearcheck();
                //ミッション
                if(count>=msakana){
                    msakana*=2;
                    // console.log(msakana);
                    Lvcount+=questlvup[0];
                    questlvup[0]+=1;
                    localStorage.setItem("msakana", msakana);
                    mq12.textContent = mqest1[0]+msakana+"コ集める Lv+"+questlvup[0]+"↑";
                    localStorage.setItem("questlvup", JSON.stringify(questlvup));
                    ok1();
                    lvup();
                }
                if(count >= 1000 && !questclear1){
                    let count = Number(localStorage.getItem("count") || 0);
                    Lvcount+=10;
                    questclear1 = true;
                    localStorage.setItem("questclear1", "true");
                    mq42.style.textDecoration = 'line-through'; // ← 追加！
                    mq42.style.opacity = '0.6'; // 少し薄く
                    ato42.style.display = 'none';
                    ok1();
                    lvup();
                }
                if(count >= 10000 && !questclear2){
                    let count = Number(localStorage.getItem("count") || 0);
                    Lvcount+=30;
                    questclear2 = true;
                    localStorage.setItem("questclear2", "true");
                    mq52.style.textDecoration = 'line-through'; // ← 追加！
                    mq52.style.opacity = '0.6'; // 少し薄く
                    ato52.style.display = 'none';
                    ok1();
                    lvup();
                }
                if(count >= 100000 && !questclear3){
                    let count = Number(localStorage.getItem("count") || 0);
                    Lvcount+=50;
                    questclear3 = true;
                    localStorage.setItem("questclear3", "true");
                    mq62.style.textDecoration = 'line-through'; // ← 追加！
                    mq62.style.opacity = '0.6'; // 少し薄く
                    ato62.style.display = 'none';
                    ok1();
                    lvup();
                }
            }, 1000);
        }
    }

    document.getElementById('counter').innerText = `${count}`;
    document.getElementById('coun').innerText = `+${coun}`;
    document.getElementById('coun1s').innerText = `毎秒+${coun1s}`;
    document.getElementById('inputLv').innerText = `${Lvcount}`;

    //ねこショップのゲット数
    document.getElementById('get').innerText = `所持数　×${get[0]}`;
    document.getElementById('get2').innerText = `所持数　×${get[1]}`;
    document.getElementById('get3').innerText = `所持数　×${get[2]}`;
    document.getElementById('get4').innerText = `所持数　×${get[3]}`;
    document.getElementById('get5').innerText = `所持数　×${get[4]}`;
    //値段
    document.getElementById('nedan').innerText = `${nedan[0]}魚`;
    document.getElementById('nedan2').innerText = `${nedan[1]}魚`;
    document.getElementById('nedan3').innerText = `${nedan[2]}魚`;
    document.getElementById('nedan4').innerText = `${nedan[3]}魚`;
    document.getElementById('nedan5').innerText = `${nedan[4]}魚`;
    document.getElementById('+cnt2').innerText = `+${counnt[0]}`;
    document.getElementById('+cnt3').innerText = `+${counnt[1]}`;
    document.getElementById('+cnt4').innerText = `+${counnt[2]}`;
    document.getElementById('+cnt5').innerText = `+${counnt[3]}`;
    //アイテムの値段
    document.getElementById('Inedan').innerText = `${Inedan[0]}魚`;
    document.getElementById('Inedan2').innerText = `${Inedan[1]}魚`;
    // document.getElementById('Inedan3').innerText = `${Inedan[2]}魚`;
    document.getElementById('Inedan4').innerText = `${Inedan[2]}魚`;
    document.getElementById('Inedan5').innerText = `${Inedan[3]}魚`;
    document.getElementById('inputLv').innerText = `${Lvcount}`;
    //ウラショップ
    document.getElementById('moto').innerText = `+${counnt[0]}`;
    document.getElementById('kyouka').innerText = `+${counnt[0]+5}`;
    document.getElementById('moto2').innerText = `+${counnt[1]}`;
    document.getElementById('kyouka2').innerText = `+${counnt[1]+5}`;
    document.getElementById('moto3').innerText = `+${counnt[2]}`;
    document.getElementById('kyouka3').innerText = `+${counnt[2]+5}`;
    document.getElementById('moto4').innerText = `+${counnt[3]}`;
    document.getElementById('kyouka4').innerText = `+${counnt[3]+5}`;
    //強化の値段
    document.getElementById('unedan1').innerText = `${unedan[0]}レベル`;
    document.getElementById('unedan2').innerText = `${unedan[1]}レベル`;
    document.getElementById('unedan3').innerText = `${unedan[2]}レベル`;
    document.getElementById('unedan4').innerText = `${unedan[3]}レベル`;

    //ミッション
    document.getElementById('ato12').innerText = `クリアまであと${msakana-count}コ`;
    document.getElementById('ato22').innerText = `クリアまであと${mItem-Icount}コ`;
    document.getElementById('ato32').innerText = `クリアまであと${mmck-counttt}回`;
    document.getElementById('ato42').innerText = `クリアまであと${1000-count}コ`;
    document.getElementById('ato52').innerText = `クリアまであと${10000-count}コ`;
    document.getElementById('ato62').innerText = `クリアまであと${100000-count}コ`;

    o1.style.display = 'none';
    o2.style.display = 'none';
    o3.style.display = 'none';
    o4.style.display = 'none';
    o5.style.display = 'none';
    o6.style.display = 'none';
    o7.style.display = 'none';
    o8.style.display = 'none';

    function uposakana(x,y) {//upsakana
        // 新しいpを作る
        const osakana = document.createElement('p');
        osakana.id = 'upsakana';
        osakana.textContent = '+'+coun;
        osakana.style.zIndex = 1000;
        osakana.classList.add('upsakana');
        // クリック位置に配置
        osakana.style.position = 'absolute';
        osakana.style.left = `${x}px`;
        osakana.style.top = `${y}px`;

        document.body.appendChild(osakana);
        setTimeout(() => {
            osakana.remove();
        }, 300);
    }


    function lvup(){     
        const audio =new Audio('音/決定ボタンを押す12.mp3');
        audio.volume = slider_volume.value;
        audio.play();
        // alert("レベルアップ! Lv."+Lvcount+"になったよ");
        ok2();
        urashopStyles();
        console.log("レベルアップ");
        localStorage.setItem('inputLv', Lvcount);
        document.getElementById('inputLv').textContent = Lvcount;
    }  
    
    //ものを買うミッション
    function mmI(){
        Icount = Number(localStorage.getItem("kirokuIcount")) || 0;
        questlvup = JSON.parse(localStorage.getItem("questlvup") || "[1,1,1]");
        mItem = Number(localStorage.getItem("mItem") || 10);
        document.getElementById('ato22').innerText = `クリアまであと${mItem - Icount}コ`;
        if(Icount >= mItem){
            mItem*=2;
            Lvcount+=questlvup[1];
            mq22.textContent = mqest1[1]+mItem+"コ買う Lv+"+questlvup[1]+"↑";
            document.getElementById('ato22').innerText = `クリアまであと${mItem - Icount}コ`;
            questlvup[1]+=1;
            localStorage.setItem("mItem", mItem);
            localStorage.setItem("questlvup", JSON.stringify(questlvup));
            ok1();
            lvup();
        }
    }

    function oyatustyles() {
        const count = Number(localStorage.getItem("count")) || 0;

        const targets = [
            {
                name: '缶詰',
                elementId: 'oyatuu',
                nedanId: 'nedan',
                basePrice: () => nedan[0],
                index: 0
            },
            {
                name: 'キャットフード',
                elementId: 'oyatutu',
                nedanId: 'nedan2',
                basePrice: () => nedan[1],
                index: 1
            },
            {
                name: '高級缶詰',
                elementId: 'oyatu3',
                nedanId: 'nedan3',
                basePrice: () => nedan[2],
                index: 2
            },
            {
                name: 'オヤツ',
                elementId: 'oyatu4',
                nedanId: 'nedan4',
                basePrice: () => nedan[3],
                index: 3
            },
            {
                name: 'ケーキ',
                elementId: 'oyatu5',
                nedanId: 'nedan5',
                basePrice: () => nedan[4],
                index: 4
            }
        ];
        targets.forEach(target => {
            let total = 0;
            let price = target.basePrice();
            for (let i = 0; i < kaukazu; i++) {
                total += price;
                price *= 2;
            }

            // アイテム要素の取得
            const el = document.getElementById(target.elementId);
            if (!el) return;

            // 金額を画面に表示（例：nedan, nedan2, nedan3）
            const priceDisplay = document.getElementById(target.nedanId);
            if (priceDisplay) {
            priceDisplay.innerText = `${total}魚`;
            }
            if (count < total) {
            el.style.opacity = '0.6';  // 半透明に
            } else {
            el.style.opacity = '1';    // 元に戻す
            }
        });
    }

    document.getElementById('kau').innerText = `${kaukazu}`;
    const KAUPBUTTON = document.getElementById('plus');
    KAUPBUTTON.addEventListener('click', () => {
        kaukazu++;
        document.getElementById('kau').innerText = `${kaukazu}`;
        updateTotalPriceDisplay();
        updateTotalPriceDisplay2();
        updateTotalPriceDisplay3();
        updateTotalPriceDisplay4();
        updateTotalPriceDisplay5();
        oyatustyles();
    });
    //プラス10
    const KAUP10BUTTON = document.getElementById('plus10');
    KAUP10BUTTON.addEventListener('click', () => {
        kaukazu+=10;
        document.getElementById('kau').innerText = `${kaukazu}`;
        updateTotalPriceDisplay();
        updateTotalPriceDisplay2();
        updateTotalPriceDisplay3();
        updateTotalPriceDisplay4();
        updateTotalPriceDisplay5();
        oyatustyles();
    });

    const KAUMBUTTON = document.getElementById('minus');
    KAUMBUTTON.addEventListener('click', () => {
        if(kaukazu>=2){
            kaukazu-=1;
            document.getElementById('kau').innerText = `${kaukazu}`;
            updateTotalPriceDisplay();
            updateTotalPriceDisplay2();
            updateTotalPriceDisplay3();
            updateTotalPriceDisplay4();
            updateTotalPriceDisplay5();
            oyatustyles();
        }
    });
    //マイナス10
    const KAUM10BUTTON = document.getElementById('minus10');
    KAUM10BUTTON.addEventListener('click', () => {
        if(kaukazu>=11){
            kaukazu-=10;
            document.getElementById('kau').innerText = `${kaukazu}`;
            updateTotalPriceDisplay(); // ←追加
            updateTotalPriceDisplay2();
            updateTotalPriceDisplay3();
            updateTotalPriceDisplay4();
            updateTotalPriceDisplay5();
            oyatustyles();
        }
    });

    //kaukazu分の合計価格を計算して表示
    function updateTotalPriceDisplay() {    
        let total = 0;
        let price = nedan[0];
        for (let i = 0; i < kaukazu; i++) {
            total += price;
            price *= 1.25;
        }
        document.getElementById('nedan').innerText = `${total}魚`;
    }



    // 缶詰の購入ボタンの動作
    const BUTTON_CLICK_EVENT = document.getElementById('button1');
    BUTTON_CLICK_EVENT.addEventListener('click', () => {
        let count = Number(localStorage.getItem("count"));
        get = JSON.parse(localStorage.getItem("get") || "[0,0,0,0,0]");
        let currentPrice = nedan[0]; //現在の価格
        let totalCost = 0;           //合計金額の初期化

        //価格上昇を加味した合計金額を計算
        for (let i = 0; i < kaukazu; i++) {
            totalCost += currentPrice;
            currentPrice *= 1.25;
        }

        if (count >= totalCost && kaukazu > 0) { //魚が足りる＆個数が1以上
            count -= totalCost; //追加
            coun += counnt[0] * kaukazu; //追加
            // countnedan += totalCost; //追加
            setcnedan(countnedan += totalCost);
            get[0] += kaukazu; //追加

            for (let i = 0; i < kaukazu; i++) { //価格上昇の反映
                nedan[0] *= 1.25;
            }
            saveNedan(nedan);
            setIcount(Icount += kaukazu);
            nedan = nedan.map(value => Math.floor(value));//nedanを小数点切り捨て
            // Icount += kaukazu; //追加

            //レベルアップ判定
            const previousGet = get[0] - kaukazu;
            for (let i = previousGet + 1; i <= get[0]; i++) {
                if (i % 10 === 0) {
                    Lvcount += 1;
                    lvup();
                }
            }

            const audio = new Audio('音/kounyu2.mp3');
            audio.volume = slider_volume.value;
            audio.play();

            mmI();
            ok3();
            document.getElementById('get').innerText = `所持数　×${get[0]}`;
            localStorage.setItem('coun', coun);
            document.getElementById('coun').textContent = '+' + coun;
            localStorage.setItem("count", count);
            localStorage.setItem("get", JSON.stringify(get));
            document.getElementById('counter').innerText = `${count}`;
            document.getElementById('nedan').innerText = `${nedan[0]}魚`;
            oyatustyles();
            shopItemStyles();
            urashopStyles();
            btn5();
            clearcheck();
        } 
        else { //魚が足りない or kaukazuが0なら
            const audio = new Audio('音/キャンセル4.mp3')
            audio.volume = slider_volume.value;
            audio.play();
            ok4();
            // alert("魚が足りません");
        }
    });
    
    //kaukazu分の合計価格を計算して表示　キャットフード
    function updateTotalPriceDisplay2() {    
        let total = 0;
        let price = nedan[1];
        for (let i = 0; i < kaukazu; i++) {
            total += price;
            price *= 1.5;
        }
        document.getElementById('nedan2').innerText = `${total}魚`;
    }
    
    //キャットフードの購入ボタンの動作
    const BUTTON_EVT= document.getElementById('button2');
    BUTTON_EVT.addEventListener('click', () => {
        let count = Number(localStorage.getItem("count"));
        get = JSON.parse(localStorage.getItem("get") || "[0,0,0,0,0]");
        let currentPrice = nedan[1];      //現在の価格
        let totalCost = 0;                //合計コスト

        //価格上昇を含めた合計金額を計算
        for (let i = 0; i < kaukazu; i++) {
            totalCost += currentPrice;
            currentPrice *= 1.5; // キャットフード 価格上昇
        }

        //魚が足りるかチェック
        if (count >= totalCost && kaukazu > 0) {
            count -= totalCost;
            coun += counnt[1] * kaukazu;
            setcnedan(countnedan += totalCost);
            get[1] += kaukazu;

            // 価格と表示用価格記録
            for (let i = 0; i < kaukazu; i++) {
                nedan[1] *= 1.5;
            }
            saveNedan(nedan);
            setIcount(Icount += kaukazu);
            nedan = nedan.map(value => Math.floor(value));//nedanを小数点切り捨て

            const audio = new Audio('音/kounyu2.mp3');
            audio.volume = slider_volume.value;
            audio.play();
            
            // レベルアップ処理（5個ごと）
            const previous = get[1] - kaukazu;
            for (let i = previous + 1; i <= get[1]; i++) {
                if (i % 5 === 0) {
                    Lvcount++;
                    lvup();
                }
            }
            mmI();
            ok3();
            document.getElementById('get2').innerText = `所持数　×${get[1]}`;
            localStorage.setItem('coun', coun);
            document.getElementById('coun').textContent = '+' + coun;
            localStorage.setItem("count", count);
            localStorage.setItem("get", JSON.stringify(get));
            document.getElementById('counter').innerText = `${count}`;
            document.getElementById('nedan2').innerText = `${nedan[1]}魚`;
            oyatustyles();
            shopItemStyles();
            urashopStyles();
            btn5();
            clearcheck();
        }
        else 
        {
            const audio = new Audio('音/キャンセル4.mp3')
            audio.volume = slider_volume.value;
            audio.play();
            ok4();
        }
    });

  //kaukazu分の合計価格を計算して表示　高級缶詰
  function updateTotalPriceDisplay3() {    
        let total = 0;
        let price = nedan[2];
        for (let i = 0; i < kaukazu; i++) {
            total += price;
            price *= 2;
        }
        document.getElementById('nedan3').innerText = `${total}魚`; // ←表示用要素IDに合わせて調整
    }

    //高級缶詰の購入ボタンの動作
    const BUTTON_koukandume= document.getElementById('button3');
    BUTTON_koukandume.addEventListener('click', () => {
        let count = Number(localStorage.getItem("count"));
        get = JSON.parse(localStorage.getItem("get") || "[0,0,0,0,0]");
        let currentPrice = nedan[2];      //現在の価格
        let totalCost = 0;                //合計コスト

        //価格上昇を含めた合計金額を計算
        for (let i = 0; i < kaukazu; i++) {
            totalCost += currentPrice;
            currentPrice *= 2; // 高級缶詰 価格上昇
        }

        //魚が足りるかチェック
        if (count >= totalCost && kaukazu > 0) {
            count -= totalCost;
            coun += counnt[2] * kaukazu;
            setcnedan(countnedan += totalCost);
            get[2] += kaukazu;

            // 価格と表示用価格記録
            for (let i = 0; i < kaukazu; i++) {
                nedan[2] *= 2;
            }
            saveNedan(nedan);
            setIcount(Icount += kaukazu);

            const audio = new Audio('音/kounyu2.mp3');
            audio.volume = slider_volume.value;
            audio.play();
            
            // レベルアップ処理（5個ごと）
            const previous = get[2] - kaukazu;
            for (let i = previous + 1; i <= get[2]; i++) {
                if (i % 5 === 0) {
                    Lvcount++;
                    lvup();
                }
            }
            mmI();
            ok3();
            document.getElementById('get3').innerText = `所持数　×${get[2]}`;
            localStorage.setItem('coun', coun);
            document.getElementById('coun').textContent = '+' + coun;
            localStorage.setItem("count", count);
            localStorage.setItem("get", JSON.stringify(get));
            document.getElementById('counter').innerText = `${count}`;
            document.getElementById('nedan3').innerText = `${nedan[2]}魚`;
            oyatustyles();
            shopItemStyles();
            urashopStyles();
            btn5();
            clearcheck();
        }
        else 
        {
            const audio = new Audio('音/キャンセル4.mp3')
            audio.volume = slider_volume.value;
            audio.play();
            ok4();
        }
    });

    //kaukazu分の合計価格を計算して表示　オヤツ
    function updateTotalPriceDisplay4() {    
        let total = 0;
        let price = nedan[3];
        for (let i = 0; i < kaukazu; i++) {
            total += price;
            price *= 2;
        }
        document.getElementById('nedan4').innerText = `${total}魚`; // ←表示用要素IDに合わせて調整
    }

    //オヤツの購入ボタンの動作
    const BUTTON_oyatu= document.getElementById('button4');
    BUTTON_oyatu.addEventListener('click', () => {
        let count = Number(localStorage.getItem("count"));
        get = JSON.parse(localStorage.getItem("get") || "[0,0,0,0,0]");
        let currentPrice = nedan[3];      //現在の価格
        let totalCost = 0;                //合計コスト

        //価格上昇を含めた合計金額を計算
        for (let i = 0; i < kaukazu; i++) {
            totalCost += currentPrice;
            currentPrice *= 2; // 高級缶詰 価格上昇
        }

        //魚が足りるかチェック
        if (count >= totalCost && kaukazu > 0) {
            count -= totalCost;
            coun += counnt[3] * kaukazu;
            setcnedan(countnedan += totalCost);
            get[3] += kaukazu;

            // 価格と表示用価格記録
            for (let i = 0; i < kaukazu; i++) {
                nedan[3] *= 2;
            }
            saveNedan(nedan);
            setIcount(Icount += kaukazu);

            const audio = new Audio('音/kounyu2.mp3');
            audio.volume = slider_volume.value;
            audio.play();
            
            // レベルアップ処理（5個ごと）
            const previous = get[3] - kaukazu;
            for (let i = previous + 1; i <= get[3]; i++) {
                if (i % 5 === 0) {
                    Lvcount++;
                    lvup();
                }
            }
            mmI();
            ok3();
            document.getElementById('get4').innerText = `所持数　×${get[3]}`;
            localStorage.setItem('coun', coun);
            document.getElementById('coun').textContent = '+' + coun;
            localStorage.setItem("count", count);
            localStorage.setItem("get", JSON.stringify(get));
            document.getElementById('counter').innerText = `${count}`;
            document.getElementById('nedan4').innerText = `${nedan[3]}魚`;
            oyatustyles();
            shopItemStyles();
            urashopStyles();
            btn5();
            clearcheck();
        }
        else 
        {
            const audio = new Audio('音/キャンセル4.mp3')
            audio.volume = slider_volume.value;
            audio.play();
            ok4();
        }
    });

     //kaukazu分の合計価格を計算して表示　ケーキ
    function updateTotalPriceDisplay5() {    
        let total = 0;
        let price = nedan[4];
        for (let i = 0; i < kaukazu; i++) {
            total += price;
            price *= 2.5;
        }
        document.getElementById('nedan5').innerText = `${total}魚`; // ←表示用要素IDに合わせて調整
    }

    //ケーキの購入ボタンの動作
    const BUTTON_cake = document.getElementById('button5');
    BUTTON_cake.addEventListener('click', () => {
        let count = Number(localStorage.getItem("count"));
        get = JSON.parse(localStorage.getItem("get") || "[0,0,0,0,0]");
        let currentPrice = nedan[4];      //現在の価格
        let totalCost = 0;                //合計コスト

        //価格上昇を含めた合計金額を計算
        for (let i = 0; i < kaukazu; i++) {
            totalCost += currentPrice;
            currentPrice *= 2.5; // 高級缶詰 価格上昇
        }

        //魚が足りるかチェック
        if (count >= totalCost && kaukazu > 0) {
            count -= totalCost;
            coun *= 2 * kaukazu;
            setcnedan(countnedan += totalCost);
            get[4] += kaukazu;

            // 価格と表示用価格記録
            for (let i = 0; i < kaukazu; i++) {
                nedan[4] *= 2.5;
            }
            saveNedan(nedan);
            setIcount(Icount += kaukazu);
            nedan = nedan.map(value => Math.floor(value));//nedanを小数点切り捨て

            const audio = new Audio('音/kounyu2.mp3');
            audio.volume = slider_volume.value;
            audio.play();
            
            // レベルアップ処理（5個ごと）
            const previous = get[4] - kaukazu;
            for (let i = previous + 1; i <= get[4]; i++) {
                if (i % 5 === 0) {
                    Lvcount++;
                    lvup();
                }
            }
            mmI();
            ok3();
            document.getElementById('get5').innerText = `所持数　×${get[4]}`;
            localStorage.setItem('coun', coun);
            document.getElementById('coun').textContent = '+' + coun;
            localStorage.setItem("count", count);
            localStorage.setItem("get", JSON.stringify(get));
            document.getElementById('counter').innerText = `${count}`;
            document.getElementById('nedan5').innerText = `${nedan[4]}魚`;
            oyatustyles();
            shopItemStyles();
            urashopStyles();
            btn5();
            clearcheck();
        }
        else 
        {
            const audio = new Audio('音/キャンセル4.mp3')
            audio.volume = slider_volume.value;
            audio.play();
            ok4();
        }
    });
    const button5 = document.getElementById('button5');
    button5.disabled = true;
    button5.style.textDecoration = 'line-through';
    button5.style.textDecorationColor = 'red';
    button5.style.textDecorationThickness = '3px';
    function btn5(){
        let coun = Number(localStorage.getItem("coun"));
        button5.style.textDecoration = 'none';
        if(coun == 1){
            button5.disabled = true;
            button5.style.textDecoration = 'line-through';
            button5.style.textDecorationColor = 'red';
            button5.style.textDecorationThickness = '3px';
        }
        else{
            button5.disabled = false;
            button5.style.textDecoration = 'none';
            button5.style.textDecorationColor = 'initial'; // または元の色
            button5.style.textDecorationThickness = 'initial'; 
        }
    }


    function shopItemStyles() {
        const count = Number(localStorage.getItem("count")) || 0;

        const targets = [
            { elementId: 'Item', itemDivClass: 'Itemm', priceIndex: 0 },
            { elementId: 'Item2', itemDivClass: 'Itemm', priceIndex: 1 },
            { elementId: 'Item4', itemDivClass: 'Itemm', priceIndex: 2 },
            { elementId: 'Item5', itemDivClass: 'Itemm', priceIndex: 3 }
        ];

        targets.forEach(target => {
            const button = document.getElementById(target.elementId);
            if (!button) return;

            // ボタンから一番近い「Itemm」クラスの親要素を取得
            const itemDiv = button.closest('.Itemm');
            if (!itemDiv) return;

            const price = Inedan[target.priceIndex];
            itemDiv.style.opacity = (count < price) ? '0.6' : '1';
        });
    }

    const i1 = document.getElementById('i1');
    i1.style.opacity = 1;
    i1.textContent = "ここにアイテムの説明が出ます";

    const im1= document.getElementById('im1');
    im1.addEventListener('click', () => {
        i1.innerHTML = '<span class="tango">魚</span><i class="ri-money-cny-circle-fill"></i>が150貰えます。クールタイム5分';
    });
    const im2= document.getElementById('im2');
    im2.addEventListener('click', () => {
        i1.innerHTML = '2分間食べ物<i class="ri-restaurant-fill"></i>が安くなります。';
    });
    const im3= document.getElementById('im3');
    im3.addEventListener('click', () => {
        i1.innerHTML = 'ランダムで食べ物<i class="ri-restaurant-fill"></i>が貰えます。当たり:1番(缶詰),2番(キャットフード),9番(高級缶詰)';
    });
    const im4= document.getElementById('im4');
    im4.addEventListener('click', () => {
        i1.innerHTML = '自動で<span class="tango">魚</span><i class="ri-money-cny-circle-fill"></i>がクリック<i class="ri-cursor-line"></i>されます。';
    });

    // グローバル変数
    let itemCooldownInterval;
    const BUN_EVT = document.getElementById("Item");

    // ステータス更新関数
    function Item1BuyStatus() {
        const maxBuy = 5;
        const buySpan = document.getElementById("Itm1buy");
        const itemBuyCount = Number(localStorage.getItem("itemBuyCount") || 0);
        const startTime = Number(localStorage.getItem("itemBuyStartTime"));
        const duration = 600; // テスト用:10 本番:600

        if (itemBuyCount < maxBuy) {
            // まだ5回未満なら残数表示だけして戻る
            buySpan.textContent = `あと${maxBuy - itemBuyCount}コ`;
            BUN_EVT.disabled = false;
            BUN_EVT.style.textDecoration = 'none';
            return;
        }

        if (!startTime) {
            // クールダウン開始時間が無ければ何もしない
            return;
        }

        const now = Date.now();
        const elapsed = Math.floor((now - startTime) / 1000);
        let remaining = duration - elapsed;

        if (remaining <= 0) {
            localStorage.removeItem("itemBuyCount");
            localStorage.removeItem("itemBuyStartTime");
            buySpan.textContent = `あと${maxBuy}コ`;
            BUN_EVT.disabled = false;
            BUN_EVT.style.textDecoration = 'none';
            return;
        }

        if (itemBuyCount >= maxBuy) {
            if (itemCooldownInterval) clearInterval(itemCooldownInterval);
            BUN_EVT.disabled = true;
            BUN_EVT.style.textDecoration = 'line-through';
            BUN_EVT.style.textDecorationColor = 'red';
            BUN_EVT.style.textDecorationThickness = '3px';

            buySpan.innerText = `あと${remaining}秒で再購入できます`;

            itemCooldownInterval = setInterval(() => {
                remaining--;
                buySpan.textContent = `あと${remaining}秒で再購入できます`;

                if (remaining <= 0) {
                    clearInterval(itemCooldownInterval);
                    localStorage.removeItem("itemBuyStartTime");
                    localStorage.removeItem("itemBuyCount");
                    BUN_EVT.disabled = false;
                    BUN_EVT.style.textDecoration = 'none';
                    buySpan.textContent = `あと${maxBuy}コ`;
                }
            }, 1000);
        } else {
            buySpan.textContent = `あと${maxBuy - itemBuyCount}コ`;
        }
    }

    // ボタンクリック時の処理
    BUN_EVT.addEventListener('click', () => {
        let count = Number(localStorage.getItem("count"));
        let Inedan = JSON.parse(localStorage.getItem("Inedan") || "[0,800,100,650]");

        let itemBuyCount = Number(localStorage.getItem("itemBuyCount") || 0);
        let itemBuyStartTime = Number(localStorage.getItem("itemBuyStartTime") || 0);
        const now = Date.now();

        // クールダウン終了確認
        if (itemBuyStartTime && now - itemBuyStartTime >= 300000) {
            itemBuyCount = 0;
            itemBuyStartTime = 0;
            localStorage.removeItem("itemBuyCount");
            localStorage.removeItem("itemBuyStartTime");
        }

        if (itemBuyCount >= 5) {
            const audio = new Audio('音/キャンセル4.mp3');
            audio.volume = slider_volume.value;
            audio.play();
            ok4();
            return;
        }

        if (count >= Inedan[0]) {
            const audio = new Audio('音/kounyu1.mp3');
            audio.volume = slider_volume.value;
            audio.play();

            count -= Inedan[0];
            setcnedan(countnedan += Inedan[0]);
            setIcount(Icount += 1);
            count += 150;
            setnibosi(countb+=150);

            if(count>=msakana){
                msakana*=2;
                // console.log(msakana);
                Lvcount+=questlvup[0];
                questlvup[0]+=1;
                localStorage.setItem("msakana", msakana);
                mq12.textContent = mqest1[0]+msakana+"コ集める Lv+"+questlvup[0]+"↑";
                localStorage.setItem("questlvup", JSON.stringify(questlvup));
                ok1();
                lvup();
            }

            if(count >= 1000 && !questclear1){
                let count = Number(localStorage.getItem("count") || 0);
                Lvcount+=10;
                questclear1 = true;
                localStorage.setItem("questclear1", "true");
                mq42.style.textDecoration = 'line-through'; // ← 追加！
                mq42.style.opacity = '0.6'; // 少し薄く
                ato42.style.display = 'none';
                ok1();
                lvup();
            }
            if(count >= 10000 && !questclear2){
                let count = Number(localStorage.getItem("count") || 0);
                Lvcount+=30;
                questclear2 = true;
                localStorage.setItem("questclear2", "true");
                mq52.style.textDecoration = 'line-through'; // ← 追加！
                mq52.style.opacity = '0.6'; // 少し薄く
                ato52.style.display = 'none';
                ok1();
                lvup();
            }
            if(count >= 100000 && !questclear3){
                let count = Number(localStorage.getItem("count") || 0);
                Lvcount+=50;
                questclear3 = true;
                localStorage.setItem("questclear3", "true");
                mq62.style.textDecoration = 'line-through'; // ← 追加！
                mq62.style.opacity = '0.6'; // 少し薄く
                ato62.style.display = 'none';
                ok1();
                lvup();
            }

            localStorage.setItem("count", count);
            document.getElementById('counter').innerText = `${count}`;
            document.getElementById('Inedan').innerText = `${Inedan[0]}魚`;

            itemBuyCount++;
            localStorage.setItem("itemBuyCount", itemBuyCount);

            if (itemBuyCount === 5) {
                localStorage.setItem("itemBuyStartTime", Date.now());
            }

            Item1BuyStatus();
            mmI();
            ok3();
            oyatustyles();
            shopItemStyles();
        } else {
            const audio = new Audio('音/キャンセル4.mp3');
            audio.volume = slider_volume.value;
            audio.play();
            ok4();
        }
    });

    // ページ読み込み時に状態復元
    window.addEventListener("load", Item1BuyStatus);


    let item2CooldownInterval = null;
    let Item2flag = false;

    const timerdisplay = document.getElementById('timerdisplay');
    const BUN_EVT2 = document.getElementById('Item2');
    const I2tt = document.getElementById('I2tt');  // 透明度操作用

    timerdisplay.style.display = 'none';
    I2tt.style.opacity = 0;

    document.querySelectorAll('.sale').forEach(el => {
        el.style.opacity = 0;
    });

    function resumeItem2Timer() {
        const startTime = Number(localStorage.getItem("item2StartTime"));
        const duration = Number(localStorage.getItem("item2Duration"));
        const now = Date.now();

        if (!startTime || !duration) return;

        const elapsed = Math.floor((now - startTime) / 1000);
        let remaining = duration - elapsed;

        if (remaining <= 0) {
            // タイマー終了状態ならリセット
            localStorage.removeItem("item2StartTime");
            localStorage.removeItem("item2Duration");
            resetItem2();
            return;
        }

        startItem2Cooldown(remaining);
    }

    function startItem2Cooldown(duration) {
        if (item2CooldownInterval) clearInterval(item2CooldownInterval);

        Item2flag = true;
        I2tt.style.opacity = 1;
        document.querySelectorAll('.sale').forEach(el => {
            el.style.opacity = 1;
        });
        BUN_EVT2.disabled = true;
        BUN_EVT2.style.textDecoration = 'line-through';
        BUN_EVT2.style.textDecorationColor = 'red';
        BUN_EVT2.style.textDecorationThickness = '3px';

        timerdisplay.style.display = 'block';

        let remaining = duration;

        timerdisplay.innerText = `セール終了まで：${remaining}秒`;

        item2CooldownInterval = setInterval(() => {
            remaining--;
            timerdisplay.innerText = `セール終了まで：${remaining}秒`;

            if (remaining <= 0) {
                clearInterval(item2CooldownInterval);
                resetItem2();
            }
        }, 1000);
    }

    function resetItem2() {
        timerdisplay.style.display = 'none';
        I2tt.style.opacity = 0;
        document.querySelectorAll('.sale').forEach(el => {
            el.style.opacity = 0;
        });
        BUN_EVT2.disabled = false;
        BUN_EVT2.style.textDecoration = 'none';
        Item2flag = false;

        // 値段を元に戻す処理（必要ならここで）
        let savedMotonedan = JSON.parse(localStorage.getItem("motonedan") || "[]");
        if (savedMotonedan.length === 4) {
            nedan[0] = savedMotonedan[0];
            nedan[1] = savedMotonedan[1];
            nedan[2] = savedMotonedan[2];
            nedan[3] = savedMotonedan[3];
            saveNedan(nedan);
            oyatustyles();
            shopItemStyles();
            document.getElementById('nedan').innerText = `${nedan[0]}魚`;
            document.getElementById('nedan2').innerText = `${nedan[1]}魚`;
            document.getElementById('nedan3').innerText = `${nedan[2]}魚`;
            document.getElementById('nedan4').innerText = `${nedan[3]}魚`;
            localStorage.removeItem("motonedan");
        }

        localStorage.removeItem("item2StartTime");
        localStorage.removeItem("item2Duration");
    }

    BUN_EVT2.addEventListener('click', () => {

        let count = Number(localStorage.getItem("count"));
        Inedan = JSON.parse(localStorage.getItem("Inedan") || "[0,800,100,650]");

        if (count < Inedan[1]) {
            const audio = new Audio('音/キャンセル4.mp3');
            audio.volume = slider_volume.value;
            audio.play();
            ok4();
            return;
        }

        // 購入処理
        count -= Inedan[1];
        setcnedan(countnedan += Inedan[1]);
        Inedan[1] *= 1.5;
        Inedan = Inedan.map(value => Math.floor(value));//Inedanを小数点切り捨て
        setIcount(Icount += 1);

        // 値段を半分にする処理
        const motonedan = [nedan[0], nedan[1], nedan[2], nedan[3]];
        localStorage.setItem("motonedan", JSON.stringify(motonedan));
        nedan[0] = Math.floor(nedan[0] / 2);
        nedan[1] = Math.floor(nedan[1] / 2);
        nedan[2] = Math.floor(nedan[2] / 2);
        nedan[3] = Math.floor(nedan[3] / 2);
        saveNedan(nedan);

        localStorage.setItem("count", count);
        localStorage.setItem("Inedan", JSON.stringify(Inedan));

        document.getElementById('counter').innerText = `${count}`;
        document.getElementById('nedan').innerText = `${nedan[0]}魚`;
        document.getElementById('nedan2').innerText = `${nedan[1]}魚`;
        document.getElementById('nedan3').innerText = `${nedan[2]}魚`;
        document.getElementById('nedan4').innerText = `${nedan[3]}魚`;
        document.getElementById('Inedan2').innerText = `${Inedan[1]}魚`;

        const audio = new Audio('音/kounyu1.mp3');
        audio.volume = slider_volume.value;
        audio.play();
        ok3();

        const cooldownDuration = 120; // 2分（秒）
        const startTime = Date.now();

        localStorage.setItem("item2StartTime", startTime);
        localStorage.setItem("item2Duration", cooldownDuration);

        startItem2Cooldown(cooldownDuration);
    });

    // ページ読み込み時にクールダウン復元
    window.addEventListener('load', () => {
        resumeItem2Timer();
    });



    kekka.style.display = 'none';
    const BUN_EVT4= document.getElementById('Item4');
    BUN_EVT4.addEventListener('click', () => {
        let count = Number(localStorage.getItem("count"));
        Inedan = JSON.parse(localStorage.getItem("Inedan") || "[0,800,100,650]");
        get = JSON.parse(localStorage.getItem("get") || "[0,0,0,0,0]");
        // var result = confirm("おみくじ（ランダムでねこショップの商品が貰えます。ﾊｽﾞﾚあり）\nｱﾀﾘ:1番、2番,9番");
        var random = Math.floor(Math.random()*10)+1
        // if(result) 
        // {
            const kekka = document.getElementById('kekka');
            if(count>=Inedan[2])
            {
                // console.log('Item4購入完了');
                const audio = new Audio('音/kounyu1.mp3');
                audio.volume = slider_volume.value;
                audio.play();
                count-=Inedan[2];
                setcnedan(countnedan += Inedan[2]);
                Inedan[2] *= 1.5;
                Inedan = Inedan.map(value => Math.floor(value));//Inedanを小数点切り捨て
                setIcount(Icount += 1);
                oyatustyles();
                shopItemStyles();
                btn5();
                document.getElementById('Inedan4').innerText = `${Inedan[2]}魚`;
                const gazou = document.getElementById('gazou');
                const kuji = document.getElementById('kuji');
                if(random==1){
                    kekka.style.display = 'block';
                    gazou.innerHTML='<img src="./images/pet_food_cat_can.png">';
                    kuji.innerHTML='<img src="./images/omikuji_kichi.png">';
                    bangou.textContent = random + "番 当たり！缶詰+1";
                    get[0]+=1;
                    coun+=counnt[0];
                    // alert("当たり！缶詰+1");
                    // console.log("缶詰"+get[0]);
                    document.getElementById('get').innerText = `所持数　×${get[0]}`;
                    document.getElementById('coun').innerText = `+${coun}`;
                }
                else if(random==2){
                    kekka.style.display = 'block';
                    gazou.innerHTML='<img src="./images/pet_food_cat.png">';
                    kuji.innerHTML='<img src="./images/omikuji_chuukichi.png">';
                    bangou.textContent = random + "番 当たり！キャットフード+1";
                    get[1]+=1;
                    coun+=counnt[1];
                    // alert("当たり！キャットフード+1");
                    // console.log("キャットフード"+get[1]);
                    document.getElementById('get2').innerText = `所持数　×${get[1]}`;        
                    document.getElementById('coun').innerText = `+${coun}`;
                }
                else if(random==9){
                    kekka.style.display = 'block';
                    gazou.innerHTML='<img src="./images/kandume_koukyuu.png">';
                    kuji.innerHTML='<img src="./images/omikuji_daikichi.png">';
                    bangou.textContent = random + "番 当たり！高級缶詰+1";
                    get[2]+=1;
                    coun+=counnt[2];
                    // alert("当たり！高級缶詰+1");
                    // console.log("高級缶詰"+get[2]);
                    document.getElementById('get3').innerText = `所持数　×${get[2]}`;
                    document.getElementById('coun').innerText = `+${coun}`;
                }
                else
                {
                    gazou.innerHTML='<img src="./images/kuji_hazure.png">';
                    kuji.innerHTML='';
                    kekka.style.display = 'block';
                    bangou.textContent = random + "番 残念！ハズレ";
                    // alert(random+"番");
                    // alert("残念！はずれ");
                }   
                mmI(); 
                ok3();  
                localStorage.setItem('coun', coun);
                localStorage.setItem("Inedan", JSON.stringify(Inedan));
                localStorage.setItem("get", JSON.stringify(get));
                document.getElementById('coun').textContent = '+' + coun;
                localStorage.setItem("count", count); 
                document.getElementById('get').innerText = `所持数　×${get[0]}`;
                document.getElementById('get2').innerText = `所持数　×${get[1]}`;
                document.getElementById('get3').innerText = `所持数　×${get[2]}`;
                document.getElementById('counter').innerText = `${count}`;
            }
            else
            {
                const audio = new Audio('音/キャンセル4.mp3')
                audio.volume = slider_volume.value;
                audio.play();
                ok4();
            }
        }
    // }
    );

  const BUN_EVT5= document.getElementById('Item5');
    BUN_EVT5.addEventListener('click', () => {
        let count = Number(localStorage.getItem("count") || 0);
        let coun1s = Number(localStorage.getItem("coun1s") || 0);
        Inedan = JSON.parse(localStorage.getItem("Inedan") || "[0,800,100,650]");
        // var result = confirm("このアイテムは毎秒魚が1増えるようになるアイテムです。\n購入しますか？");
        // if(result) 
        // {
            if(count>=Inedan[3])
            {
                // console.log('Item5購入完了');
                const audio = new Audio('音/kounyu1.mp3');
                audio.volume = slider_volume.value;
                audio.play();
                count-=Inedan[3];
                setcnedan(countnedan += Inedan[3]);
                Inedan[3]*= 2;
                flagItm5 = true;
                localStorage.setItem("flagItm5", "true");
                setIcount(Icount += 1);
                // coun1s+=1;
                setcs(coun1s+=5);
                Itm5flag();
                oyatustyles();
                shopItemStyles();
                localStorage.setItem("count", count);
                localStorage.setItem("Inedan", JSON.stringify(Inedan));
                document.getElementById('counter').innerText = `${count}`;
                document.getElementById('Inedan5').innerText = `${Inedan[3]}魚`;
                document.getElementById('coun1s').innerText = `毎秒+${coun1s}`;
                mmI();
                ok3();
            }
            else{
                const audio = new Audio('音/キャンセル4.mp3')
                audio.volume = slider_volume.value;
                audio.play();
                ok4();
            }
        }
    // }
    );

    function urashopStyles() {
        const Lvcount = Number(localStorage.getItem("inputLv")) || 0;

        const targets = [
            { id: 'uramono', unedanIndex: 0 },
            { id: 'ura2',    unedanIndex: 1 },
            { id: 'ura3',    unedanIndex: 2 },
            { id: 'ura4',    unedanIndex: 3 }
        ];

        targets.forEach(target => {
        const block = document.getElementById(target.id);
        if (!block) return;

        if (Lvcount < unedan[target.unedanIndex]) {
            block.style.opacity = '0.6';
        } else {
            block.style.opacity = '1';
        }
        });
    }

    //ウラショップ
    const UBTN= document.getElementById('kyoukabutton');
    UBTN.addEventListener('click', () => {
        unedan = JSON.parse(localStorage.getItem("unedan") || "[5,10,15,45]");
        counnt = JSON.parse(localStorage.getItem("counnt") || "[2,5,10,50]");
            if(Lvcount >= unedan[0])
            {
                console.log('缶詰強化完了');
                Lvcount-=unedan[0];
                unedan[0] += 5;
                counnt[0] += 5;
                ok8();
                // alert("強化完了!");
                const audio = new Audio('音/決定ボタンを押す31.mp3');
                audio.volume = slider_volume.value;
                audio.play();
                // document.getElementById('Inedan3').innerText = `${Inedan[2]}魚`;
                urashopStyles();
                localStorage.setItem('inputLv', Lvcount);
                localStorage.setItem("unedan", JSON.stringify(unedan));
                localStorage.setItem("counnt", JSON.stringify(counnt));
                document.getElementById('inputLv').textContent = Lvcount;
                document.getElementById('unedan1').innerText = `${unedan[0]}レベル`;
                document.getElementById('inputLv').innerText = `${Lvcount}`; 
                document.getElementById('+cnt2').innerText = `+${counnt[0]}`;
                document.getElementById('moto').innerText = `+${counnt[0]}`;
                document.getElementById('kyouka').innerText = `+${counnt[0]+5}`;
            }
            else{
                const audio = new Audio('音/キャンセル4.mp3')
                audio.volume = slider_volume.value;
                audio.play();
                ok5();
                // alert("レベルが足りません");
            }
    });
    const UBTN2= document.getElementById('kyoukabutton2');
    UBTN2.addEventListener('click', () => {
        unedan = JSON.parse(localStorage.getItem("unedan") || "[5,10,15,45]");
        counnt = JSON.parse(localStorage.getItem("counnt") || "[2,5,10,50]");
            if(Lvcount >= unedan[1])
            {
                console.log('キャットフード強化完了');
                Lvcount-=unedan[1];
                unedan[1]+=5;
                counnt[1]+=5;
                ok8();
                // alert("強化完了!");
                const audio = new Audio('音/決定ボタンを押す31.mp3');
                audio.volume = slider_volume.value;
                audio.play();
                // document.getElementById('Inedan3').innerText = `${Inedan[2]}魚`;
                urashopStyles();
                localStorage.setItem('inputLv', Lvcount);
                localStorage.setItem("unedan", JSON.stringify(unedan));
                localStorage.setItem("counnt", JSON.stringify(counnt));
                document.getElementById('inputLv').textContent = Lvcount;
                document.getElementById('unedan2').innerText = `${unedan[1]}レベル`;
                document.getElementById('inputLv').innerText = `${Lvcount}`; 
                document.getElementById('+cnt3').innerText = `+${counnt[1]}`;
                document.getElementById('moto2').innerText = `+${counnt[1]}`;
                document.getElementById('kyouka2').innerText = `+${counnt[1]+5}`;
            }
            else{
                const audio = new Audio('音/キャンセル4.mp3')
                audio.volume = slider_volume.value;
                audio.play();
                ok5();
            }
    });
    const UBTN3= document.getElementById('kyoukabutton3');
    UBTN3.addEventListener('click', () => {
        unedan = JSON.parse(localStorage.getItem("unedan") || "[5,10,15,45]");
        counnt = JSON.parse(localStorage.getItem("counnt") || "[2,5,10,50]");
            if(Lvcount >= unedan[2])
            {
                console.log('高級缶詰強化完了');
                Lvcount-=unedan[2];
                unedan[2]+=5;
                counnt[2]+=5;
                ok8();
                // alert("強化完了!");
                const audio = new Audio('音/決定ボタンを押す31.mp3');
                audio.volume = slider_volume.value;
                audio.play();
                // document.getElementById('Inedan3').innerText = `${Inedan[2]}魚`;
                urashopStyles();
                localStorage.setItem('inputLv', Lvcount);
                localStorage.setItem("unedan", JSON.stringify(unedan));
                localStorage.setItem("counnt", JSON.stringify(counnt));
                document.getElementById('inputLv').textContent = Lvcount;
                document.getElementById('unedan3').innerText = `${unedan[2]}レベル`;
                document.getElementById('inputLv').innerText = `${Lvcount}`; 
                document.getElementById('+cnt4').innerText = `+${counnt[2]}`;
                document.getElementById('moto3').innerText = `+${counnt[2]}`;
                document.getElementById('kyouka3').innerText = `+${counnt[2]+5}`;
            }
            else{
                const audio = new Audio('音/キャンセル4.mp3')
                audio.volume = slider_volume.value;
                audio.play();
                ok5();
            }
    });
    const UBTN4= document.getElementById('kyoukabutton4');
    UBTN4.addEventListener('click', () => {
        unedan = JSON.parse(localStorage.getItem("unedan") || "[5,10,15,45]");
        counnt = JSON.parse(localStorage.getItem("counnt") || "[2,5,10,50]");
            if(Lvcount >= unedan[3])
            {
                console.log('オヤツ強化完了');
                Lvcount-=unedan[3];
                unedan[3]+=5;
                counnt[3]+=5;
                ok8();
                // alert("強化完了!");
                const audio = new Audio('音/決定ボタンを押す31.mp3');
                audio.volume = slider_volume.value;
                audio.play();
                // document.getElementById('Inedan3').innerText = `${Inedan[2]}魚`;
                urashopStyles();
                localStorage.setItem('inputLv', Lvcount);
                localStorage.setItem("unedan", JSON.stringify(unedan));
                localStorage.setItem("counnt", JSON.stringify(counnt));
                document.getElementById('inputLv').textContent = Lvcount;
                document.getElementById('unedan4').innerText = `${unedan[3]}レベル`;
                document.getElementById('inputLv').innerText = `${Lvcount}`; 
                document.getElementById('+cnt5').innerText = `+${counnt[3]}`;
                document.getElementById('moto4').innerText = `+${counnt[3]}`;
                document.getElementById('kyouka4').innerText = `+${counnt[3]+5}`;
            }
            else{
                const audio = new Audio('音/キャンセル4.mp3')
                audio.volume = slider_volume.value;
                audio.play();
                ok5();
            }
    });


    hatenatab.style.display = 'none';//設定欄を隠す
    //設定
    const hatenabtn = document.getElementById('hatena');
    hatenabtn.addEventListener('click', () => {
        const audio = new Audio('音/決定ボタンを押す31.mp3');
        audio.volume = slider_volume.value;
        audio.play();
        // 要素を表示する
        hatenatab.style.display = 'block';
    }); 

    //ミッション
    mii2.style.display = 'none';
    atojiru.style.visibility = 'hidden';
    ato12.style.display = 'none';
    ato22.style.display = 'none';
    ato32.style.display = 'none';
    ato42.style.display = 'none';
    ato52.style.display = 'none';
    ato62.style.display = 'none';

    const BUTTONm2= document.getElementById('tst');
    BUTTONm2.addEventListener('click', () => {
        const audio = new Audio('音/決定ボタンを押す31.mp3');
        audio.volume = slider_volume.value;
        audio.play();
        questlvup = JSON.parse(localStorage.getItem("questlvup") || "[1,1,1]");
        msakana = Number(localStorage.getItem("msakana") || 170);
        mItem = Number(localStorage.getItem("mItem") || 10);
        mmck = Number(localStorage.getItem("mmck") || 100);
        const ato42 = document.getElementById("ato42");
        const ato52 = document.getElementById("ato52");
        const ato62 = document.getElementById("ato62");
        // 要素を表示する
        mii2.style.display = 'block';
        mq12.textContent = mqest1[0]+msakana+"コ集める Lv+"+questlvup[0]+"↑";
        mq22.textContent = mqest1[1]+mItem+"コ買う Lv+"+questlvup[1]+"↑";
        mq32.textContent = mqest1[2]+mmck+"回クリックする Lv+"+questlvup[2]+"↑";
        document.getElementById('ato12').innerText = `クリアまであと${msakana-count}コ`;
        document.getElementById('ato22').innerText = `クリアまであと${mItem-Icount}コ`;
        document.getElementById('ato32').innerText = `クリアまであと${mmck-counttt}回`;
        document.getElementById('ato42').innerText = `クリアまであと${1000-count}コ`;
        document.getElementById('ato52').innerText = `クリアまであと${10000-count}コ`;
        document.getElementById('ato62').innerText = `クリアまであと${100000-count}コ`;
    });
    // const BUTTONxx2= document.getElementById('xx2');
    // BUTTONxx2.addEventListener('click', () => {
    //     audio[3].play();
    //     mii2.style.display = 'none';
    // });
    const BUTTONato= document.getElementById('atobtn');
    BUTTONato.addEventListener('click', () => {
        atojiru.style.visibility = 'visible';
        ato12.style.display = 'block';
        ato22.style.display = 'block';
        ato32.style.display = 'block';
        ato42.style.display = 'block';
        ato52.style.display = 'block';
        ato62.style.display = 'block';
        if(questclear1 == true){
            ato42.style.display = 'none';
        }
        if(questclear2 == true){

            ato52.style.display = 'none';
        }
        if(questclear3 == true){
            ato62.style.display = 'none';
        }
    });
    const BUTTONatojiru= document.getElementById('atojiru');
    BUTTONatojiru.addEventListener('click', () => {
        atojiru.style.visibility = 'hidden';
        ato12.style.display = 'none';
        ato22.style.display = 'none';
        ato32.style.display = 'none';
        ato42.style.display = 'none';
        ato52.style.display = 'none';
        ato62.style.display = 'none';
    });

    scon.style.display = 'none';//設定欄を隠す
    //設定
    const BUTTONs= document.getElementById('sbtn');
    BUTTONs.addEventListener('click', () => {
        const audio = new Audio('音/決定ボタンを押す31.mp3');
        audio.volume = slider_volume.value;
        audio.play();
        // 要素を表示する
        scon.style.display = 'block';
    }); 
    const otoBUTTON= document.getElementById('ototst');
    otoBUTTON.addEventListener('click', () => {
        const audio = new Audio('音/決定ボタンを押す45.mp3');
        audio.volume = slider_volume.value;
        audio.play();
    }); 

    const soundList = [
        "音/決定ボタンを押す45.mp3",
        "音/決定ボタンを押す31.mp3",
        "音/決定ボタンを押す50.mp3",
        "音/決定ボタンを押す12.mp3",
        "音/kounyu1.mp3",
        "音/kounyu2.mp3"
    ];

    // すべてのオーディオ要素を取得
    const slider_volume = document.getElementById("volume");
    const audio = document.querySelectorAll(".koukaon");
    

    const initialVolume = parseFloat(slider_volume.value); // 0.0〜1.0 の範囲
    audio.forEach(audio => {
    audio.volume = initialVolume;
    });

    audio.volume = 0.5; // 音量を0.0〜1.0で設定
    slider_volume.addEventListener("input", () => {
        const volume = parseFloat(slider_volume.value);
        audio.forEach(a => {
                a.volume = volume;
         });
    });
    // リセットボタンのイベント
    btn_reset.addEventListener("click", () => {
        const defaultVolume = 0.5;
        slider_volume.value = defaultVolume;
        audio.forEach(a => a.volume = defaultVolume);
    });

    function changeFont(font) {//フォントを変える
        sessionStorage.setItem('selectfont',font);
        document.body.style.fontFamily = font;

        // 各種要素にも適用
        const selects = [
            '.Itembtn',
            '.text',
            '#dbutton',
            '.pm',
            '#kau',
            '#dbtn',
            '#loadp'
        ];

        selects.forEach(selector => {
            const elements = document.querySelectorAll(selector);
            elements.forEach(el => {
                el.style.fontFamily = font;
            });
        });
    }

    const originalSize = 16; // すべての要素のベースフォントサイズ

    function changeFontSize(change) {
        change = Number(change); // 念のため型変換

        // 保存されているサイズ増減値を取得（なければ0）
        let savedSize = Number(sessionStorage.getItem('selectsize') || 0);

        // 新しい増減値を計算
        let newSizeOffset = savedSize + change;

        // 安全範囲（例：-8〜+32まで）で制限
        if (newSizeOffset < -8) newSizeOffset = -8;
        if (newSizeOffset > 32) newSizeOffset = 32;

        // 適用対象のセレクタ
        const selectors = ['.txt', '.nee', '.line', '.up'];
        selectors.forEach(selector => {
            const elements = document.querySelectorAll(selector);
            elements.forEach(el => {
                const newSize = originalSize + newSizeOffset;
                el.style.fontSize = newSize + 'px';
            });
        });

        // セッションに保存
        sessionStorage.setItem('selectsize', newSizeOffset);
    }

    function resetFontSize() {
        const selectors = ['.txt', '.nee', '.line', '.up'];
        selectors.forEach(selector => {
            const elements = document.querySelectorAll(selector);
            elements.forEach(el => {
                el.style.fontSize = originalSize + 'px';
            });
        });

        // 差分も0にリセット
        sessionStorage.setItem('selectsize', "0");
    }


    //ねこの表情とセリフ
    {
        const btn = document.getElementById('btn');
        btn.addEventListener('click', () => {
            const audio = new Audio('音/決定ボタンを押す50.mp3');
            audio.volume = slider_volume.value;
            clickCount += 1
            if(clickCount==1){
                btn.textContent = '...ねこショップへようこそ';
                document.getElementById('cat').src='./images/ねこ2.png';
                clickCount+=1;
                audio.play();
            }
            else if(clickCount==3){
                btn.textContent = 'ここでは食べ物やおもちゃなどを売っています。';
                document.getElementById('cat').src='./images/ねこ4.png';
                clickCount++
                audio.play();
            }
            else if(clickCount==5){
                btn.textContent = '…ぜひ買ってくださいね';
                document.getElementById('cat').src='./images/ねこ3.png';
                clickCount++
                audio.play();
            }
            else if(clickCount){
                btn.textContent = 'こんにちは';
                document.getElementById('cat').src='./images/ねこ1.png';
                clickCount=0;
                audio.play();
            }
            
        })
    }
    //うさぎの表情とセリフ
    {
        const btnB = document.getElementById('btn2');
        btnB.addEventListener('click', () => {
            const audio = new Audio('音/決定ボタンを押す50.mp3');
            audio.volume = slider_volume.value;
            clickCountB += 1
            if(clickCountB==1){
                btnB.textContent = 'アイテムショップへようこそ';
                document.getElementById('usagi').src='./images/usagi2.png'
                clickCountB+=1;
                audio.play();
            }
            else if(clickCountB==3){
                btnB.textContent = 'アイテムをクリックすると説明が見れます。';
                document.getElementById('usagi').src='./images/usagi3.png';
                clickCountB+=1;
                audio.play();
            }
            else if(clickCountB==5){
                btnB.textContent = 'ぜひ手に入れてくださいね！';
                document.getElementById('usagi').src='./images/usagi3.png';
                clickCountB++
                audio.play();
            }
            else if(clickCountB){
                btnB.textContent = 'いらっしゃいませ';
                document.getElementById('usagi').src='./images/usagi1.png';
                clickCountB=0;
                audio.play();
            }
            
        })
    }
    {
        const btnB = document.getElementById('btn3');
        btnB.addEventListener('click', () => {
            const audio = new Audio('音/決定ボタンを押す50.mp3');
            audio.volume = slider_volume.value;
            clickCountc += 1
            if(clickCountc==1){
                btnB.textContent = '...';
                document.getElementById('usagi2').src='./images/うら3.png'
                clickCountc+=1;
                audio.play();
            }
            else if(clickCountc==3){
                btnB.textContent = 'ここではあなたのレベルを使ってねこショップの商品の強化ができます';
                document.getElementById('usagi2').src='./images/うら2.png';
                clickCountc+=1;
                audio.play();
            }
            else if(clickCountc==5){
                btnB.textContent = 'やってみてくださいね';
                document.getElementById('usagi2').src='./images/うら2.png';
                clickCountc++
                audio.play();
            }
            else if(clickCountc){
                btnB.textContent = 'ようこそ';
                document.getElementById('usagi2').src='./images/うら1.png';
                clickCountc=0;
                audio.play();
            }
            
        })
    }
    //商品をクリックするとねこの表情が変わるようにする。
    function syouhinclick(){
        const audio = new Audio('音/決定ボタンを押す50.mp3');
        audio.volume = slider_volume.value;
        btn.textContent = '🎶　　';
        document.getElementById('cat').src='./images/ねこ4.png';
        clickCount2+=1;
        audio.play();
        if(clickCount2==2){
            btn.textContent = 'こんにちは';
            document.getElementById('cat').src='./images/ねこ1.png';
            clickCount2=0;
            audio.play();
        }
    }
    
    //記録
    document.getElementById('kirokuLv').innerText = `${Lvcount}`;
    document.getElementById('kirokuclick').innerText = `${counttt}`;
    document.getElementById('kirokusakana').innerText = `${count}`;
    document.getElementById('kirokusakanas').innerText = `${countb}`;
    document.getElementById('kirokusakanasiyou').innerText = `${countnedan}`;
    document.getElementById('kirokumono').innerText = `${Icount}`;

    kiroku.style.display = 'none';
    //記録ボタンの動作
    const BUTTONAA= document.getElementById('buttonAA');
    BUTTONAA.addEventListener('click', () => {
        let count = Number(localStorage.getItem("count"));
        const audio = new Audio('音/決定ボタンを押す31.mp3');
        audio.volume = slider_volume.value;
        audio.play();
        kiroku.style.display = 'block';
        kiroku.style.opacity = 1;
        document.getElementById('kirokuLv').innerText = `${Lvcount}`;
        document.getElementById('kirokuclick').innerText = `${counttt}`;
        document.getElementById('kirokusakana').innerText = `${count}`;
        document.getElementById('kirokusakanas').innerText = `${countb}`;
        document.getElementById('kirokusakanasiyou').innerText = `${countnedan}`;
        document.getElementById('kirokumono').innerText = `${Icount}`;
    });

    const img = document.getElementById('data');
    const d1 = document.getElementById('d1');
    const catreset = document.getElementById('catreset');
    const catcc = document.getElementById('catcc');
    const cathyouji = document.getElementById('cathyouji');
    const catgetsakana = document.getElementById('catgetsakana');
    let catcount = Number(localStorage.getItem('catcount')) || 0;
    let catget = Number(localStorage.getItem('catget')) || 100;;
    document.getElementById('catgetsakana').innerText = `${catget}`;

    catreset.addEventListener('click', () => {
        img.style.top = '50%';
        img.style.left = '50%';
    });

    cathyouji.style.display = 'none';
    document.getElementById('catcount').innerText = `${catcount}`;
    img.addEventListener('click', () => {
        catcount += 1;
        const d1Width = d1.clientWidth;
        const d1Height = d1.clientHeight;
        
        const maxX = d1Width - img.width;
        const maxY = d1Height - img.height;
        
        const randomX = Math.floor(Math.random() * maxX);
        const randomY = Math.floor(Math.random() * maxY);
        
        img.style.left = `${randomX}px`;
        img.style.top = `${randomY}px`;
        if(catcount % 15 === 0){
            cathyouji.style.display = 'block';
            document.getElementById('catcc').innerText = `${catcount}`;
            document.getElementById('catgetsakana').innerText = `${catget}`;
            count += catget;
            localStorage.setItem('catget', catget);
            catget += 100;
            localStorage.setItem('catget', catget);
            localStorage.setItem("count", count); 
            document.getElementById('counter').textContent =count;
        }
        localStorage.setItem('catcount', catcount);
        document.getElementById('catcount').innerText = `${catcount}`;
    });

    sakujogamen.style.display = 'none';
    //削除画面の動作
    const BUTTONsakujo= document.getElementById('datasakujo');
    BUTTONsakujo.addEventListener('click', () => {
        const audio = new Audio('音/決定ボタンを押す31.mp3');
        audio.volume = slider_volume.value;
        audio.play();
        sakujogamen.style.display = 'block';
    });

    //xボタンの動作
    function xbutton(event) {
        audio[3].play();  // 効果音再生（任意）
        const button = event.currentTarget;
        const parent = button.parentElement;
        if (parent) {
            parent.classList.remove('show');         // opacity を 0 に
            parent.classList.add('fade-out');        // フェードアウトアニメーション

            parent.addEventListener('animationend', () => {
                parent.style.display = 'none';       // 非表示にする
                parent.classList.remove('fade-out'); // クラスを戻しておく
            }, { once: true });
        }
    }

</script>
